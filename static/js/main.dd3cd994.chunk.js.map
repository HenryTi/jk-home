{"version":3,"sources":["images/logo.png","mainSubs/mainSubs.tsx","mainSubs/render.tsx","mainSubs/index.ts","images/pig.png","ui/main.tsx","cart/VCartLabel.tsx","tools/minusPlusWidget.tsx","tools/productImage.tsx","product/VProduct.tsx","product/VProductList.tsx","mainSubs/loader.ts","product/itemLoader.ts","product/CProduct.tsx","cart/VCart.tsx","cart/CCart.tsx","order/VCreateOrder.tsx","order/Order.ts","order/OrderSuccess.tsx","customer/VContactList.tsx","customer/VContact.tsx","customer/VAddress.tsx","customer/CAddress.tsx","customer/CSelectContact.tsx","order/VMyOrders.tsx","order/VOrderDetail.tsx","customer/VInvoiceInfo.tsx","customer/CInvoiceInfo.tsx","order/COrder.tsx","tools/groupByProduct.ts","home/VSiteHeader.tsx","home/VSearchHeader.tsx","home/VHome.tsx","home/CHome.tsx","productCategory/VRootCategory.tsx","productCategory/VCategory.tsx","productCategory/CProductCategory.tsx","member/VMember.tsx","member/CMember.tsx","CurrentUser.ts","home/consts.ts","cart/Cart2.ts","me/about.tsx","me/EditMeInfo.tsx","me/VMe.tsx","me/EditMeInfoFirstOrder.tsx","me/CMe.tsx","ui/common.tsx","ui/product/tuid/product.tsx","ui/customer/tuid/contact.tsx","ui/customer/index.tsx","ui/customer/tuid/index.tsx","ui/customer/tuid/invoice.tsx","ui/index.tsx","CCartApp.tsx","ui/order/index.tsx","ui/order/tuid/index.tsx","ui/product/index.tsx","ui/product/tuid/index.tsx","ui/product/tuid/productCategory.tsx","ui/warehouse/index.tsx","ui/warehouse/tuid/index.tsx","me/loginTop.tsx","App.tsx","registerServiceWorker.ts","index.tsx"],"names":["module","exports","ViewBase","ViewMainSubs","_super","main","sub","_this","call","this","renderSubs","subsContainer","renderSubItems","tslib__WEBPACK_IMPORTED_MODULE_0__","prototype","subViews","react__WEBPACK_IMPORTED_MODULE_1__","subs","model","map","v","index","key","render","ViewListMainSubs","row","view","__webpack_require__","_mainSubs__WEBPACK_IMPORTED_MODULE_0__","d","__webpack_exports__","p","color","selected","main_VHome","VHome","apply","arguments","param","_a","controller","cHome","cCart","cMember","cMe","cartViewModel","faceTabs","name","label","icon","content","tab","notify","undefined","count","caption","Object","dist","react","header","tabs","tslib_es6","open","openPage","VCartLabel_VCartLabel","VCartLabel","showCart","start","index_module","badge","onClick","pointer","cApp","get","className","classnames_default","keys","minusPlusWidget_MinusPlusWidget","MinusPlusWidget","minusClick","getValue","setValue","plusClick","ref","input","parentElement","tagName","disabled","renderContent","renderTemplet","cn","hasError","itemSchema","required","cursorPointer","minusColor","plusColor","hasFocus","hasAction","readOnly","hasValue","NaN","value","minus","invisible","type","defaultValue","onChange","placeholder","onKeyDown","onFocus","evt","onBlur","maxLength","plus","renderErrors","isValidKey","find","mobx_module","imagePath","altimagePath","ProductImage","props","style","chemicalId","src","substr","altImage","schema","VProduct_VProduct","VProduct","renderProduct","product","brand","description","descriptionC","CAS","purity","molecularFomula","molecularWeight","origin","imageUrl","item","renderBrand","arrTemplet","pack","retail","vipPrice","promotionPrice","inventoryAllocation","futureDeliveryTimeDescription","right","price","minPrice","retailUI","deliveryTimeUI","length","warehouse","quantity","deliveryTimeDescription","values","onQuantityChanged","context","prev","data","currency","cartService","addToCart","id","sent","removeFromCart","productId","packId","uiSchema","Templet","items","widget","WidgetClass","onChanged","renderPack","formData","page","renderSearchHeader","cartLabel","renderCartLabel","viewProduct","mainSubs","Math","min","Infinity","VProductList_VProductList","VProductList","onProductClick","showProductDetail","productid","onScrollBottom","pageProducts","more","cart","none","before","loader_Loader","Loader","entities","schemaLoaded","initEntities","loadSchemas","Promise","all","load","initData","loadToData","itemLoader_LoaderBrand","LoaderBrand","cUqProduct","brandTuid","tuid","brandId","itemLoader_LoaderProductChemical","LoaderProductChemical","productTuid","packTuid","divs","productChemicalMap","_b","lodash_default","a","merge","brandLoader","obj","productChemical","chemical","packs","packx","forEach","e","push","itemLoader_LoaderProductChemicalWithPrices","LoaderProductChemicalWithPrices","getFutureDeliveryTimeDescription","salesRegionId","getFutureDeliveryTime","table","salesRegion","futureDeliveryTime","minValue","maxValue","unit","cUqCustomerDiscount","cUqWarehouse","cUqPromotion","getCustomerDiscount","query","priceMap","getInventoryAllocationQuery","getPromotionPackQuery","productLoader","_c","discount","currentUser","currentSalesRegion","currentLanguage","hasCustomer","customer","currentCustomer","discountSetting","currentSalesRegionId","prices","filter","discountinued","expireDate","Date","now","element","ret","round","getQuantity","promises","language","results","fd","i","promotion","discount_1","CProduct_PageProducts","PageProducts","searchProductQuery","firstSize","pageSize","pageStart","setPageStart","CProduct_CProduct","CProduct","res","openVPage","internalStart","searchByKey","first","searchByCategory","category","productCategory","productPropItem","cartSchema","arr","VCart_VCart","VCart","CheckOutButton","checkOut","amount","renderCartItem","renderCartProduct","packsRow","selectable","deletable","restorable","list","ArrContainer","RowContainer","RowSeperator","cartForm","cartData","test","cartItems","testButton","params","footer","empty","size","VCart_productPropItem","CCart_CCart","CCart","renderCart","renderView","parentData","onRowStateChanged","deleted","alert","loginCallback","user","setUser","loginCallBack","closePage","doCheckOut","selectedCartItems","getSelectedItem","isLogined","showLogin","cOrder","cProduct","isDeleted","blankTime","VCreateOrder_VCreateOrder","VCreateOrder","useShippingAddress","shippingAddressIsBlank","invoiceAddressIsBlank","nullContact","renderOrderItem","orderItem","orderItemKey","onSubmit","orderData","shippingContact","invoiceContact","setTimeout","submitOrder","onSelectShippingContact","onSelectInvoiceContact","openMeInfo","onInvoiceInfoEdit","fillMeInfo","role","allowOrdering","fontSize","chevronRight","shippingAddressBlankTip","invoiceAddressBlankTip","divInvoice","invoiceContactUI","defaultChecked","currentTarget","checked","invoiceInfoUI","invoiceType","invoiceInfo","title","orderItems","Order_Order","Order","defineProperty","reduce","pv","cv","subAmount","getDataForSave","oi","pk","webUser","organization","Order_OrderItem","OrderItem","c","OrderSuccess_OrderSuccess","OrderSuccess","orderCreateResult","back","no","VContactList_VContactList","VContactList","onContactRender","userContact","contact","onEditContact","onContactSelected","onNewContact","userContacts","contactList","VContact_schema","VContact_VContact","VContact","visible","organizationName","mobile","telephone","email","rules","address","pickId","pickAddress","country","province","city","county","chineseName","addressString","isDefault","submit","onSaveContact","form","buttonClick","onFormButtonClick","saveContact","onDelContact","userContactData","vCall","VContact_VConfirmDeleteContact","delContact","buttonDel","contactData","clone","fromOrderCreation","onButtonClick","fieldLabelSize","VConfirmDeleteContact","onConfirm","returnCall","left","top","VAddress_VAddress","VAddress","backLevel","provinces","renderPCC","onProvinceClick","pcc","border","marginRight","marginBottom","provinceId","getProvinceCities","cities","len","onCityClick","openPageElement","saveAddress","cityId","getCityCounties","counties","onCountyClick","countyId","getCountryProvince","CAddress_CAddress","CAddress","countryId","getCountryProvincesQuery","getProvinceCitiesQuery","getCityCountiesQuery","addressTuid","save","newAddress","addressId","boxId","cUqCommon","CSelectContact_CSelectContact","CSelectContact","userContactId","contactTuid","getSetting","userSetting","getIsDefault","newContact","newContactId","contactBox","addContact","setDefaultContact","backPage","cUqCustomer","getContacts","CSelectContact_CSelectShippingContact","CSelectShippingContact","contactId","setDefaultShippingContact","CSelectContact_CSelectInvoiceContact","CSelectInvoiceContact","setDefaultInvoiceContact","VMyOrders_VMyOrders","VMyOrders","renderOrder","order","openOrderDetail","date","discription","flow","myOrders","isSelected","currentState","getMyOrders","VOrderDetail_VOrderDetail","VOrderDetail","brief","state","invoiceTypeUI","VOrderDetail_invoiceInfoUI","invoiceTemplate","taxNo","bank","accountNo","VInvoiceInfo_schema","commonRequired","valueAddedRequired","commonVisible","valueAddedVisible","VInvoiceInfo_VInvoiceInfo","VInvoiceInfo","invoice","saveInvoiceInfo","onSaveInvoice","onInvoiceTypeClick","event","parseInt","origInvoice","frm","buildForm","htmlFor","requiredFields","visibleFields","CInvoiceInfo_CInvoiceInfo","CInvoiceInfo","invoiceTypeTuid","invoiceInfoTuid","invoiceInfoBox","newInvoiceInfo","newInvoiceInfoId","invoiceBox","setDefaultInvoice","COrder_COrder","COrder","createOrderFromCart","cartItem","getDefaultShippingContact","_e","getDefaultInvoiceContact","getDefaultInvoiceType","_d","getDefaultInvoiceInfo","orderSheet","result","action","popTo","topKey","onSelectContact","typeSelectContact","openMyOrders","getPendingPaymentQuery","mySheets","cInvoiceInfo","newInvoice","orderId","getSheet","orderItemsGrouped","packItems","cd","cpi","packRow","_i","packItems_2","orderItemGroupByProduct","loaderProduct","openMeInfoFirstOrder","cUqOrder","sheet","getDefaultSetting","defaultSetting","getContact","contact0","contactArr","VSiteHeader_VSiteHeader","VSiteHeader","logo_default","alt","height","width","VSearchHeader_VSearchHeader","VSearchHeader","onSearch","LIGUOSHENG","VHome_VHome","renderSection","subtitle","openMetaView","viewMetaButton","siteHeader","renderSiteHeader","renderCategoryRootList","CHome_CHome","HomeSections","sectionTuid","search","CHome","cProductCategory","renderRootList","renderHome","startDebug","titleTitle","overflow","textOverflow","whiteSpace","subStyle","VRootCategory_VRootCategory","VRootCategory","categoryClick","categoryWapper","parent","openMainPage","renderRootCategory","children","total","paddingRight","renderSubCategory","renderThirdCategory","categories","join","VCategory_VCategory","VCategory","renderChild","childWapper","breadCrumb","arial-babel","breadCrumbItem","categoryWaper","CProductCategory_CProductCategory","CProductCategory","getRootCategoryQuery","getChildrenCategoryQuery","buildCategories","secend","third","getCategoryChildren","parentCategoryId","firstCategory","secendCategory","stylePig","backgroundImage","backgroundSize","backgroundColor","opacity","position","VMember_VMember","VMember","recommendationCodeRef","member","recommendationCode","point","im","inviteCode","divPoints","pointThisWeek","pointAll","fansTitle","fansDetail","submitRecommendationCode","code","current","setReferrer","CMember_CMember","CMember","pop","cUqMember","memberAction","memberRecommenverMap","currentUserId","referrer","fans","CurrentUser_WebUser","WebUser","cUsqWebUser","cUsqCustomer","_user","nick","guest","token","loadWebUser","webUserTuid","webUserCustomerMap","webUserContactMap","webUserContactsMap","webUserSettingMap","firstName","gender","salutation","departmentName","CurrentUser_Customer","add","arr1","del","webUserSettings","saveDefaultSettings","invoiceTypeId","invoiceInfoId","InvoiceInfo","changeWebUser","changeWebUserContact","webUserContact","Customer","contactMap","customerSettingMap","customerSettings","setDefaultSettings","consts","Cart2_CartViewModel","CartViewModel","box","calcSum","cp","$isSelected","$isDeleted","packs_1","pi","Number","set","disposer","dispose","packItem","findIndex","cartItemExists","packsExists","splice","piPack","rows","pe","cartItemIndex","CartServiceFactory","getCartService","Cart2_CartRemoteService","Cart2_CartLocalService","Cart2_CartService","CartService","tuidDiv","generateCartItems","cartData_1","createdate","generateCartItem","productService","packs_2","CartRemoteService","getCartQuery","setCartAction","removeFromCartAction","mergeCartAction","cartData2","packItems_1","groupByProduct","clear","source","CartLocalService","cartstring","localStorage","getItem","JSON","parse","removeItem","text","stringify","setItem","about_About","About","showLogs","logs","EditMeInfo_EditMeInfo","EditMeInfo","onItemChanged","newValue","preValue","userSetProp","saveLocalUser","onWebUserChanged","webUserData","onWebUserContactChanged","webUserContactData","webUserSchema","webUserUiSchema","webUserContactSchema","webUserContactUiSchema","VMe_VMe","VMe","about","changePassword","openContactList","openInvoice","meInfo","userSpan","String","orderStates","exit","showLogout","aboutRows","component","iconClass","logOutRows","bk","concat","EditMeInfoFirstOrder_EditMeInfoFirstOrder","EditMeInfoFirstOrder","CMe_CMe","CMe","renderMe","addressUI","countryUI","currencyUI","productUI","product_item","radiox","radioy","contactUI","customer_uqUI","src_ui","appName","CApp","CCartApp","getCUq","cUqWebUser","salesRegionTuid","languageTuid","showMain","initTabName","VAppMain","isLocal","onDispose","uqs","百灵威系统工程部/common","百灵威系统工程部/order","productx","百灵威系统工程部/product","百灵威系统工程部/customer","百灵威系统工程部/webUser","百灵威系统工程部/warehouse","loginTop","src_App_0","App","onLogined","notLogined","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","console","log","catch","error","react_dom","document","getElementById","URL","toString","addEventListener","fetch","response","status","headers","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.dd3cd994.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAABz1SURBVHja1Ht5eBzVle+5tXb1JnWrtcuSbNmSjY2RWcxmiIGEDIEJMEmALB8fecMkhJdMlknCy3skE4YhkH0jTDIZAsO8gQyEhLwQJiFgMEsMBizvkixrX1otqffu6q6qW/e+c6sleZNsky//pP2VW6rl1j3b7/zOuVeEcw47128B3zndAIzB4ocA0LEpUDtWAcfzUsAPUlUYiCJD4Ze/AZbJgtLSAtwqg7Z2DZCaGsCh8DmC5yywX3sDuOMASybBTaVAX9cFbjaH1yXgpgmsWARjy0Xg33opgE8DbtvgJmZg2Y8Yt2wBy+UBJAlO64MTIqoKPJf7YOnNXV8/f7SnVYG/lA8KyUslcEdHPSFO9xmQlag7l/x4OZdfIU795QgsrGUYINfVAqeuZ/FT3S+8hqWz77EHhy5Jq1LxL0tgDCsSMEBqqAeeyZ2WWzuzs808lf4KI0Sa0aT4X5bAntAIEsK6rgsVwICTx3wqfRufTa4pIEZkm2NDpyuwUKUsnAQPesoXLULe4jMM+DEPkfkxRSAG8Mh548474indWsPHqsPLuDRZ/EIAfAedit8u4+tTuhovVocfO1bgEwYgAp2vc4aGbkKtBtWu1dvkjrbvmS/+kQmE9lyK4EOEcHEvQZdjmQwiMxWxcy0CzAc5pTJQ+v+Iz/cIyLKY8GX43//AwYPgMsrL9nbURZBI0ll4fS+O+T28VjqZ1bz3Vt59oj7Q8t5ZSa6iI2N3SaVSlOF7Mwp5yyHkmSMCs0qASz4fAgKtqIgQPzdLH3X6Dr0XdI3JK5pfZvkiE0iJL2zBmNqC6WUN3t+P9/4RNHUSheaEOuBMTl2GqegGFATkttYDxrouwiYnrqej418DRekiqgJSKPhjIpPtck30QRyzGzSN4/tDpxJYpEiR9o6JYQ/By+CMjgsEl8C2vkDHJy+RMQVmZXCnNfIq3jWzKLCwijMwjHm1CaTq6oV8vJoVCp1cyK7pE1K46hnn0CC4E5NXcc7uwTfXsHyuzMxypzMy+qRslj4mogaNbrj5wpmACpRbmvKha646ZI+O3mYPj30DJxuUNC2jdnY8TCcm70RlWSyZ6ncz2QOsVHwSBTJPGcMuXR6whBc59HI6NHordylqW4EZXUrkA8arflqJGk9gIkvA8gUov/EWaKs7PA0Sv389KxQbOQ4ihwIjbnz6MOEsjNb4Ki+a3UpT4yVqe1un1bPnZzQx24iTkLmLSEqkNaxorhSTkiIRlc4l7yi98PJKls0GcczDJBT8RzkafZROTnnehMr6KnqQD8MmiYounDKvLiesiC7OY2x45EvpXLbej8Ji+ELcJ+9QDKOHmkU4JoaJonjoh25XcRlVbcL4q0IXoeiGL7izcyU5HGzAeIySfMECx7nCGR59N1ptVNa0e/E7KUKa5bKbkGHVEU0DdCsfutmZgGFAdB2kcOgFbV3no55rIgvzAFCSBr14XDiWFXbp69680Sg4Z12amftcNp28LCMTqMZ7kwq3Erry32CVC4xxOAGlOXNBaW4CuTYWLu/bfw4UCgKXTElVd+I58b46KRBQEAF9bjJ9l9zSPKKsaPkoJvYXZNsCFakmWuo8jGVjgRl5VtdVzm0HpeRbpGBgE/7co52xDuNN86zsIe/JPkhnl1QGKsw60CuIiCwr6u1sNvnpMaCkWtJBQQHHwlqf0dD4NHrmIv4v+IcAi050iprKFd4mSdK53mQVZVquqtotydJ7rYO9j9L4dJVkGHnOERFVZRKBKYJT+RzG5nl4r4bx3YWuSTwcUJW0HI38GM/vJmgF5MFr7AN9Zwjr43nk58Z8PiVLI7K4JksntbwIRZaY2SL1HfrspJn1F3QV6ogKyOD5uCH/X0VREqgNDGfliMC8XP4OL5nPIHX7FE3MyOWdb651c/l6MQ+5oX4nc90Wa9+B+91kqg7d55MkGv0UWmecDg1f6AwcflwKh7+MYNdEZ2dX4QRavXjSdQuF+pYcqb6dBIMD81RPwXR0Jf7sBwEiboVEiAxxjFuLOMX7nYFBvOYIxVYEl44cooiZd/MWJV+4J1vIrxivq4a22noIOAyGg3oKve8ZfCtwvE8cR1A6X7jVC6dYzUfQEjKz6TsxRsNSdbgkRaMPOYcPb2KZ3ArJb7yCk9uJSpmSDeOvmeO8T0wWh0qCrh4mtnIBuvMqhtZVamufxee/gQKKd824cykQaQoR/CqWTJ+Fb91RsW7WEw4V61VSnnHRxe3+Q+CmMyA11gHD6krE6mLRgEpyEWcQE2qgULwXXfnioaYohDd1w+p9wzBuFWFyRdcvo21tg+Q4KlNBacMYw4m3InHoQO3d6bk1gYR+5oZ/xbjejmVhqyDszLK24IsRdCCHsN+F8TjMSnILouNK4rob3aJ5JsYkw3tMydCfQytTtDDQqalX0CI3codV82LR7ybnLpZCodeOZmDOyNhRQCRXhETXt/oGgMUTINfXgxKLzisth/dPSGpby53aTPIjQ0EdrCsugfMQmtyhEak3ZuSaNN8PjLJjnQAHXvqKRv7eTadvwuQdFAaXI5EiKuA/0RUR4Uqu1r3xv52h0a+w6cR5KFCV5PerxKX3I2Jvk+rr36GuaDZ4Pv88y+WSnPExSZXLiMLPQrnsuSiO96Kk619kth0WbIiXrH4mCAJDIFgudgWqitAQltW1ebeWK+6MliaG73bSf/i2ObsE/Stir3QzeTbyxq5r9ykUzDXrfnDJdG5/rrYBGJFOFBhT0K8x9fwBf9KIJGMODtiYZkwPeMRBaQKteTcPBqqgYMrIkhhaKuO9PBR8g0SqCbIyjq72LI7x7OKkPSAVwCMn8NzDR+VT4k3+eH8Tz2G6EqxJpDi+THpi5fLHlLJ1j8OZr6cpOhGtq7un7cXXr0nH49LeiLZ9JVceN5n7lZFE/ElOyIETBRaT4lywHHOhFDuhSKgIn61onx17uC73zi+HpicWHHxJ2ojWZ6k0onegAkrHP4cKRmZ3GyRmvsHLpdBbATmNqfDOc225zZlO3NwXC0LNed0/X3No4sp4If/F4ZLyMj61hMCnKLMWBVmYgHC1gN+LJ49AHN0a+pOKexwikwa3iARlOYKBXoFx/TE+NvlNKWcGX5cda1RRP3tD1j7gm8v8YoI5oezaNb9ZX9+yJrjr0C2zdvEQ0+p2k+NSnnLKtoplV+whhAyFvOLb19gIgXvu9HpQ+Qce9DoR6OJvX3AhmKiy8sVKnSuel5Wl7pNYqfR30vT0tyGTC+wyCJQ2n//vN+bpM/LhoQeyqVTbxPoOvqKzKxp+7pXLCslUtNAS2a5mCwWJwGkKLGgiap0Oj4o8Dfo5m0CqqwNraKRyHfMoMi2I3v9NcHbtgRKCizVwGGMQgdGnn56wSGxcUWrySqW5zH0EXf1j0lzyXqSogR6Nw8yF5/7npZGmf9CnDt5ZKpXeP2KgqwcCpH7XgYshmYKMJkM5UvViiQp6dyqBF9wWBRCJ38t98nw8zVtQTE6S5+leNgfq2k7wXXIRqKvaIfuVr3mxuKTnCrIhxvNATbCkvFepSeIcX1LYBnzms2rZvh2zRrAnJLPJLRc+dF5rxydqduy+qTg0/KmcxMHG51cOjAKzMQOgC2fCftu/etUewPGP97pjBUaNg654nJp4lE5dahJBzMl/Vy4UxsGxf7GooFQK5OveAz4kBPQ7P4JFEJtnRpi3AZkPMFSQiHuey1cQnCxNK7kstdCZ2W/7LHoDRQW+pFiFQaL8042z5reDAzsuKM7O/NCViF/Ms4tJYOL4ObRsddmB2YC+vUTpHrWq6gR8XERpwXUJ8lsPHV26RDzLmBHImTJ17x4YHnhn8be/+TQg+T8WSbkX58ql58Ga4UkAUXXNJT1mpDU2ACAJccxSJfWIppwoHpbADebQd0jl8j2+dP7iPCq/pzaQHAwE77o+7f6wZt+hbpPaP3E5q+JITGqQtiddC/okCpuYDDldhilmPa4VclksKE5AemURdYVbLdSax90kkj8dGT2TlK1/s1xncz+3nvbNJJ5QlgAYPjMDWl0UYCxeIeylSgNDpBpRogmrkuVKQUKQYrEbMV7vVG1nXUKTYBsvvVFq67jvA2PZX9X6jE0Flv8ZA2kD4RIY6JBZy4T9jdXQrBpQPTYDfRF9gNfWvo5exDGEYUmm5fV5teWBBq1f6yaT98nJ9Oa0Lpet6vAjxaEhDB++VIYBL4IRSC7B2sRZsOGpEbwOefj/1E3789ym/j6w3RcM6YnGtq67biprfcyyu4vMehDZWrfQlQ8ZVN4sQE/XCrv54i3krOdeV8edEoz6g09gldbr0qU7mxUuvVwnn1Qk4KZ5NTNL79GwiM9pEGe6voMI6y7TwWyiHC4G9YiwJ0drDHD2LrlU+oxetv4q4zqwS4fp14PKjwOMfP0aJWL5y+ZFKdP8PpflTcjtwMBhU9SCV6u14brW1kc3HJq4vjQydMYBjfUnqPU4mYov212tcOnamuWbZrbd4MzO3kpENwTHcKqrh1QOJYIF//HyCP2IPHCRScA11FP3jQGaERM+rJbLn6Zlq+kQofBHH30+79fvXaX6n/8rW4NgvviJVDr1JUbICh3foKKjTPIyvB7zv95+/gX/a8PBkXOc/b0rRkO6le5c+Uhd0L9fPomelfl6ePkcaDtXMeqcjxQeiThAzrZ2uXOzWfn4OBftRhSiy5WBh6KnWvNR0MWvV8zC7SSb2xonLvT7pMN7DennBvH/4CotPLtJ8VcVndLtyeHhO3CSVX58hGKt8QYvwa4a/1Od1ZFPXODI77KnZu6ec0rGVPemwsXXXTsUzQm85icXWPDXZQXmfAsRhTviiVea+TRuIRIqx4UkRYk7ygzWlbBgDy0rqGjOb0Xyf7Ni2ddlsHrq9UOuV5V+XZDY/ZcbtTvbiQaNstY1k0n+Ey/Z70f1ScJikxStqtJ+uaPtXy/VAt9duX/ootJI8uvUKhvja9qhtq096Pvtc9fEZxJPS7KydDPw/3xm3sKi47D0J4KTW7NQmIu40P1+2QjoRGHHarEkE2hPYVFO6DwTJcfGOCFRRN+vSqXSDQgn9Qg+QIN+iJ259leXxxN/79f0XHPJkQlnH8mkk59nheIGWeRvPN7Swdxv6E8EytI9N9SvGqjKFz80R+2vU6Y0DvrQCI110LF3AHoG+1qGFR7A4nFJgd+9YGHRuFu6LoU6e2CwRqSShRYJE+QED36UwBZe25CnEEGmQ0Xlh+ypODEJxdaWCjqTSuBQagd8rlsfFp6CQBnG+6KHRq/SOdyitNQcKKTjH8aa+ibM0YbgBV4Kw3e1xhpfW0PI5/1VWlodHf9qMp3+Ilc1Y1ZikEVbbBiYwpRfhpnm2EEzEsoqLju5S5PjimSPR4u4dtmZeKlZwAuft1htKuf48zI/kpIQoJAc1GAeJLJaaQHiNQmLjhr8vSQzTB9FkQnMg3WhL5fNTKLFcq7vsHin4TKJZtJ1RVX9rjQ6WsICIXB0mSneybBmjiVS3WoweBPV3YsL8ekbiddVkEDlDFowljS3DHFDTmdDwW1E08qcnSKGldUrj5VXVaDcsxfcdJrysiWIsyeIjJqLGYHmoKFrqHmPjgmXM7CCCiOlc4PasR6CrE1PJEGNT0N5ZSs4ujJVIPC/34wGHkyazm3rSuyWWLEcI5RJDi0EZMHRQQb3KNARuEEdO+qkkj9c4CaK4C3oOXn0JluVoKZE4SDhO+bAfUGlTqVbcjKBj89ZmPhB71odtqYSq51cTvE6jMLFcEKK5Vzg6mqUuY4pXJshm9JOtuznWUmCkMuhtexCOhiCfU5xMKcpX9gdNv64Lqt9c0Uy12GLrRRozaBY4xI9LVk+pv72JovfPlSJjUL1gJUprO2Kn58srkuUp5xCNPp4F5OTrOicvMW9uCZzDLNCrc7Mvo9NxT+FMeivNAFQcahRLV9oDfi0dWpz04SEdbCLrk/6D6PA0pFSm2DVQUgYKalYghHccsaVpfyGIgUaxVo6gTGH0Dso818Nb+zKGhOzP4kMDK/OR8KQwTEj8USlxXMU/RTMSgDlJFiwQ6ejoY41/7xVNrrp9PC6vSH96Quq6n5xtquCK518zdUT2J2aPtEquXwLS8y0eG3YhfJNcG7G9VCu+DeBTQ1/kBrqgM7NQbF3AF3bQ2bkp+QyVjL/GvP3Cnt4tJOUSjl8eIgXCgctn2+7wtjLmyWDFRHVTUw1JUPfljh7/W2+ZOaBmGV1FrZ0l4p9A8zYdzAgChFvOvjuBN47rBNz0Cc/2wrBL29Vq1q0g/13vloTGGtf0fLrhvHZK7YZUk+C2eMyLF1bf2aReJgnLtoRTX0TLT+NQjQc4+6ibi8Wb6Rm8Q2Z0p+5rruQhrq4bd0hhIUii1UUOeX1mokinecm5lzQtVlSy35dJPw76AKHznUk6KUMbF17vhCr/pyvf+iXoUOD44Vg4D9cw/dBlbEzuKjSkHBMNNe+1Ufsf77Qlrd1lXiTsr/vm7slu029eMvkRfHsJw8k9kZ31Rq35AlfVuBFC9uDQ0tdG8OKYw4UpWGJRemI1XvobnkmOcRsS7Rgz2Tp7AOYhLcc0/dSlKMW112ZF80Gpzzxccnv76Kx2O2Kovau6R+BaZ8BTFN/xxrqHyO9Ax+QOlpHzJWtDwVHJr8mcaYyHHONasTriP+pFrO4idDSwyPM2pAzNNiwp7/JnJxujjfF3iRVxpiRTFaaEydNS+HwUmijIc1SuegaSPIJNaubmGly51J3yc0Nj6E0N2HNuwUlPLbsO/pn0dKVKlUTKxa3Et13HwsaNyNCZzuH4yDpfpfXq0/SdOZmlkx/gG5Y+4/gsL8hExMXMny/byZ1dqAm+h3Xdq50bHt9EM+tLqHTjE+SOLVpXA/8PNDYMEpiNUuvVR0tsO/ss5ZC1wlr1+5xJ5nqIr4lNCasx+FSNzG7BVOE5P1OTr7pgy+s8Qoik05tBah+rxUJ/wf3+6BKcAWV7Ceh4G55du4S3aZcbaj7FovHH8EHA+htTXQ68Vkxjo6aS2O1NKMSvIAFfyQ0adfVbldopcVzqg0rYk13qWNWCod2S4av0vpZTgpKJb7IppbWKDIpTF1Y6fD53nulWxkmVvnGZGOsur+uCijmfsSBCU7pNvyOQCZzFd64gwRDvQthoiCA+HAug0g09q9fyZuitVDAcnKstvoprmm7KTI3iteXO46sHuYLJx7ZfLUcDNYTw++1Y06rb328sDjPEtYuPVhLbuPF/nGg2QU9IdqL/v1mlOVccR+dioMzPumwgplS0IJmIX+25dKULCs7xDN6ZTsQ7CQW7WmofrC7uf33DTkT+sLaYbe58WFd1aiGKU3z+ZY9Fl3a2t+31HxX4XGht2CtyG+7ty7KRxMn2NNQNT3M7Ts3Fegr/bq8Osj170cyxQ4mXJvS2szQ4KqspkJXtozPoG1DIVVKpcA2fDU0i/SkVO51ZIkNuZa0X2KH9PWdX3tnrKm/fvvOB3qsvJm68KxvocJ3czit7VQLoBVaeoEkhxXBPMs61YYsNt/aIYu7CdCNAga0Nrf+rvvw2KMxpA1zqlGtFIpJVyIdfnw1WhDSIyNaCr9ZXXtlpd9xmSAdLoFOWZHq9WjELqaTfL9KfuGXlc9cWSTMyE8+vK+Y2VS69spd77z2ut+AQ0/bEBUuXRtbylWHMceOuqXS2uWFRYKC/4TbYnmDh4Q0knhcmKKSgo4Lkf7Ry9xy6SFTlsOBDD3ftaywAK4514Zev5xjazfOVRs6FgA6KLbDnf4Bx+trE2JBtMblAZqRUsnS5uZVO1pjdZaz7aVv9bn2lfEVMdjokHUjjz1+Naatn56OsBd+6PqlufT8uQwJBA9CKvPu5RbKZERFS1ehf2XTGM1mJltSua5qkMM6FqoiBzP0jrJltWGp1ybSkSQW3ZG27pWcxH6NvgLR8C/PuuD8Z8INjaC+1gOSWdaUSHXMyU9ArlAciMXoHFdkP75ZrTLLHy+PT95IVXkz6AZszDmQf34721ulFthp7ib+8CLTWqbhRfz6fxGJXI3u2bkcMAknhHDwX/pp4d8P2dIWw3LWb/IHb+go0XV0YZfNkQYKojSzkQn9qKzr90k+n+P6dPAXTdAbGxFMyq18eORSEUKzZbNYH58qc9UfRfdWyMh4p8CFPHqUISkQKlrwVkTfI7ev+J1yqp21x7u02t623PUe2We8Zu3b3ykKf2814ugVVPwdQYU3JnOmXdcU32OVnpjB46z2FS8oQ/HfOsVCgBwV/wJYKCG02YXhzUXXmVZNqN7TC/WmA7bY/M1ZO1a13UVNYWW/vtsIhh2SzlPZccCPITNNS3AwoILYLTeGJVq6pfZRIxhMEw5vT2BpHrKXiOOVru7byI/QhuM2xnGxGqGFOGzt9lU91B5tzT85lwJJ07fTWORJks/dfPS+SBHz6E3SmGsFLCxBfZN5MKYzWEdXgYuVEmQLm9WypSZUMpktm8+H6uqAmPZ6LEnlXrBh7Nz1+bW1TQH/71+UehrDr8o1Nf8ldhq9DXkrAtOJ8eUWbpNseCwuUbebLZWaxGo8ajs4l1mr+QKt9T7jwHvWnwNBrHIKqn6/Npu8VC0W2110a6+BACJVMTLu17TDiOCbLAJRRwNXxLZhXENSmU+WUTe9iruvo67lYIvia5k2zUtfIuV8Sle+u4XKMy3DUz98JaCWaGfH3cFgaO7tLtF6PkrE4tkSBw42Z4eC38ciPy0tsyJY+VuEcic1zfcVDZ1s2Hg2+NFjLJ/2Rjbs/57YGyAhyRC7HMRK4UzYbzactbH/by0DLnA1zESKWDW5ns3MPSBZVuOkT6bqxvXPdbevyTqJmXekC9lVgSu23re1YeW/NL114F2v7H3LGWmquSMYrvqDLLZFKsppH0eIh7w8zJl+48VSNPhv1cnc5zXOCTseIMTiF+OyOzZ+g15T81ui6W/VtLTC9N49YNbFfjpXEzmv5uDhD8mUEYcziBh+uanIzg46YNmcrXEJvRoc53IZqWYRlbxPhT+0UfKzdoeQ2cT0VrlYMjYqgWsDJfvqHgMunOve/ONotPoBmRBGKnz+bX08gX8fCyy/0602aPna637UdWjs8ob+4XOIono18Qn7IEvOep7N3ovM7G9hbm68um8IYrruWFZ5D4bD+zC3Ir/TIDydDMNc5t4SVqWoKbH3cD7GCfRV+1LVPv2nl42l0tmuyI2O67w/hIFAn31h8ytu0Zo6o+O7Gy+//JuBQNBllMKf8vEEXl1Vs+wNLlolHAyP1vkiT7nDE+f4LAccrdKdJEfzaSwynInJd5GXX73DGRq+Q6qurnEpvV3KF29FM/i4XOm9sErBIZ7RFni4QIdR0W3v3ji5OVMupnsHb4UDvf+gZXPVSXzsgF+a3O/K98Zk+Ufezj3Glk2lpyXwZStWn5Q6IhLDRNB8YnRdx9aGXQeu8LkK2DLx6CQ/an1ZTKS0d99H5aqqemRoTZw6FwnrextL+PLFhiueVwhsGE+ujCYzPzGtcrtllWBEB3evyp/NhrRvaGX+IvyJQp4gcJmeqtNHgPqN/qm2plvihw9/aZUDH63D/C+MIpZYvP7xAhurqvJjXnw/Eb0wBCvRfRT5lx2X2MgiDycecnZRCWjfQDCBjHRaV+CwLu2ZDfseMV3nMYPzOP0zCPu2/qrF+5sG4BNZVfpC3pBfjxatmxq5fEmIsqCOMCt7m8MrUlC815rfeKZzF1SEanV+TwifDwbJ22HBwMbrFgJfllAaD6szk5zuTKrsKRbwvaSp6rAijEHgz/Z5W3/GIxiNwrlZlskjvT7y9GFNuSJI4TKfWV4b8ilnIMWLIFsCS/MVMy7dqUdipprOxKoYOUuzbZ+3BCJVdk45KKypKVDU1WSSll/KMvosM4xByxGlHmR9Qil/Jqse/fn/AgwAOY4uqSLnKwwAAAAASUVORK5CYII=\"","import * as React from 'react';\r\nimport { Render } from './render';\r\n\r\nexport interface MainSubs<M, S> {\r\n    main: M;\r\n    subs: S[];\r\n}\r\n\r\nexport abstract class ViewBase<T> {\r\n    model: T;\r\n    abstract render(): JSX.Element;\r\n}\r\n\r\nexport class ViewMainSubs<M, S> extends ViewBase<MainSubs<M, S>> {\r\n    protected main: Render<M>;\r\n    protected sub: Render<S>;\r\n    constructor(main: Render<M>, sub: Render<S>) {\r\n        super();\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    protected subsContainer(subViews: JSX.Element[]): JSX.Element {\r\n        return <div>{subViews}</div>\r\n    }\r\n\r\n    protected renderSubItems(): JSX.Element[] {\r\n        let { subs } = this.model;\r\n        if (!subs) return null;\r\n        let subViews: JSX.Element[] = subs.map((v, index) => {\r\n            return <this.sub key={index} {...v} />;\r\n        });\r\n        return subViews;\r\n    }\r\n\r\n    protected renderSubs = (): JSX.Element => {\r\n        return this.subsContainer(this.renderSubItems());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        let { main } = this.model;\r\n        return <>\r\n            <this.main {...main} />\r\n            <this.renderSubs />\r\n        </>;\r\n    }\r\n}\r\n\r\nexport class ViewListMainSubs<M, S> extends ViewBase<MainSubs<M, S>[]> {\r\n    private row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>;\r\n    private main: Render<M>;\r\n    private sub: Render<S>;\r\n    constructor(\r\n        row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>,\r\n        main: Render<M>,\r\n        sub: Render<S>) {\r\n        super();\r\n        this.row = row;\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    render(): JSX.Element {\r\n        return <>\r\n            {this.model.map((v, index) => {\r\n                let view = new this.row(this.main, this.sub);\r\n                view.model = v;\r\n                return <React.Fragment key={index}>{view.render()}</React.Fragment>;\r\n            })}\r\n        </>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { MainProduct, SubPack } from './model';\r\n\r\nexport type Render<T> = (model: T) => JSX.Element;\r\n\r\nexport function renderMainProduct(model: MainProduct): JSX.Element {\r\n    return <div>\r\n        {model.description}\r\n    </div>\r\n}\r\n\r\nexport function renderSubPack(model: SubPack): JSX.Element {\r\n    let { pack, vipPrice, price, quantity, amount } = model;\r\n    return <div>\r\n        {pack.unit}, {vipPrice}, {price}, {quantity}, {amount}\r\n    </div>\r\n}\r\n","export * from './mainSubs';\r\nexport * from './model';\r\nexport * from './render';\r\n","module.exports = __webpack_public_path__ + \"static/media/pig.772a31a6.png\";","import * as React from 'react';\r\nimport { VPage, TabCaptionComponent, Page, Tabs } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\n\r\nexport const store = {\r\n    //homeCount: observable.box<number>(-1),\r\n    //cartCount: observable.box<number>(101),\r\n};\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\n\r\nexport class VHome extends VPage<CCartApp> {\r\n    async open(param?: any) {\r\n        this.openPage(this.render);\r\n    }\r\n    render = (param?: any): JSX.Element => {\r\n        let { cHome, cMember, cCart, cMe, cartViewModel } = this.controller;\r\n        let faceTabs = [\r\n            { name: 'home', label: '首页', icon: 'home', content: cHome.tab, notify: undefined/*store.homeCount*/ },\r\n            // { name: 'member', label: '会员', icon: 'vcard', content: cMember.tab },\r\n            { name: 'cart', label: '购物车', icon: 'shopping-cart', content: cCart.tab, notify: cartViewModel.count },\r\n            { name: 'me', label: '我的', icon: 'user', content: cMe.tab }\r\n        ].map(v => {\r\n            let { name, label, icon, content, notify } = v;\r\n            return {\r\n                name: name,\r\n                caption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n                content: content,\r\n                notify: notify,\r\n            }\r\n        });\r\n        return <Page header={false}>\r\n            <Tabs tabs={faceTabs} />\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from 'tonva';\r\nimport { CCart } from './CCart';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VCartLabel extends View<CCart> {\r\n\r\n    private showCart = async () => {\r\n        // let { cApp } = this.controller;\r\n        // cApp.showMain('cart');\r\n        this.controller.start();\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    };\r\n\r\n    private content = observer(() => {\r\n        let { cartViewModel: cart } = this.controller.cApp;\r\n        let count: any = cart.count.get();\r\n        let badge, onClick, pointer;\r\n        if (count > 0) {\r\n            onClick = this.showCart;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={onClick}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { UpdownWidget } from 'tonva';\r\n\r\nconst keys = [107, 109, 110, 187, 189];\r\n\r\nexport class MinusPlusWidget extends UpdownWidget {\r\n    @observable protected value: any;\r\n    @observable protected disabled: boolean;\r\n    @observable protected hasFocus: boolean;\r\n\r\n    protected isValidKey(key: number): boolean {\r\n        if (keys.find(v => v === key) !== undefined) return false;\r\n        return super.isValidKey(key);\r\n    }\r\n\r\n    protected onBlur(evt: React.FocusEvent<any>) {\r\n        super.onBlur(evt);\r\n        this.hasFocus = false;\r\n    }\r\n\r\n    protected onFocus(evt: React.FocusEvent<any>) {\r\n        super.onFocus(evt);\r\n        this.hasFocus = true;\r\n    }\r\n\r\n    protected onChange(evt: React.ChangeEvent<any>) {\r\n    }\r\n\r\n    private minusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v - 1);\r\n    }\r\n    private plusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v + 1);\r\n    }\r\n\r\n    private ref = (input: HTMLInputElement) => {\r\n        this.input = input;\r\n        if (this.input === null) return;\r\n        let p: HTMLElement;\r\n        for (p = this.input; ; p = p.parentElement) {\r\n            if (!p) break;\r\n            if (p.tagName !== 'FIELDSET') continue;\r\n            if (p['disabled'] === true) {\r\n                this.disabled = true;\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    private renderContent = observer((): JSX.Element => {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn = {\r\n            //'form-control': true,\r\n        };\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        let hasFocus = this.hasFocus; // document.hasFocus() && document.activeElement === this.input;\r\n        let hasAction = this.readOnly !== true && this.disabled !== true;\r\n        let hasValue = this.value !== NaN && this.value !== undefined && this.value > 0;\r\n        let cursorPointer: string,\r\n            minusColor: string, minusClick: any,\r\n            plusColor: string, plusClick: any;\r\n        if (this.disabled === true) {\r\n            cursorPointer = 'cursor-pointer';\r\n            minusColor = plusColor = 'text-light';\r\n        }\r\n        else {\r\n            minusClick = this.minusClick;\r\n            plusClick = this.plusClick;\r\n            minusColor = 'text-danger-2'; //'text-black-50';\r\n            plusColor = 'text-danger';\r\n        }\r\n        let minus = <i className={classNames('fa',\r\n            'fa-minus-circle', 'fa-lg', minusColor, cursorPointer,\r\n            { invisible: !(hasFocus === true || hasAction === true && hasValue === true) })}\r\n            onClick={minusClick} />;\r\n        let input = <input ref={this.ref}\r\n            className={classNames(this.className, cn, 'mx-1 w-4c form-control',\r\n                { invisible: !(hasFocus === true || hasValue === true) })}\r\n            type=\"text\"\r\n            defaultValue={this.value}\r\n            onChange={this.onChange}\r\n            placeholder={this.placeholder}\r\n            readOnly={this.readOnly}\r\n            disabled={this.disabled}\r\n            onKeyDown={this.onKeyDown}\r\n            onFocus={(evt: React.FocusEvent<any>) => this.onFocus(evt)}\r\n            onBlur={(evt: React.FocusEvent<any>) => this.onBlur(evt)}\r\n            maxLength={10} />;\r\n\r\n        let plus = <i className={classNames('fa fa-plus-circle fa-lg',\r\n            plusColor, cursorPointer,\r\n            { invisible: !(hasAction === true) })}\r\n            onClick={plusClick} />;\r\n        return <div className=\"d-flex align-items-center\">{minus}{input}{plus}\r\n            {this.renderErrors()}\r\n        </div>;\r\n    });\r\n\r\n    render() {\r\n        return <this.renderContent />;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Image } from 'tonva';\r\n\r\nconst imagePath = \"http://www.jkchemical.com/static/Structure/\";\r\nconst altimagePath = \"http://www.jkchemical.com/static/Structure/999.png\";\r\n\r\ninterface ProductImageProps {\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    chemicalId: string;\r\n}\r\n\r\nexport function ProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    return <Image src={chemicalId && (imagePath + chemicalId.substr(0, 3) + '/' + chemicalId + '.png')}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}\r\n","import * as React from 'react';\r\nimport { CProduct, renderBrand } from './CProduct';\r\nimport {\r\n    VPage, Page, Form, ItemSchema, NumSchema, UiSchema, Field,\r\n    ObjectSchema, RowContext, UiCustom, FormField\r\n} from 'tonva';\r\nimport { LMR } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { MinusPlusWidget } from '../tools/minusPlusWidget';\r\nimport { ProductPackRow } from './Product';\r\nimport { ViewMainSubs, MainProductChemical } from 'mainSubs';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n];\r\n\r\nexport class VProduct extends VPage<CProduct> {\r\n    private product: MainProductChemical;\r\n\r\n    async open(product: any) {\r\n        this.product = product.main;\r\n        this.openPage(this.page, product);\r\n    }\r\n\r\n    private renderProduct = (product: MainProductChemical) => {\r\n\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"mb-3 px-2\">\r\n            <div className=\"py-2\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n            <div className=\"row mt-3\">\r\n                <div className=\"col-sm-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-sm-9\">\r\n                    <div className=\"row\">\r\n                        {this.item('CAS', CAS)}\r\n                        {this.item('纯度', purity)}\r\n                        {this.item('分子式', molecularFomula)}\r\n                        {this.item('分子量', molecularWeight)}\r\n                        {this.item('产品编号', origin)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private item = (caption: string, value: any) => {\r\n        if (value === null || value === undefined) return null;\r\n        return <>\r\n            <div className=\"col-4 col-sm-2 text-muted pr-0 small\">{caption}</div>\r\n            <div className=\"col-8 col-sm-4\">{value}</div>\r\n        </>;\r\n    }\r\n\r\n    private arrTemplet = (item: any) => {\r\n        let { pack, retail, vipPrice, promotionPrice, inventoryAllocation, futureDeliveryTimeDescription } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\"><FormField name=\"quantity\" /></div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        let deliveryTimeUI = <></>;\r\n        if (inventoryAllocation && inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                return <div key={index} className=\"text-success\">\r\n                    {tv(warehouse, (values: any) => <>{values.name}</>)}: {quantity}\r\n                    {deliveryTimeDescription}\r\n                </div>\r\n            });\r\n        } else {\r\n            deliveryTimeUI = <div>{futureDeliveryTimeDescription && '期货: ' + futureDeliveryTimeDescription}</div>\r\n        }\r\n        /*\r\n        return <LMR className=\"mx-3\" right={right}>\r\n            <div className=\"d-flex flex-column justify-content-between h-100\">\r\n                <div><b>{tv(pack)}</b></div>\r\n                <div>{deliveryTimeUI}</div>\r\n            </div>\r\n        </LMR>;\r\n        */\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div><b>{tv(pack)}</b></div>\r\n                    <div>{deliveryTimeUI}</div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp } = this.controller;\r\n        let { cartService, cartViewModel } = cApp;\r\n        if (value > 0) {\r\n            await cartService.addToCart(cartViewModel, this.product.id, pack.id, value, price, currency);\r\n        } else {\r\n            await cartService.removeFromCart(cartViewModel, [{ productId: this.product.id, packId: pack.id }]);\r\n        }\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n        items: {\r\n            quantity: {\r\n                widget: 'custom',\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget as any,\r\n                onChanged: this.onQuantityChanged\r\n            } as UiCustom\r\n        },\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"my-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n    private page = observer((product: any) => {\r\n\r\n        let { cApp } = this.controller;\r\n        let header = cApp.cHome.renderSearchHeader();\r\n        let cartLabel = cApp.cCart.renderCartLabel();\r\n        /*\r\n            <div className=\"px-2 py-2 bg-white mb-3\">{renderProduct(product.main, 0)}</div>\r\n            <Form schema={schema} uiSchema={this.uiSchema} formData={this.data} />\r\n        */\r\n        let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n        viewProduct.model = product;\r\n        return <Page header={header} right={cartLabel}>\r\n            <div className=\"px-2 py-2 bg-white mb-3\">{viewProduct.render()}</div>\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CProduct, renderProduct } from './CProduct';\r\nimport { List } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\n//import { cCartApp } from 'ui/CCartApp';\r\n\r\nexport class VProductList extends VPage<CProduct> {\r\n\r\n    async open(param: any) {\r\n\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onProductClick = async (product: any) => {\r\n        this.controller.showProductDetail(product.productid);\r\n    }\r\n\r\n    private onScrollBottom = async () => {\r\n\r\n        await this.controller.pageProducts.more();\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { pageProducts, cApp } = this.controller;\r\n        let header = cApp.cHome.renderSearchHeader();\r\n        let cart = cApp.cCart.renderCartLabel();\r\n        let none = <div className=\"my-3 mx-2 text-warning\">抱歉，未找到相关产品，请重新搜索！</div>\r\n        return <Page header={header} right={cart} onScrollBottom={this.onScrollBottom}>\r\n            <List before={''} none={none} items={pageProducts} item={{ render: renderProduct, onClick: this.onProductClick }} />\r\n        </Page>\r\n    });\r\n}","import { Entity } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\n\r\nexport abstract class Loader<T> {\r\n    protected cApp: CCartApp;\r\n    private entities: Entity[] = [];\r\n    private schemaLoaded: boolean = false;\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n        this.initEntities();\r\n    }\r\n\r\n    protected abstract initEntities(): void;\r\n\r\n    protected async loadSchemas() {\r\n        if (this.schemaLoaded === true) return;\r\n        await Promise.all(this.entities);\r\n        this.schemaLoaded = true;\r\n    }\r\n\r\n    async load(param: any): Promise<T> {\r\n        await this.loadSchemas();\r\n        let data = this.initData();\r\n        await this.loadToData(param, data);\r\n        return data;\r\n    }\r\n    protected abstract async loadToData(param: any, data: T): Promise<void>;\r\n    protected abstract initData(): T;\r\n}\r\n","import _ from 'lodash';\r\nimport { TuidMain, TuidDiv, Map, Query } from 'tonva';\r\nimport { ProductPackRow } from './Product';\r\nimport { Loader } from 'mainSubs/loader';\r\nimport { MainSubs, MainProductChemical, MainBrand } from 'mainSubs';\r\n\r\nexport class LoaderBrand extends Loader<MainBrand> {\r\n    private brandTuid: TuidMain;\r\n\r\n    protected initEntities() {\r\n        let { cUqProduct } = this.cApp;\r\n        this.brandTuid = cUqProduct.tuid('brand');\r\n    }\r\n\r\n    protected async loadToData(brandId: number, data: MainBrand): Promise<void> {\r\n        let brand = await this.brandTuid.load(brandId);\r\n        data.id = brand.id;\r\n        data.name = brand.name;\r\n    }\r\n\r\n    protected initData(): MainBrand {\r\n        return {} as MainBrand;\r\n    }\r\n}\r\n\r\nexport class LoaderProductChemical extends Loader<MainProductChemical> {\r\n    private productTuid: TuidMain;\r\n    private packTuid: TuidDiv;\r\n    private productChemicalMap: Map;\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct } = this.cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n        this.packTuid = this.productTuid.divs['packx'];\r\n        this.productChemicalMap = cUqProduct.map('productChemical');\r\n    }\r\n\r\n    protected async loadToData(productId: number, data: MainProductChemical): Promise<void> {\r\n\r\n        let product = await this.productTuid.load(productId);\r\n        _.merge(data, product);\r\n\r\n        let brandLoader = new LoaderBrand(this.cApp);\r\n        data.brand = await brandLoader.load(data.brand.id);\r\n\r\n        let productChemical = await this.productChemicalMap.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n\r\n        data.packs = [];\r\n        product.packx.forEach(e => {\r\n            // let { id, radiox, radioy, unit } = e;\r\n            data.packs.push(e);\r\n        });\r\n    }\r\n\r\n    protected initData(): MainProductChemical {\r\n        return {} as MainProductChemical;\r\n    }\r\n}\r\n\r\nexport class LoaderProductChemicalWithPrices extends Loader<MainSubs<MainProductChemical, ProductPackRow>> {\r\n\r\n    private getCustomerDiscount: Query;\r\n    private priceMap: Map;\r\n    private getInventoryAllocationQuery: Query;\r\n    private getFutureDeliveryTime: Query;\r\n    private getPromotionPackQuery: Query;\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct, cUqCustomerDiscount, cUqWarehouse, cUqPromotion } = this.cApp;\r\n        this.getCustomerDiscount = cUqCustomerDiscount.query(\"getdiscount\");\r\n        this.priceMap = cUqProduct.map('pricex');\r\n        this.getInventoryAllocationQuery = cUqWarehouse.query(\"getInventoryAllocation\");\r\n        this.getFutureDeliveryTime = cUqProduct.query(\"getFutureDeliveryTime\");\r\n        this.getPromotionPackQuery = cUqPromotion.query(\"getPromotionPack\");\r\n    }\r\n\r\n    protected initData(): MainSubs<MainProductChemical, ProductPackRow> {\r\n        return { main: {} as MainProductChemical, subs: [] as ProductPackRow[] };\r\n    }\r\n\r\n    protected async loadToData(productId: any, data: MainSubs<MainProductChemical, ProductPackRow>): Promise<void> {\r\n\r\n        let productLoader = new LoaderProductChemical(this.cApp);\r\n        data.main = await productLoader.load(productId);\r\n\r\n        let discount = 0;\r\n        let { currentUser, currentSalesRegion, cartViewModel, currentLanguage } = this.cApp;\r\n        if (currentUser.hasCustomer) {\r\n            let discountSetting = await this.getCustomerDiscount.obj({ brand: data.main.brand.id, customer: currentUser.currentCustomer });\r\n            discount = discountSetting && discountSetting.discount;\r\n        }\r\n\r\n        let { id: currentSalesRegionId } = currentSalesRegion;\r\n        let prices = await this.priceMap.table({ product: productId, salesRegion: currentSalesRegionId });\r\n        data.subs = prices.filter(e => e.discountinued === 0 && e.expireDate > Date.now()).map(element => {\r\n            let ret: any = {};\r\n            ret.pack = element.pack;\r\n            ret.retail = element.retail;\r\n            if (discount !== 0)\r\n                ret.vipPrice = Math.round(element.retail * (1 - discount));\r\n            ret.currency = currentSalesRegion.currency;\r\n            ret.quantity = cartViewModel.getQuantity(productId, element.pack.id)\r\n            return ret;\r\n        });\r\n\r\n        let promises: PromiseLike<any>[] = [];\r\n        data.subs.forEach(v => {\r\n            promises.push(this.getInventoryAllocationQuery.table({ product: productId, pack: v.pack, salesRegion: currentSalesRegion }));\r\n            promises.push(this.getPromotionPackQuery.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n\r\n        let fd = await this.getFutureDeliveryTimeDescription(productId, currentSalesRegionId);\r\n        for (let i = 0; i < data.subs.length; i++) {\r\n            data.subs[i].futureDeliveryTimeDescription = fd;\r\n            data.subs[i].inventoryAllocation = results[i * 2];\r\n            let promotion = results[i * 2 + 1];\r\n            let discount = promotion && promotion.discount;\r\n            if (discount)\r\n                data.subs[i].promotionPrice = Math.round((1 - discount) * data.subs[i].retail);\r\n        }\r\n    }\r\n\r\n    private getFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n        let futureDeliveryTime = await this.getFutureDeliveryTime.table({ product: productId, salesRegion: salesRegionId });\r\n        if (futureDeliveryTime.length > 0) {\r\n            let { minValue, maxValue, unit, deliveryTimeDescription } = futureDeliveryTime[0];\r\n            return minValue + (maxValue > minValue ? '~' + maxValue : '') + ' ' + unit;\r\n            // return futureDeliveryTime[0].deliveryTimeDescription;\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n// 拟用 LoaderProduct 替换\r\nexport class ProductService {\r\n\r\n    private cApp: CCartApp;\r\n    private productTuid: TuidMain;\r\n    private productChemicalMap: Map;\r\n\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n        this.initEntities();\r\n    }\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct, cUqCustomerDiscount, cUqWarehouse } = this.cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n        this.productChemicalMap = cUqProduct.map('productChemical');\r\n    }\r\n\r\n    async loadProductChemical(productId: number): Promise<MainProductChemical> {\r\n\r\n        let result: MainProductChemical;\r\n        let product = await this.productTuid.load(productId);\r\n        result = {...product };\r\n\r\n        let productChemical = await this.productChemicalMap.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            result.chemical = chemical;\r\n            result.purity = purity;\r\n            result.CAS = CAS;\r\n            result.molecularFomula = molecularFomula;\r\n            result.molecularWeight = molecularWeight;\r\n        }\r\n        return result;\r\n    }\r\n}\r\n*/","import * as React from 'react';\r\nimport * as _ from 'lodash';\r\nimport { Query, tv } from 'tonva';\r\nimport { PageItems, Controller, nav, Page, Image } from 'tonva';\r\nimport { CCartApp } from '../CCartApp';\r\nimport { VProduct } from './VProduct';\r\nimport { VProductList } from './VProductList';\r\nimport { LoaderProductChemicalWithPrices } from './itemLoader';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nclass PageProducts extends PageItems<any> {\r\n\r\n    private searchProductQuery: Query;\r\n\r\n    constructor(searchProductQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchProductQuery = searchProductQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchProductQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.id;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport class CProduct extends Controller {\r\n    cApp: CCartApp;\r\n\r\n    pageProducts: PageProducts;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        this.searchByKey(param);\r\n    }\r\n\r\n    searchByKey(key: string) {\r\n        let { cUqProduct, currentSalesRegion } = this.cApp;\r\n        let searchProductQuery = cUqProduct.query(\"searchProduct\");\r\n        this.pageProducts = new PageProducts(searchProductQuery);\r\n        this.pageProducts.first({ key: key, salesRegion: currentSalesRegion.id });\r\n        this.openVPage(VProductList);\r\n    }\r\n\r\n    searchByCategory(category: any) {\r\n        let { cUqProduct, currentSalesRegion } = this.cApp;\r\n        let searchProductQuery = cUqProduct.query(\"searchProductByCategory\");\r\n        this.pageProducts = new PageProducts(searchProductQuery);\r\n        this.pageProducts.first({ productCategory: category.id, salesRegion: currentSalesRegion.id });\r\n        this.openVPage(VProductList);\r\n    }\r\n\r\n    showProductDetail = async (id: number) => {\r\n\r\n        let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n        let product = await loader.load(id);\r\n        /*\r\n        let product = new Product(this.cApp);\r\n        await product.load(id);\r\n        */\r\n        this.openVPage(VProduct, product);\r\n    }\r\n}\r\n\r\nexport function renderBrand(brand: any) {\r\n    return productPropItem('品牌', brand.name);\r\n}\r\n\r\nexport function productPropItem(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 col-sm-2 col-lg-4 text-muted pr-0 small\">{caption}</div>\r\n        <div className=\"col-8 col-sm-4 col-lg-8\">{value}</div>\r\n    </>;\r\n}\r\n\r\nexport function renderProduct(product: any, index: number) {\r\n    let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"d-block mb-4 px-2\">\r\n        <div className=\"py-2\">\r\n            <div><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n        </div>\r\n        <div className=\"row\">\r\n            <div className=\"col-3\">\r\n                <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n            </div>\r\n            <div className=\"col-9\">\r\n                <div className=\"row\">\r\n                    {productPropItem('CAS', CAS)}\r\n                    {productPropItem('纯度', purity)}\r\n                    {productPropItem('分子式', molecularFomula)}\r\n                    {productPropItem('分子量', molecularWeight)}\r\n                    {productPropItem('产品编号', origin)}\r\n                    {tv(brand, renderBrand)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Form, ObjectSchema, NumSchema, ArrSchema, UiSchema, UiArr, FormField } from 'tonva';\r\nimport { CCart } from './CCart';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv, BoxId } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { MinusPlusWidget } from '../tools';\r\nimport { renderBrand } from '../product/CProduct';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nconst cartSchema = [\r\n    {\r\n        name: 'list',\r\n        type: 'arr',\r\n        arr: [\r\n            { name: 'checked', type: 'boolean' },\r\n            { name: 'product', type: 'object' } as ObjectSchema,\r\n            {\r\n                name: 'packs', type: 'arr', arr: [\r\n                    { name: 'pack', type: 'object' } as ObjectSchema,\r\n                    { name: 'price', type: 'number' } as NumSchema,\r\n                    { name: 'quantity', type: 'number' } as NumSchema,\r\n                    { name: 'currency', type: 'object' } as ObjectSchema,\r\n                    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n                    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n                ]\r\n            }\r\n        ],\r\n    } as ArrSchema\r\n];\r\n\r\nexport class VCart extends VPage<CCart> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    protected CheckOutButton = observer(() => {\r\n        let { checkOut, cApp } = this.controller;\r\n        let { cartViewModel } = cApp;\r\n        let amount = cartViewModel.amount.get();\r\n        let check = \"去结算\";\r\n        let content = amount > 0 ?\r\n            <>{check} (¥{amount})</> :\r\n            <>{check}</>;\r\n        return <button className=\"btn btn-success w-100\" type=\"button\" onClick={checkOut} disabled={amount <= 0}>\r\n            {content}\r\n        </button>;\r\n    });\r\n\r\n    render(params: any): JSX.Element {\r\n        return <this.tab />;\r\n    }\r\n\r\n    private renderCartItem = (item: any) => {\r\n        let { product } = item;\r\n        return <div className=\"pr-1\">\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\" onClick={() => this.controller.onProductClick(product.id)}>\r\n                    {renderCartProduct(product, 0)}\r\n                </div>\r\n                <div className=\"col-lg-6\"><FormField name=\"packs\" /></div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private packsRow = (item: any) => {\r\n        let { pack, price, currency, inventoryAllocation, futureDeliveryTimeDescription } = item;\r\n        let deliveryTimeUI = <></>;\r\n        if (inventoryAllocation && inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = <div className=\"text-success\">国内现货</div>\r\n        } else {\r\n            deliveryTimeUI = <div>期货:{futureDeliveryTimeDescription}</div>\r\n        }\r\n        return <div className=\"px-2\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-6c mr-4 text-right\"><span className=\"text-danger h5\">¥{price}</span></div>\r\n                <FormField name=\"quantity\" />\r\n            </div>\r\n            <div>{deliveryTimeUI}</div>\r\n        </div>;\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        selectable: true,\r\n        deletable: true,\r\n        restorable: true,\r\n        items: {\r\n            list: {\r\n                widget: 'arr',\r\n                Templet: this.renderCartItem,\r\n                ArrContainer: (label: any, content: JSX.Element) => content,\r\n                RowContainer: (content: JSX.Element) => <div className=\"py-3\">{content}</div>,\r\n                //onStateChanged: this.controller.onRowStateChanged,\r\n                items: {\r\n                    packs: {\r\n                        widget: 'arr',\r\n                        Templet: this.packsRow,\r\n                        selectable: false,\r\n                        deletable: false,\r\n                        ArrContainer: (label: any, content: JSX.Element) => content,\r\n                        RowContainer: (content: JSX.Element) => content,\r\n                        RowSeperator: <div className=\"border border-gray border-top my-3\" />,\r\n                        items: {\r\n                            quantity: {\r\n                                widget: 'custom',\r\n                                className: 'text-center',\r\n                                WidgetClass: MinusPlusWidget,\r\n                                onChanged: this.controller.onQuantityChanged\r\n                            }\r\n                        },\r\n                    } as UiArr\r\n                }\r\n            } as UiArr\r\n        }\r\n    }\r\n\r\n    protected cartForm = observer(() => {\r\n        let { cartViewModel } = this.controller.cApp;\r\n        // let cartData = cart.data;\r\n        let { data: cartData } = cartViewModel;\r\n        return <Form className=\"bg-white flex-fill overflow-auto\" schema={cartSchema} uiSchema={this.uiSchema} formData={cartData} />\r\n    });\r\n\r\n    private empty() {\r\n        return <div className=\"py-5 text-center bg-white\">你的购物车空空如也</div>\r\n    }\r\n\r\n    private test = () => {\r\n        let { cartViewModel } = this.controller.cApp;\r\n        // let row = cart.items[0];\r\n        let row = cartViewModel.cartItems[0];\r\n        row.packs[0].quantity = row.packs[0].quantity + 1;\r\n    }\r\n\r\n    private testButton = () => <button onClick={() => this.test()}>test</button>;\r\n\r\n    private page = observer((params: any): JSX.Element => {\r\n        let { cartViewModel: cart } = this.controller.cApp;\r\n        let footer: any, content: any;\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            content = this.empty();\r\n            footer = undefined;\r\n        }\r\n        else {\r\n            content = <this.cartForm />;\r\n            footer = <this.CheckOutButton />;\r\n        }\r\n        return <Page header=\"购物车\" footer={footer}>\r\n            {content}\r\n        </Page>;\r\n    })\r\n\r\n    private tab = observer(() => {\r\n        let { cartViewModel: cart } = this.controller.cApp;\r\n        let header = <header className=\"py-2 text-center bg-info text-white\">\r\n            <FA className=\"align-middle\" name=\"shopping-cart\" size=\"2x\" /> &nbsp; <span className=\"h5 align-middle\">购物车</span>\r\n        </header>;\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            return <>\r\n                {header}\r\n                {this.empty()}\r\n            </>;\r\n        }\r\n        return <div className=\"bg-white d-flex flex-column h-100\">\r\n            {header}\r\n            <this.cartForm />\r\n            <footer className=\"p-3\"><this.CheckOutButton /></footer>\r\n        </div>\r\n    });\r\n}\r\n\r\nfunction productPropItem(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 col-sm-2 col-lg-4 text-muted pr-0 small\">{caption}</div>\r\n        <div className=\"col-8 col-sm-4 col-lg-8\">{value}</div>\r\n    </>;\r\n}\r\n\r\nexport function renderCartProduct(product: any, index: number) {\r\n    let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"row d-flex mb-3 px-2\">\r\n        <div className=\"col-12\">\r\n            <div className=\"py-2\">\r\n                <strong>{description}</strong>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-4c h-4c\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {productPropItem('CAS', CAS)}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('编号', origin)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { VCartLabel } from './VCartLabel';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VCart } from './VCart';\r\nimport { Controller, RowContext, nav, User } from 'tonva';\r\nimport { CartPackRow, CartItem } from './Cart';\r\n\r\nexport class CCart extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    private selectedCartItems: CartItem[];\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        this.openVPage(VCart);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * 显示购物车图标\r\n     */\r\n    renderCartLabel() {\r\n        return this.renderView(VCartLabel);\r\n    }\r\n\r\n    renderCart = () => {\r\n        return this.renderView(VCart);\r\n    }\r\n\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data, parentData } = context;\r\n        let { product } = parentData;\r\n        let { pack, price, currency } = data as CartPackRow;\r\n        // await this.cart.AddToCart(product.id, pack.id, value, price, currency);\r\n        let { cartViewModel, cartService } = this.cApp;\r\n        if (value > 0) {\r\n            await cartService.addToCart(cartViewModel, product.id, pack.id, value, price, currency);\r\n        } else {\r\n            await cartService.removeFromCart(cartViewModel, [{ productId: product.id, packId: pack.id }]);\r\n        }\r\n    }\r\n\r\n    onRowStateChanged = async (context: RowContext, selected: boolean, deleted: boolean) => {\r\n        alert('onRowStateChanged')\r\n    }\r\n\r\n    private loginCallback = async (user: User): Promise<void> => {\r\n        let { cApp } = this;\r\n        await cApp.currentUser.setUser(user);\r\n        await cApp.loginCallBack(user);\r\n        this.closePage(1);\r\n        await this.doCheckOut();\r\n    };\r\n\r\n    onProductClick(productId: number) {\r\n        let { cartViewModel, cProduct } = this.cApp;\r\n        if (!cartViewModel.isDeleted(productId)) {\r\n            cProduct.showProductDetail(productId);\r\n        }\r\n    }\r\n\r\n    checkOut = async () => {\r\n        let { cartViewModel } = this.cApp;\r\n        this.selectedCartItems = cartViewModel.getSelectedItem();\r\n        if (this.selectedCartItems === undefined) return;\r\n        if (!this.isLogined) {\r\n            nav.showLogin(this.loginCallback, true);\r\n        } else {\r\n            this.doCheckOut();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 导航到CheckOut界面\r\n     */\r\n    private doCheckOut = async () => {\r\n\r\n        let { cOrder } = this.cApp;\r\n        if (this.selectedCartItems === undefined) return;\r\n        await cOrder.start(this.selectedCartItems);\r\n    }\r\n\r\n    tab = () => <this.renderCart />\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv, BoxId } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { OrderItem } from './Order';\r\nimport { renderCartProduct } from 'cart/VCart';\r\nimport { observable } from 'mobx';\r\n\r\nconst blankTime = 2000;\r\n\r\nexport class VCreateOrder extends VPage<COrder> {\r\n    @observable private useShippingAddress: boolean = true;\r\n    @observable private shippingAddressIsBlank: boolean = false;\r\n    @observable private invoiceAddressIsBlank: boolean = false;\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private nullContact = () => {\r\n        return <span className=\"text-primary\">选择收货地址</span>;\r\n    }\r\n\r\n    //private renderProduct = (product: any) => <strong>{product.description}</strong>\r\n\r\n    private packsRow = (item: any, index: number) => {\r\n        let { pack, quantity, price, currency, inventoryAllocation, futureDeliveryTimeDescription } = item;\r\n        let deliveryTimeUI = inventoryAllocation && inventoryAllocation.length > 0 ?\r\n            <div className=\"text-success\">国内现货</div>\r\n            : <div>期货:{futureDeliveryTimeDescription}</div>;\r\n\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{price * quantity}</span>\r\n                    <small className=\"text-muted\">(¥{price} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n            <div>{deliveryTimeUI}</div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: OrderItem) => {\r\n        let { product, packs } = orderItem;\r\n        return <div>\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\">{renderCartProduct(product, 0)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return this.packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private orderItemKey = (orderItem: OrderItem) => {\r\n        return orderItem.product.id;\r\n    }\r\n\r\n    private onSubmit = async () => {\r\n        let { orderData } = this.controller;\r\n        let { shippingContact, invoiceContact } = orderData;\r\n        if (!shippingContact) {\r\n            this.shippingAddressIsBlank = true;\r\n            setTimeout(() => this.shippingAddressIsBlank = false, blankTime);\r\n            return;\r\n        }\r\n        if (!invoiceContact) {\r\n            if (this.useShippingAddress) {\r\n                //this.setContact(shippingContact, ContactType.InvoiceContact);\r\n                orderData.invoiceContact = shippingContact; //contactBox;\r\n                this.invoiceAddressIsBlank = false;\r\n            } else {\r\n                this.invoiceAddressIsBlank = true;\r\n                setTimeout(() => this.invoiceAddressIsBlank = false, blankTime);\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.controller.submitOrder();\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { orderData, onSelectShippingContact, onSelectInvoiceContact, openMeInfo, currentUser, onInvoiceInfoEdit } = this.controller;\r\n        let fillMeInfo = <div onClick={openMeInfo} className=\"alert alert-warning text-primary py-1\" role=\"alert\">\r\n            点击完善您的个人信息\r\n        </div>\r\n        if (currentUser.allowOrdering)\r\n            fillMeInfo = null;\r\n        let footer = <div className=\"d-block\">\r\n            {fillMeInfo}\r\n            <div className=\"w-100 px-3\">\r\n                <div className=\"d-flex justify-content-left flex-grow-1\">\r\n                    <span className=\"text-danger\" style={{ fontSize: '1.8rem' }}><small>¥</small>{orderData.amount}</span>\r\n                </div>\r\n                <button type=\"button\"\r\n                    className=\"btn btn-danger w-30\"\r\n                    onClick={this.onSubmit} disabled={!currentUser.allowOrdering}>提交订单\r\n                </button>\r\n            </div>\r\n        </div>;\r\n        let chevronRight = <FA name=\"chevron-right\" className=\"cursor-pointer\" />\r\n\r\n        let shippingAddressBlankTip = this.shippingAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>\r\n            : null;\r\n        let invoiceAddressBlankTip = this.invoiceAddressIsBlank ? <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票地址</div> : null;\r\n        let divInvoice: any = null;\r\n        if (this.useShippingAddress === false) {\r\n            if (orderData.invoiceContact !== undefined) {\r\n                divInvoice = <div className=\"col-12 col-sm-10 offset-sm-2 d-flex\">\r\n                    {tv(orderData.invoiceContact, undefined, undefined, this.nullContact)}\r\n                    <div>{chevronRight}</div>\r\n                </div>\r\n            } else {\r\n                divInvoice = <div className=\"col-8 offset-4 offset-sm-2\">\r\n                    <button className=\"btn btn-outline-primary\"\r\n                        onClick={onSelectInvoiceContact}>选择发票地址</button>\r\n                    {invoiceAddressBlankTip}\r\n                </div>\r\n            }\r\n        }\r\n\r\n        let invoiceContactUI = <div className=\"row py-3 bg-white mb-1\">\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票地址:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <div>\r\n                    <label className=\"cursor-pointer\">\r\n                        <input type=\"checkbox\"\r\n                            defaultChecked={this.useShippingAddress}\r\n                            onChange={e => {\r\n                                this.useShippingAddress = e.currentTarget.checked;\r\n                                orderData.invoiceContact = undefined;\r\n                                this.invoiceAddressIsBlank = false;\r\n                            }} /> 同收货地址\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            {divInvoice}\r\n        </div>\r\n\r\n        let invoiceInfoUI = <div className=\"row py-3 bg-white mb-1\" onClick={() => onInvoiceInfoEdit()}>\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票信息:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                    {tv(orderData.invoiceType, (v) => <>{v.description}</>, undefined, () => <span className=\"text-primary\">填写发票内容</span>)}\r\n                    {tv(orderData.invoiceInfo, (v) => <> -- {v.title}</>, undefined, () => <></>)}\r\n                </LMR>\r\n            </div>\r\n        </div>\r\n\r\n        return <Page header=\"订单预览\" footer={footer}>\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 bg-white mb-1\" onClick={onSelectShippingContact}>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">收货地址:</div>\r\n                    <div className=\"col-8 col-sm-10\">\r\n                        <LMR className=\"w-100 align-items-center\" right={chevronRight}>{tv(orderData.shippingContact, undefined, undefined, this.nullContact)}</LMR>\r\n                        {shippingAddressBlankTip}\r\n                    </div>\r\n                </div>\r\n                {invoiceContactUI}\r\n                {invoiceInfoUI}\r\n            </div>\r\n            <List items={orderData.orderItems} item={{ render: this.renderOrderItem, key: this.orderItemKey as any }} />\r\n        </Page>\r\n    })\r\n}","import { BoxId } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\nimport { CartPackRow } from 'cart/Cart';\r\n\r\nexport class Order {\r\n\r\n    webUser: any;\r\n    organization: BoxId;\r\n    customer: any;\r\n\r\n    @observable shippingContact: BoxId;\r\n    @observable invoiceContact: BoxId;\r\n    @observable invoiceType: BoxId;\r\n    @observable invoiceInfo: BoxId;\r\n    @observable orderItems: OrderItem[] = [];\r\n\r\n    @computed get amount() {\r\n        return this.orderItems.reduce((pv, cv) => pv + cv.subAmount, 0);\r\n    };\r\n    currency: BoxId;\r\n\r\n    getDataForSave() {\r\n        let orderItems: any[] = [];\r\n        this.orderItems.forEach(oi => {\r\n            oi.packs.forEach(pk => {\r\n                this.currency = pk.currency;\r\n                orderItems.push({\r\n                    product: oi.product, pack: pk.pack, price: pk.price, quantity: pk.quantity\r\n                    , subAmount: pk.quantity * pk.price\r\n                })\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            invoiceContact: this.invoiceContact,\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: this.invoiceInfo,\r\n            amount: this.amount,\r\n            currency: this.currency,\r\n            orderItems: orderItems,\r\n        }\r\n    }\r\n}\r\n\r\nexport class OrderItem {\r\n\r\n    product: BoxId;\r\n    @observable packs: CartPackRow[];\r\n    @computed get subAmount() {\r\n        return this.packs.reduce((p, c) => {\r\n            return p + c.price * c.quantity\r\n        }, 0);\r\n    }\r\n    /*\r\n    pack: BoxId;\r\n\r\n    @observable price: number;\r\n    @observable quantity: number;\r\n    @computed get subAmount() {\r\n        return this.price * this.quantity;\r\n    }\r\n    */\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\n\r\nexport class OrderSuccess extends VPage<COrder> {\r\n\r\n    async open(orderCreateResult: any) {\r\n\r\n        this.openPage(this.page, orderCreateResult);\r\n    }\r\n\r\n    private page = (orderCreateResult: any) => {\r\n        return <Page header=\"下单成功\" back=\"close\">\r\n            <div className=\"p-3 bg-white mb-3\">\r\n                <div className=\"mb-3\">下单成功，感谢您对百灵威的厚爱！</div>\r\n                <p className=\"\">\r\n                    订单编号: <span className=\"h5 text-info\">{orderCreateResult.no}</span><br /><br />\r\n                    我们将立刻处理您的订单，请注意查收到货短信。\r\n                </p>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\n\r\nexport class VContactList extends VPage<CSelectContact> {\r\n\r\n    async open() {\r\n\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onContactRender = (userContact: any) => {\r\n        let { contact } = userContact;\r\n        let { onEditContact, onContactSelected } = this.controller;\r\n        let right = <div className=\"p-2 cursor-pointer text-info\" onClick={() => onEditContact(userContact)}>\r\n            <FA name=\"edit\" />\r\n        </div>\r\n        return <LMR right={right} className=\"px-3 py-2\">\r\n            <div onClick={() => onContactSelected(contact)}>\r\n                {tv(contact)}\r\n            </div>\r\n        </LMR>\r\n    }\r\n\r\n\r\n    private page = () => {\r\n\r\n        let { onNewContact, userContacts } = this.controller;\r\n        let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={() => onNewContact()} >添加新地址</button>;\r\n        let contactList = <List items={userContacts} item={{ render: this.onContactRender }} none=\"无地址\" />;\r\n        return <Page footer={footer} header=\"管理地址\">\r\n            {contactList}\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { VPage, Page, Form, Schema, UiSchema, Context, UiInputItem, UiIdItem } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { CSelectContact } from './CSelectContact';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'name', type: 'string', required: true },\r\n    { name: 'organizationName', type: 'string', required: true },\r\n    { name: 'mobile', type: 'string', required: true },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'email', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: true },\r\n    { name: 'addressString', type: 'string', required: true },\r\n    { name: 'isDefault', type: 'boolean', required: false },\r\n    // { name: 'submit', type: 'submit' },\r\n];\r\n\r\nexport class VContact extends VPage<CSelectContact> {\r\n\r\n    //private contactData: any = {};\r\n    private userContactData: any;\r\n    private form: Form;\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            name: { widget: 'text', label: '姓名', placeholder: '姓名' } as UiInputItem,\r\n            organizationName: { widget: 'text', label: '单位名称', placeholder: '单位名称' } as UiInputItem,\r\n            mobile: { widget: 'text', label: '手机号码', placeholder: '手机号码' } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '电话' } as UiInputItem,\r\n            email: {\r\n                widget: 'email', label: 'Email',\r\n                rules: (value: any) => {\r\n                    if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n                        return \"Email格式不正确。\";\r\n                    else\r\n                        return undefined;\r\n                },\r\n                placeholder: 'Email'\r\n            } as UiInputItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区', placeholder: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await this.controller.pickAddress(context, name, value),\r\n                Templet: (item: any) => {\r\n                    let { obj } = item;\r\n                    if (!obj) return <small className=\"text-muted\">请选择地区</small>;\r\n                    let { country, province, city, county } = obj;\r\n                    //, (v) => <>{v.chineseName}</>\r\n                    return <>\r\n                        {tv(country, v => <>{v.chineseName}</>)}\r\n                        {tv(province, (v) => <>{v.chineseName}</>)}\r\n                        {tv(city, (v) => <>{v.chineseName}</>)}\r\n                        {tv(county, (v) => <>{v.chineseName}</>)}\r\n                    </>;\r\n                }\r\n            } as UiIdItem,\r\n            addressString: {\r\n                widget: 'text', label: '详细地址',\r\n                placeholder: '详细地址'\r\n            } as UiInputItem,\r\n            isDefault: { widget: 'checkbox', label: '作为默认地址' },\r\n            submit: { widget: 'button', label: '提交' },\r\n        }\r\n    }\r\n\r\n    async open(userContactData: any) {\r\n        this.userContactData = userContactData;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onSaveContact = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.saveContact(context.form.data);\r\n    }\r\n\r\n    private onDelContact = async () => {\r\n        let { contact } = this.userContactData;\r\n        if (await this.vCall(VConfirmDeleteContact, contact) === true) {\r\n            await this.controller.delContact(contact);\r\n            this.closePage();\r\n        };\r\n    }\r\n\r\n    private page = () => {\r\n        let contactData = _.clone(this.userContactData.contact);\r\n\r\n        let buttonDel: any;\r\n        if (contactData !== undefined) {\r\n            buttonDel = <button className=\"btn btn-sm btn-info\" onClick={this.onDelContact}>删除</button>;\r\n        }\r\n        let { fromOrderCreation } = this.controller;\r\n        let footer = <button type=\"button\"\r\n            className=\"btn btn-primary w-100\"\r\n            onClick={this.onSaveContact}>{fromOrderCreation ? '保存并使用' : '保存'}</button>;\r\n        return <Page header=\"地址信息\" footer={footer} right={buttonDel}>\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    formData={contactData}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nclass VConfirmDeleteContact extends VPage<CSelectContact> {\r\n    async open(contact: any) {\r\n        this.openPage(this.page, contact);\r\n    }\r\n\r\n    private onConfirm = async () => {\r\n        await this.returnCall(true);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = (contact: any) => {\r\n        return <Page header=\"确认\" back=\"close\">\r\n            <div className=\"w-50 mx-auto border border-primary rounded my-3 p-3 bg-white\">\r\n                <div className=\"p-4 text-center position-relative\">\r\n                    <i className=\"fa fa-question-circle position-absolute fa-2x text-warning\" style={{ left: 0, top: 0 }} />\r\n                    <b className=\"\">{contact.name}</b>\r\n                </div>\r\n                <button className=\"btn btn-danger w-50 mx-auto d-block mt-3\" onClick={this.onConfirm}>确认删除</button>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { List, FA } from 'tonva';\r\nimport { CAddress } from './CAddress';\r\n\r\nexport class VAddress extends VPage<CAddress> {\r\n    private provinceId: number;\r\n    private cityId: number;\r\n    private countyId: number;\r\n    private backLevel = 0;\r\n\r\n    async open(param: any) {\r\n        let provinces = await this.controller.getCountryProvince(43);\r\n        this.openPage(this.page, { items: provinces });\r\n    }\r\n\r\n    private page = (provinces: any) => {\r\n        this.backLevel++;\r\n        return <Page header=\"选择所在省市\">\r\n            <div className=\"row no-gutters\">\r\n                {provinces.items.map(v => this.renderPCC(v, this.onProvinceClick))}\r\n            </div>\r\n        </Page>\r\n    }\r\n\r\n    private renderPCC = (pcc: any, onClick: any) => {\r\n        let { id, chineseName } = pcc;\r\n        return <div key={id} className=\"col-6 col-md-4 col-lg-3 cursor-pointer\" >\r\n            <div className=\"pt-1 pb-1 px-2\" onClick={() => onClick(pcc)}\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <span className=\"ml-1 align-middle\">\r\n                    <FA name=\"chevron-right\" className=\"text-info small\" />\r\n                    &nbsp; {chineseName}\r\n                </span>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onProvinceClick = async (item: any) => {\r\n        this.provinceId = item.id;\r\n        let cities = await this.controller.getProvinceCities(this.provinceId);\r\n        if (cities) {\r\n            let len = cities.length;\r\n            if (len === 1) {\r\n                await this.onCityClick(cities[0]);\r\n                return;\r\n            }\r\n            if (len > 0) {\r\n                this.backLevel++;\r\n                this.openPageElement(<Page header=\"选择所在城市\">\r\n                    <div className=\"row no-gutters\">\r\n                        {cities.map(v => this.renderPCC(v, this.onCityClick))}\r\n                    </div>\r\n                </Page>);\r\n                return;\r\n            }\r\n        } else {\r\n            this.closePage(1);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCityClick = async (item: any) => {\r\n        this.cityId = item.id;\r\n        let counties = await this.controller.getCityCounties(this.cityId);\r\n        if (counties && counties.length > 0) {\r\n            this.backLevel++;\r\n            this.openPageElement(<Page header=\"选择所在区县\">\r\n                <div className=\"row no-gutters\">\r\n                    {counties.map(v => this.renderPCC(v, this.onCountyClick))}\r\n                </div>\r\n            </Page>);\r\n        } else {\r\n            this.closePage(2);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCountyClick = async (item: any) => {\r\n        this.countyId = item.id;\r\n        this.closePage(this.backLevel);\r\n        this.saveAddress();\r\n    }\r\n\r\n    private saveAddress = async () => {\r\n        await this.controller.saveAddress(43, this.provinceId, this.cityId, this.countyId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Controller } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { Query, Tuid } from 'tonva';\r\nimport { VAddress } from './VAddress';\r\n\r\nexport class CAddress extends Controller {\r\n    private cApp: CCartApp;\r\n    private getCountryProvincesQuery: Query;\r\n    private getProvinceCitiesQuery: Query;\r\n    private getCityCountiesQuery: Query;\r\n    private addressTuid: Tuid;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqCommon } = this.cApp;\r\n        this.getCountryProvincesQuery = cUqCommon.query('GetCountryProvinces');\r\n        this.getProvinceCitiesQuery = cUqCommon.query('GetProvinceCities');\r\n        this.getCityCountiesQuery = cUqCommon.query('GetCityCounties');\r\n        this.addressTuid = cUqCommon.tuid(\"Address\");\r\n    }\r\n\r\n    protected async internalStart() {\r\n        this.openVPage(VAddress);\r\n    }\r\n\r\n    getCountryProvince = async (countryId: number): Promise<any[]> => {\r\n        return await this.getCountryProvincesQuery.table({ country: countryId });\r\n    }\r\n\r\n    getProvinceCities = async (provinceId: number): Promise<any[]> => {\r\n        return await this.getProvinceCitiesQuery.table({ province: provinceId });\r\n    }\r\n\r\n    getCityCounties = async (cityId: number): Promise<any[]> => {\r\n        return await this.getCityCountiesQuery.table({ city: cityId });\r\n    }\r\n\r\n    saveAddress = async (countryId: number, provinceId: number, cityId?: number, countyId?: number): Promise<any> => {\r\n        let newAddress = await this.addressTuid.save(undefined, { country: countryId, province: provinceId, city: cityId, county: countyId });\r\n        let addressId = newAddress && this.addressTuid.boxId(newAddress.id);\r\n        this.returnCall(addressId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { TuidMain, BoxId } from 'tonva';\r\nimport { VContactList } from './VContactList';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VContact } from './VContact';\r\nimport { Controller, Context, nav } from 'tonva';\r\nimport { CAddress } from './CAddress';\r\n\r\nexport abstract class CSelectContact extends Controller {\r\n    protected cApp: CCartApp;\r\n    private contactTuid: TuidMain;\r\n    fromOrderCreation: boolean;\r\n\r\n    userContacts: any[] = [];\r\n\r\n    constructor(cApp: CCartApp, res: any, fromOrderCreation: boolean) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        let { cUqCustomer } = cApp;\r\n\r\n        this.contactTuid = cUqCustomer.tuid('contact');\r\n        this.fromOrderCreation = fromOrderCreation;\r\n    }\r\n\r\n    async internalStart(/*contactType: ContactType*/) {\r\n        //this.contactType = contactType;\r\n        this.userContacts = await this.cApp.currentUser.getContacts();\r\n        this.openVPage(VContactList);\r\n        if (!this.userContacts || this.userContacts.length === 0) {\r\n            this.onNewContact();\r\n        }\r\n    }\r\n\r\n    protected abstract async getIsDefault(userSetting: any, userContactId: number): Promise<boolean>;\r\n\r\n    /**\r\n     * 打开地址新建界面\r\n     */\r\n    onNewContact = async () => {\r\n        this.openVPage(VContact, { contact: undefined });\r\n    }\r\n\r\n    /**\r\n     * 打开地址编辑界面\r\n     */\r\n    onEditContact = async (userContact: any) => {\r\n        let userContactId = userContact.contact.id;\r\n        let contact = await this.contactTuid.load(userContactId);\r\n        let userSetting = await this.cApp.currentUser.getSetting();\r\n        contact.isDefault = await this.getIsDefault(userSetting, userContactId);\r\n        let userContactData: any = { contact: contact };\r\n        this.openVPage(VContact, userContactData);\r\n    }\r\n\r\n    delContact = async (contact: any) => {\r\n        // 真正的调用数据库操作\r\n        alert('真正调用数据库操作');\r\n    }\r\n\r\n    saveContact = async (contact: any) => {\r\n\r\n        let newContact = await this.contactTuid.save(undefined, contact);\r\n        let { id: newContactId } = newContact;\r\n        let contactBox = this.contactTuid.boxId(newContactId);\r\n\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.addContact(newContactId);\r\n        let { id, isDefault } = contact;\r\n        if (isDefault === true) {\r\n            await this.setDefaultContact(contactBox);\r\n        }\r\n        // contact.id !== undefined表示是修改了已有的contact(我们只能用“替换”表示“修改”，所以此时需要删除原contact)\r\n        if (id !== undefined) {\r\n            await currentUser.delContact(id);\r\n        }\r\n        this.backPage();\r\n        if (this.fromOrderCreation) {\r\n            this.onContactSelected(contactBox);\r\n        }\r\n    }\r\n\r\n    protected abstract async setDefaultContact(contactId: BoxId);\r\n\r\n    onContactSelected = (contact: BoxId) => {\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(contact);\r\n        }\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n}\r\n\r\nexport class CSelectShippingContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        let { shippingContact } = userSetting;\r\n        return shippingContact && shippingContact.id === userContactId;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultShippingContact(contactId);\r\n    }\r\n}\r\n\r\nexport class CSelectInvoiceContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        let { invoiceContact } = userSetting;\r\n        return invoiceContact && invoiceContact.id === userContactId;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoiceContact(contactId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { List, EasyDate } from 'tonva';\r\n\r\nexport class VMyOrders extends VPage<COrder> {\r\n\r\n    private myOrders: any[];\r\n    private currentState: string;\r\n    async open(param: any) {\r\n        this.currentState = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderOrder = (order: any, index: number) => {\r\n        let { openOrderDetail } = this.controller;\r\n        let { id, no, date, discription, flow } = order;\r\n        return <div className=\"m-3 justify-content-between\" onClick={() => openOrderDetail(id)}>\r\n            <div><span className=\"small text-muted\">订单编号: </span><strong>{no}</strong></div>\r\n            <div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n        </div>;\r\n    }\r\n\r\n    private page = () => {\r\n\r\n        let tabs = [{\r\n            title: '待付款',\r\n            content: () => {\r\n                return <List items={this.myOrders} item={{ render: this.renderOrder }} />\r\n            },\r\n            isSelected: this.currentState === 'pendingpayment',\r\n            load: async () => {\r\n                this.currentState = 'pendingpayment';\r\n                this.myOrders = await this.controller.getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            title: '所有订单',\r\n            content: () => {\r\n                return <List items={this.myOrders} item={{ render: this.renderOrder }} />\r\n            },\r\n            isSelected: this.currentState === 'all',\r\n            load: async () => {\r\n                this.currentState = 'all';\r\n                this.myOrders = await this.controller.getMyOrders(this.currentState);\r\n            }\r\n        }];\r\n        return <Page header=\"我的订单\" tabs={tabs} />\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, BoxId } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { tv } from 'tonva';\r\nimport { List, LMR } from 'tonva';\r\nimport { renderProduct } from 'product';\r\n\r\nexport class VOrderDetail extends VPage<COrder> {\r\n\r\n    async open(order: any) {\r\n\r\n        this.openPage(this.page, order);\r\n    }\r\n\r\n\r\n    private packsRow = (item: any, index: number) => {\r\n        let { pack, quantity, price, currency } = item;\r\n\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{price * quantity}</span>\r\n                    <small className=\"text-muted\">(¥{price} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: any) => {\r\n        let { product, packs } = orderItem;\r\n        return <div>\r\n            <div className=\"row p-1 my-1\">\r\n                <div className=\"col-lg-6 pb-3\">{renderProduct(product, 0)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return this.packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private page = (order: any) => {\r\n\r\n        let { brief, data } = order;\r\n        let { id, no, state, description, date } = brief;\r\n        let { orderItems, currency, shippingContact, invoiceContact, invoiceType, invoiceInfo, amount, webUser } = data;\r\n        let header = <>订单详情: {no}</>\r\n        return <Page header={header}>\r\n            <List items={orderItems} item={{ render: this.renderOrderItem }} />\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">收货地址:</div>\r\n                <div className=\"col-9\">{tv(shippingContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票地址:</div>\r\n                <div className=\"col-9\">{tv(invoiceContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票信息:</div>\r\n                <div className=\"col-9\">{invoiceTemplate(invoiceType, invoiceInfo)}</div>\r\n            </div>\r\n            <div className=\"bg-white p-3 my-1 text-right\">\r\n                <span className=\"text-danger font-weight-bold\">总金额: {amount}{tv(currency)}</span>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nfunction invoiceTemplate(invoiceType: BoxId, invoiceInfo: BoxId): JSX.Element {\r\n    return <>\r\n        {tv(invoiceType, invoiceTypeUI, undefined, () => <></>)}<br />\r\n        {tv(invoiceInfo, invoiceInfoUI, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nfunction invoiceTypeUI(values: any) {\r\n    let { id, description } = values;\r\n    return <>{description}</>;\r\n}\r\n\r\nfunction invoiceInfoUI(values: any) {\r\n    let { id, title, taxNo, address, telephone, bank, accountNo } = values;\r\n    return <>{title}</>;\r\n}","import * as React from 'react';\r\nimport { VPage, Page, UiSchema, UiInputItem, Form, Context } from 'tonva';\r\nimport { CInvoiceInfo } from './CInvoiceInfo';\r\nimport { Schema } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'title', type: 'string', required: false },\r\n    { name: 'taxNo', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: false },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'bank', type: 'string', required: false },\r\n    { name: 'accountNo', type: 'string', required: false },\r\n    { name: 'isDefault', type: 'boolean', required: false },\r\n];\r\n\r\nconst commonRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: false,\r\n};\r\n\r\nconst valueAddedRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: false,\r\n}\r\n\r\nconst commonVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: true,\r\n};\r\n\r\nconst valueAddedVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: true,\r\n}\r\n\r\n\r\n\r\nexport class VInvoiceInfo extends VPage<CInvoiceInfo> {\r\n    private form: Form;\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            title: { widget: 'text', label: '单位名称', placeholder: '必填' } as UiInputItem,\r\n            taxNo: { widget: 'text', label: '纳税人识别码', placeholder: '必填' } as UiInputItem,\r\n            address: { widget: 'text', label: '注册地址', placeholder: '必填' } as UiInputItem,\r\n            telephone: { widget: 'text', label: '注册电话', placeholder: '必填' } as UiInputItem,\r\n            bank: { widget: 'text', label: '开户银行', placeholder: '必填' } as UiInputItem,\r\n            accountNo: { widget: 'text', label: '银行账号', placeholder: '必填' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交' },\r\n            isDefault: { widget: 'checkbox', label: '作为默认发票信息' },\r\n        }\r\n    }\r\n\r\n    async open(origInvoice?: any) {\r\n        if (origInvoice  !== undefined && origInvoice.invoiceType !== undefined)\r\n            this.invoiceType = origInvoice.invoiceType.id;\r\n        else\r\n            this.invoiceType = 1;\r\n        this.openPage(this.page, origInvoice);\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { form } = context;\r\n        let { data } = form;\r\n        let invoice = {\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: data,\r\n            isDefault: data.isDefault,\r\n        };\r\n        await this.controller.saveInvoiceInfo(invoice);\r\n    }\r\n\r\n    private onSaveInvoice = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    @observable invoiceType: number;\r\n\r\n    private buildForm(invoiceInfo: any): JSX.Element {\r\n        let requiredFields = this.invoiceType === 1 ? commonRequired : valueAddedRequired;\r\n        let visibleFields = this.invoiceType === 1 ? commonVisible : valueAddedVisible;\r\n        schema.forEach(e => {\r\n            let { items } = this.uiSchema;\r\n            e.required = requiredFields[e.name];\r\n            items[e.name].visible = visibleFields[e.name];\r\n        });\r\n        return <Form ref={v => this.form = v} className=\"my-3\"\r\n            schema={schema}\r\n            uiSchema={this.uiSchema}\r\n            formData={invoiceInfo}\r\n            onButtonClick={this.onFormButtonClick}\r\n            fieldLabelSize={3} />\r\n    }\r\n\r\n    private onInvoiceTypeClick = (event: React.MouseEvent<HTMLInputElement>) => {\r\n        this.invoiceType = parseInt(event.currentTarget.value);\r\n    }\r\n\r\n    private page = observer((origInvoice: any) => {\r\n        let frm = this.buildForm(origInvoice.invoiceInfo);\r\n        return <Page header=\"发票\">\r\n            <div className=\"px-3\">\r\n                <div className=\"form-group row py-3 mb-1 bg-white\">\r\n                    <div className=\"col-12 col-sm-3 pb-2 text-muted\">发票类型:</div>\r\n                    <div className=\"col-12 col-sm-9\">\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"common\" value=\"1\"\r\n                                onClick={(event) => this.onInvoiceTypeClick(event)} defaultChecked></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"common\">普通发票</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"valueAdded\" value=\"2\"\r\n                                onClick={(event) => this.onInvoiceTypeClick(event)}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"valueAdded\">增值税发票</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"p-3 bg-white\">\r\n                {frm}\r\n                <button type=\"button\"\r\n                    className=\"btn btn-primary w-100\"\r\n                    onClick={this.onSaveInvoice}>确定</button>\r\n            </div>\r\n        </Page>\r\n    });\r\n}","import { Controller } from 'tonva';\r\nimport { VInvoiceInfo } from './VInvoiceInfo';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { TuidMain } from 'tonva';\r\n\r\nexport class CInvoiceInfo extends Controller {\r\n    protected cApp: CCartApp;\r\n    private invoiceTypeTuid: TuidMain;\r\n    private invoiceInfoTuid: TuidMain;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqCommon, cUqCustomer } = cApp;\r\n        this.invoiceTypeTuid = cUqCommon.tuid('invoiceType');\r\n        this.invoiceInfoTuid = cUqCustomer.tuid('invoiceInfo');\r\n    }\r\n\r\n    async internalStart(origInvoice?: any) {\r\n        if (origInvoice !== undefined) {\r\n            let { invoiceInfo: invoiceInfoBox } = origInvoice;\r\n            if (invoiceInfoBox !== undefined) {\r\n                let invoiceInfo = await this.invoiceInfoTuid.load(invoiceInfoBox.id);\r\n                origInvoice.invoiceInfo = invoiceInfo;\r\n            }\r\n        }\r\n        this.openVPage(VInvoiceInfo, origInvoice);\r\n    }\r\n\r\n    async saveInvoiceInfo(invoice: any) {\r\n        let { invoiceType, invoiceInfo, isDefault } = invoice;\r\n        let newInvoiceInfo = await this.invoiceInfoTuid.save(undefined, invoiceInfo);\r\n        let { id: newInvoiceInfoId } = newInvoiceInfo;\r\n        let invoiceBox = {\r\n            invoiceType: this.invoiceTypeTuid.boxId(invoiceType),\r\n            invoiceInfo: this.invoiceInfoTuid.boxId(newInvoiceInfoId),\r\n        }\r\n        if (isDefault === true) {\r\n            let { currentUser } = this.cApp;\r\n            await currentUser.setDefaultInvoice(invoiceBox.invoiceType, invoiceBox.invoiceInfo);\r\n        }\r\n        this.backPage();\r\n        this.returnCall(invoiceBox);\r\n    }\r\n}","import { observable } from 'mobx';\r\nimport { Sheet, BoxId, Query } from 'tonva';\r\nimport { Controller, nav } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VCreateOrder } from './VCreateOrder';\r\nimport { Order, OrderItem } from './Order';\r\nimport { OrderSuccess } from './OrderSuccess';\r\nimport { CSelectShippingContact, CSelectInvoiceContact, CSelectContact } from 'customer/CSelectContact';\r\nimport { VMyOrders } from './VMyOrders';\r\nimport { VOrderDetail } from './VOrderDetail';\r\nimport { WebUser } from 'CurrentUser';\r\nimport { CInvoiceInfo } from 'customer/CInvoiceInfo';\r\nimport { orderItemGroupByProduct } from 'tools/groupByProduct';\r\nimport { LoaderProductChemical } from 'product/itemLoader';\r\n\r\nexport class COrder extends Controller {\r\n    private cApp: CCartApp;\r\n    @observable orderData: Order = new Order();\r\n    private orderSheet: Sheet;\r\n    private getPendingPaymentQuery: Query;\r\n    currentUser: WebUser;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        let { cUqOrder, currentUser } = cApp;\r\n        this.orderSheet = cUqOrder.sheet('order');\r\n        this.getPendingPaymentQuery = cUqOrder.query('getpendingPayment');\r\n        this.currentUser = currentUser;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        let cart = param;\r\n        await this.createOrderFromCart(cart);\r\n        this.openVPage(VCreateOrder);\r\n    }\r\n\r\n    private createOrderFromCart = async (cartItem: any[]) => {\r\n        let { currentUser } = this.cApp;\r\n        this.orderData.webUser = currentUser.id;\r\n        if (currentUser.currentCustomer !== undefined) {\r\n            this.orderData.customer = currentUser.currentCustomer.id;\r\n        }\r\n\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceContact === undefined) {\r\n            this.orderData.invoiceContact = await this.getDefaultInvoiceContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceType === undefined) {\r\n            this.orderData.invoiceType = await this.getDefaultInvoiceType();\r\n        }\r\n\r\n        if (this.orderData.invoiceInfo === undefined) {\r\n            this.orderData.invoiceInfo = await this.getDefaultInvoiceInfo();\r\n        }\r\n\r\n        if (cartItem !== undefined && cartItem.length > 0) {\r\n            this.orderData.currency = cartItem[0].currency;\r\n            this.orderData.orderItems = cartItem.map((element: any, index: number) => {\r\n                var item = new OrderItem();\r\n                item.product = element.product;\r\n                item.packs = element.packs.filter(v => v.quantity > 0);\r\n                //item.price = element.price;\r\n                //item.quantity = element.quantity;\r\n                return item;\r\n            });\r\n\r\n            // 运费和运费减免\r\n        }\r\n    }\r\n\r\n    private defaultSetting: any;\r\n    private async getDefaultSetting() {\r\n        if (this.defaultSetting) return this.defaultSetting;\r\n        let { currentUser } = this.cApp;\r\n        return this.defaultSetting = await currentUser.getSetting() || {};\r\n    }\r\n\r\n    private contact0: BoxId;\r\n    private async getContact(): Promise<BoxId> {\r\n        if (this.contact0 === null) return;\r\n        if (this.contact0 !== undefined) return this.contact0;\r\n        let { currentUser } = this.cApp;\r\n        let contactArr = await currentUser.getContacts();\r\n        if (contactArr === undefined || contactArr.length === 0) {\r\n            this.contact0 = null;\r\n            return;\r\n        }\r\n        return this.contact0 = contactArr[0].contact;\r\n    }\r\n\r\n    private async getDefaultShippingContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.shippingContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceType() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceType;\r\n    }\r\n\r\n    private async getDefaultInvoiceInfo() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceInfo;\r\n    }\r\n\r\n    submitOrder = async () => {\r\n        let { orderItems } = this.orderData;\r\n\r\n        let result: any = await this.orderSheet.save(\"order\", this.orderData.getDataForSave());\r\n        await this.orderSheet.action(result.id, result.flow, result.state, \"submit\");\r\n\r\n        let { cartViewModel, cartService } = this.cApp;\r\n        let param: [{ productId: number, packId: number }] = [] as any;\r\n        orderItems.forEach(e => {\r\n            e.packs.forEach(v => {\r\n                param.push({ productId: e.product.id, packId: v.pack.id })\r\n            })\r\n        });\r\n        cartService.removeFromCart(cartViewModel, param);\r\n        // 打开下单成功显示界面\r\n        nav.popTo(this.cApp.topKey);\r\n        this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    private onSelectContact = async (\r\n        typeSelectContact: new (cApp: CCartApp, res: any, autoSelectMode: boolean) => CSelectContact,\r\n    ) => {\r\n        let cSelectContact = new typeSelectContact(this.cApp, undefined, true);\r\n        let contact = await cSelectContact.call<any>();\r\n        return contact;\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        let typeSelectContact: new (cApp: CCartApp, res: any, autoSelectMode: boolean) => CSelectContact = CSelectShippingContact;\r\n        let contactBox = await this.onSelectContact(typeSelectContact);\r\n        this.orderData.shippingContact = contactBox;\r\n    }\r\n\r\n    onSelectInvoiceContact = async () => {\r\n        let typeSelectContact: new (cApp: CCartApp, res: any, autoSelectMode: boolean) => CSelectContact = CSelectInvoiceContact;\r\n        let contactBox = await this.onSelectContact(typeSelectContact);\r\n        this.orderData.invoiceContact = contactBox;\r\n    }\r\n\r\n    /*\r\n    */\r\n    openMyOrders = async (state: string) => {\r\n\r\n        this.openVPage(VMyOrders, state);\r\n    }\r\n\r\n    getMyOrders = async (state: string) => {\r\n\r\n        switch (state) {\r\n            case 'pendingpayment':\r\n                return await this.getPendingPaymentQuery.table(undefined);\r\n                break;\r\n            default:\r\n                return await this.orderSheet.mySheets(undefined, 1, 20);\r\n                break;\r\n        }\r\n    }\r\n\r\n    onInvoiceInfoEdit = async () => {\r\n        let cInvoiceInfo = new CInvoiceInfo(this.cApp, undefined);\r\n        let { invoiceType, invoiceInfo } = this.orderData;\r\n        let origInvoice = {\r\n            invoiceType: invoiceType,\r\n            invoiceInfo: invoiceInfo,\r\n        }\r\n        let newInvoice = await cInvoiceInfo.call<any>(origInvoice);\r\n        this.orderData.invoiceType = newInvoice.invoiceType;\r\n        this.orderData.invoiceInfo = newInvoice.invoiceInfo;\r\n    }\r\n\r\n    openOrderDetail = async (orderId: number) => {\r\n\r\n        let order = await this.orderSheet.getSheet(orderId);\r\n        let { data } = order;\r\n        let { orderItems } = data;\r\n        let orderItemsGrouped = orderItemGroupByProduct(orderItems);\r\n        let loaderProduct = new LoaderProductChemical(this.cApp);\r\n        for (let i = 0; i < orderItemsGrouped.length; i++) {\r\n            let productId = orderItemsGrouped[i].product.id;\r\n            orderItemsGrouped[i].product = await loaderProduct.load(productId);\r\n        }\r\n        data.orderItems = orderItemsGrouped;\r\n        this.openVPage(VOrderDetail, order);\r\n    }\r\n\r\n    openMeInfo = async () => {\r\n        let { cMe } = this.cApp;\r\n        await cMe.openMeInfoFirstOrder();\r\n    }\r\n}\r\n","\r\nexport function groupByProduct(packItems: any[]) {\r\n    let result: any[] = [];\r\n    for (let cd of packItems) {\r\n        let { product, pack, quantity, price, currency } = cd;\r\n        let packRow: any = {\r\n            pack: pack.id,\r\n            price: price,\r\n            quantity: quantity,\r\n            currency: currency && currency.id\r\n        }\r\n        let cpi = result.find(e => e.product === product.id);\r\n        if (cpi === undefined) {\r\n            cpi = { product: product.id, packs: [] };\r\n            result.push(cpi);\r\n        }\r\n        cpi.packs.push(packRow);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function orderItemGroupByProduct(packItems: any[]) {\r\n    let result: any[] = [];\r\n    for (let cd of packItems) {\r\n        let { product, pack, quantity, price, currency } = cd;\r\n        let cpi = result.find(e => e.product.id === product.id);\r\n        if (cpi === undefined) {\r\n            cpi = { product: product, packs: [] };\r\n            result.push(cpi);\r\n        }\r\n        let packRow: any = {\r\n            pack: pack,\r\n            price: price,\r\n            quantity: quantity,\r\n            currency: currency && currency.id\r\n        }\r\n        cpi.packs.push(packRow);\r\n    }\r\n    return result;\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav } from 'tonva';\r\nimport { LMR, FA, SearchBox } from 'tonva';\r\nimport logo from '../images/logo.png';\r\nimport { CHome } from './CHome';\r\n\r\nexport class VSiteHeader extends View<CHome> {\r\n    render() {\r\n        let currentSalesRegion = <FA name=\"globe\" />\r\n        let login = <div>\r\n            登录\r\n        </div>\r\n        let left = <img className=\"m-1\" src={logo} alt=\"logo\" style={{height: \"3rem\", width: \"3rem\"}} />;\r\n        //let cart = this.controller.cApp.cCart.renderCartLabel();\r\n        let right = undefined;\r\n        /*\r\n        <div className=\"d-flex flex-row mr-1 align-items-center\">\r\n            {currentSalesRegion} &nbsp;\r\n            <button onClick={()=>nav.start()}>Try</button>\r\n        </div>;*/\r\n        return <LMR\r\n            className=\"mb-3 align-items-center bg-white\"\r\n            left={left} right={right}>\r\n            <div className=\"\">\r\n                {this.controller.renderSearchHeader('md')}\r\n            </div>\r\n        </LMR>\r\n        //<div className=\"h4 px-3 mb-0\">百灵威科技</div>\r\n    }\r\n}","import * as React from 'react';\r\nimport { View, nav } from 'tonva';\r\nimport { CHome } from './CHome';\r\nimport { SearchBox } from 'tonva';\r\n\r\nexport class VSearchHeader extends View<CHome> {\r\n\r\n    private onSearch = async (key: string, param: 'home' | 'insearch' | 'productdetail') => {\r\n        let { cProduct, topKey } = this.controller.cApp;\r\n        if (param !== 'home') {\r\n            nav.popTo(topKey);\r\n        }\r\n\r\n        cProduct.start(key);\r\n    }\r\n\r\n    render(param: 'home' | 'insearch' | 'productdetail') {\r\n        let size: any = param === 'home' ? \"md\" : 'sm';\r\n        return <SearchBox className=\"px-1 w-100\"\r\n            size={size}\r\n            onSearch={(key: string) => this.onSearch(key, param)}\r\n            placeholder=\"搜索品名、编号、CAS、MDL等\" />\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, View } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CHome } from './CHome';\r\nimport { observable } from 'mobx';\r\n\r\nconst LIGUOSHENG = 5;\r\n\r\nexport class VHome extends View<CHome> {\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderSection = (item: any, index: number) => {\r\n        return <section>\r\n            <h4>{item.title}<small className=\"text-muted\">{item.subtitle}</small></h4>\r\n            <p>{item.content}</p>\r\n        </section>\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { openMetaView } = this.controller;\r\n        let viewMetaButton = <></>;\r\n        if (this.controller.isLogined && this.controller.user.id === LIGUOSHENG) {\r\n            viewMetaButton = <button type=\"button\" className=\"btn w-100\" onClick={openMetaView}>view</button>\r\n        }\r\n\r\n        return <Page header={false} footer={viewMetaButton}>\r\n            <this.content />\r\n        </Page>;\r\n    })\r\n\r\n    private content = observer(() => {\r\n        let siteHeader = this.controller.renderSiteHeader();\r\n        return <>\r\n            {siteHeader}\r\n            {this.controller.renderCategoryRootList()}\r\n        </>\r\n    });\r\n}","import * as React from 'react';\r\nimport { TuidMain } from 'tonva';\r\nimport { VSiteHeader } from './VSiteHeader';\r\nimport { CCartApp } from '../CCartApp';\r\nimport { PageItems, Controller } from 'tonva';\r\nimport { VSearchHeader } from './VSearchHeader';\r\nimport { VHome } from './VHome';\r\n\r\nclass HomeSections extends PageItems<any> {\r\n\r\n    private sectionTuid: TuidMain;\r\n\r\n    constructor(sectionTuid: TuidMain) {\r\n        super();\r\n        this.firstSize = this.pageSize = 13;\r\n        this.sectionTuid = sectionTuid;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.sectionTuid.search(\"\", pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        if (item === undefined) return 0;\r\n        return item.id;\r\n    }\r\n}\r\n\r\nexport class CHome extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    homeSections: HomeSections;\r\n    sectionTuid: TuidMain;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    async internalStart(param: any) {\r\n\r\n        let { cProductCategory } = this.cApp;\r\n        await cProductCategory.start();\r\n        this.openVPage(VHome);\r\n    }\r\n\r\n    renderSiteHeader = () => {\r\n        return this.renderView(VSiteHeader);\r\n    }\r\n\r\n    renderSearchHeader = (size?:string) => {\r\n        return this.renderView(VSearchHeader, size);\r\n    }\r\n\r\n    renderCategoryRootList = () => {\r\n        let { cProductCategory } = this.cApp;\r\n        return cProductCategory.renderRootList();\r\n    }\r\n\r\n    renderHome = () => {\r\n        return this.renderView(VHome);\r\n    }\r\n\r\n    openMetaView = () => {\r\n        this.cApp.startDebug();\r\n    }\r\n\r\n    tab = () => <this.renderHome />;\r\n}","import * as React from 'react';\r\nimport { View } from 'tonva';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { consts } from '../home/consts';\r\nimport { FA } from 'tonva';\r\n\r\nconst imgStyle: React.CSSProperties = {\r\n    height: '1.5rem', width: '1.5rem',\r\n    marginLeft: '0.1rem',\r\n    marginRight: '0.3rem'\r\n}\r\n\r\nexport const titleTitle: React.CSSProperties = {\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport const subStyle: React.CSSProperties = {\r\n    fontSize: '0.75rem',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport class VRootCategory extends View<CProductCategory> {\r\n\r\n    private categoryClick = async (categoryWapper: any, parent: any) => {\r\n        await this.controller.openMainPage(categoryWapper, parent);\r\n    }\r\n\r\n    private renderRootCategory = (item: any, parent: any) => {\r\n        let { name, children, total } = item;\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, undefined)}>\r\n                <b>{name}</b>\r\n            </div>\r\n            <div className=\"\"\r\n                style={{ paddingRight: '1px' }}\r\n            >\r\n                <div className=\"row no-gutters\">\r\n                    {children.map(v => this.renderSubCategory(v, item))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any) => {\r\n        let { name, children, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            //style={{borderRight:'1px solid gray', borderBottom:'1px solid gray'}}\r\n            onClick={() => this.categoryClick(item, parent)}>\r\n            <div className=\"py-3 px-2\"\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <div style={titleTitle}>\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className=\"text-info\" />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(children, total)}\r\n            </div>\r\n        </div>;\r\n        // <img src={consts.appIcon} alt=\"structure\" style={imgStyle} />\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        let { categories } = this.controller;\r\n        return <>{categories.map(v => this.renderRootCategory(v, undefined))}</>;\r\n    }\r\n}\r\n\r\n\r\nexport function renderThirdCategory(items: any, total: number) {\r\n    return <div className=\"py-2 px-1 text-muted small\" style={subStyle}>\r\n        {items.length === 0 ? <>该类产品数量: {total > 1000 ? '>1000' : total}</> : items.map(v => v.name).join(' / ')}\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { VPage, Page } from 'tonva';\r\nimport { List, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { titleTitle, subStyle, renderThirdCategory } from './VRootCategory';\r\n\r\nexport class VCategory extends VPage<CProductCategory> {\r\n\r\n    async open(categoryWaper: any) {\r\n\r\n        this.openPage(this.page, categoryWaper);\r\n    }\r\n\r\n    private renderChild = (childWapper: any) => {\r\n\r\n        return <div className=\"py-2\"><FA name=\"hand-o-right mr-2\"></FA>{childWapper.name}</div>\r\n    }\r\n\r\n    private categoryClick = async (childWapper: any, parent: any) => {\r\n        await this.controller.openMainPage(childWapper, parent);\r\n    }\r\n\r\n    private breadCrumb = (item: any, parent: any) => {\r\n        return <nav arial-babel=\"breadcrumb\">\r\n            <ol className=\"breadcrumb\">\r\n                {tv(item, this.breadCrumbItem)}\r\n            </ol>\r\n        </nav>\r\n\r\n    }\r\n\r\n    private breadCrumbItem = (values: any, parent: any) => {\r\n        if (values === undefined || values.productCategory === undefined)\r\n            return <></>;\r\n        return <>\r\n            {tv(values.productCategory.parent, this.breadCrumbItem)}\r\n            <li className=\"breadcrumb-item\" onClick={() => this.categoryClick(values, undefined)}>{values.name}</li>\r\n        </>\r\n    }\r\n\r\n    private renderRootCategory = (item: any, parent: any) => {\r\n        let { productCategory, name, children } = item;\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, parent)}>\r\n                <b>{name}</b>\r\n            </div>\r\n            <div className=\"\"\r\n                style={{ paddingRight: '1px' }}\r\n            >\r\n                <div className=\"row no-gutters\">\r\n                    {children.map(v => this.renderSubCategory(v, item))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any) => {\r\n        let { name, children, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            //style={{borderRight:'1px solid gray', borderBottom:'1px solid gray'}}\r\n            onClick={() => this.categoryClick(item, parent)}>\r\n            <div className=\"pt-1 pb-1 px-2\"\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <div style={titleTitle}>\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-right\" className=\"text-info small\" />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(children, total)}\r\n            </div>\r\n        </div>;\r\n        // <img src={consts.appIcon} alt=\"structure\" style={imgStyle} />\r\n    }\r\n\r\n    private page = (categoryWaper: any) => {\r\n\r\n        let { cHome } = this.controller.cApp;\r\n        let header = cHome.renderSearchHeader();\r\n        let cartLabel = this.controller.cApp.cCart.renderCartLabel();\r\n\r\n        let { categoryWaper: item, parent } = categoryWaper;\r\n        return <Page header={header} right={cartLabel}>\r\n            {this.renderRootCategory(item, parent)}\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { Query } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { VRootCategory } from './VRootCategory';\r\nimport { VCategory } from './VCategory';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { Controller } from 'tonva';\r\n\r\nexport class CProductCategory extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    // categories: any[];\r\n    @observable categories: any[] = [];\r\n    private getRootCategoryQuery: Query;\r\n    private getChildrenCategoryQuery: Query;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n        let { cUqProduct } = this.cApp;\r\n        this.getRootCategoryQuery = cUqProduct.query('getRootCategory');\r\n        this.getChildrenCategoryQuery = cUqProduct.query('getChildrenCategory');\r\n    }\r\n\r\n    async internalStart(param: any) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        let results = await this.getRootCategoryQuery.query({ salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n        this.categories = results.first;\r\n        this.categories.forEach(element => {\r\n            this.buildCategories(element, results.secend, results.third);\r\n        })\r\n    }\r\n\r\n    renderRootList = () => {\r\n        return this.renderView(VRootCategory);\r\n    };\r\n\r\n    async getCategoryChildren(parentCategoryId: number) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        return await this.getChildrenCategoryQuery.query({ parent: parentCategoryId, salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n    }\r\n\r\n    async buildCategories(categoryWapper: any, firstCategory: any, secendCategory: any) {\r\n        firstCategory.forEach(async element => {\r\n            element.children = secendCategory.filter(v => v.parent === element.productCategory.id);\r\n        });\r\n        categoryWapper.children = firstCategory.filter(v => v.parent === categoryWapper.productCategory.id);\r\n    }\r\n\r\n    async openMainPage(categoryWaper: any, parent: any) {\r\n\r\n        let { productCategory } = categoryWaper;\r\n        let results = await this.getCategoryChildren(productCategory.id);\r\n        if (results.first.length !== 0) {\r\n            this.buildCategories(categoryWaper, results.first, results.secend);\r\n            this.openVPage(VCategory, { categoryWaper, parent });\r\n        } else {\r\n            let { cProduct } = this.cApp;\r\n            cProduct.searchByCategory(productCategory);\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Image } from 'tonva';\r\nimport { CMember } from './CMember';\r\nimport { LMR, Muted, FA, Media } from 'tonva';\r\nimport pig from '../images/pig.png';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst stylePig: React.CSSProperties = {\r\n    width: '100%',\r\n    height: '20rem',\r\n    backgroundImage: `url(${pig})`,\r\n    backgroundSize: 'contain',\r\n    backgroundColor: 'rgba(255,255,255,0.1)',\r\n    opacity: 0.09,\r\n    position: 'absolute',\r\n}\r\n\r\nexport class VMember extends VPage<CMember> {\r\n    private recommendationCodeRef = React.createRef<HTMLInputElement>();\r\n\r\n    async open(param: any) {\r\n\r\n    }\r\n\r\n    render(member: any): JSX.Element {\r\n\r\n        return <this.content />;\r\n    }\r\n\r\n    private submitRecommendationCode() {\r\n        let code = this.recommendationCodeRef.current.value;\r\n        if (code) {\r\n            let { setReferrer: submit } = this.controller;\r\n            submit(code);\r\n        }\r\n    }\r\n\r\n    private content = observer(() => {\r\n        let { cApp, member } = this.controller;\r\n        if (member === undefined)\r\n            return <></>;\r\n        let { currentUser } = cApp;\r\n        let { recommendationCode, point } = member;\r\n        if (!point) point = 0;\r\n\r\n        let im = <Image className=\"mr-3 w-3c h-3c\" src={currentUser.icon} />;\r\n        let inviteCode = <div className=\"small\">邀请码: {recommendationCode}</div>;\r\n\r\n        let divPoints = <div className=\"my-3 text-center bg-white h-25\" style={{ position: 'relative' }}>\r\n            <div className=\"w-100 bg-white h-20c\" style={{ position: 'absolute' }} />\r\n            <div className=\"d-flex align-items-center justify-content-center\" style={stylePig} />\r\n            <div className=\"w-100 d-flex align-items-center justify-content-center h-20c\" style={{ position: 'absolute' }}>\r\n                <div className=\"muted mr-3 small\">积分: </div>\r\n                <div className=\"text-danger\" style={{ fontSize: '2rem' }}>{point}</div>\r\n            </div>\r\n        </div>\r\n\r\n        let pointTitle = <p className=\"h4\">我的积分</p>\r\n        let pointDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>\r\n        let pointThisWeek = <><p className=\"h5 mb-0\">0</p><Muted>本周</Muted></>\r\n        let pointAll = <><p className=\"h5 mb-0\">{point}</p><Muted>累计</Muted></>\r\n\r\n        let fansTitle = <p>我的粉丝</p>\r\n        let fansDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>;\r\n        let detail = <div className=\"shadow bg-white rounded p-3 mb-1\">\r\n            <LMR left={fansTitle} right={fansDetail}></LMR>\r\n            <LMR className=\"pb-2\">\r\n                <p className=\"h4 mb-0\">0</p>\r\n                <Muted>今日</Muted>\r\n            </LMR>\r\n            <LMR left={pointThisWeek} right={pointAll} />\r\n            <LMR>\r\n                <input type=\"text\" className=\"form-control\" ref={this.recommendationCodeRef} />\r\n                <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.submitRecommendationCode()}>输入邀请码</button>\r\n            </LMR>\r\n        </div>;\r\n\r\n        return <div>\r\n            <LMR className=\"bg-white p-3 mb-1 align-items-center\"\r\n                left={im} right={inviteCode}>\r\n                <b>{currentUser.name}</b>\r\n            </LMR>\r\n            {divPoints}\r\n            {/*detail*/}\r\n        </div>\r\n    })\r\n}\r\n/*\r\n<div className=\"shadow bg-white rounded p-3 mb-1\">\r\n<LMR left={pointTitle} right={pointDetail}></LMR>\r\n<LMR className=\"pb-2\">\r\n    <p className=\"h4 mb-0\">0</p>\r\n    <Muted>今日</Muted>\r\n</LMR>\r\n<LMR left={pointThisWeek} right={pointAll} />\r\n</div>\r\n*/","import * as React from 'react';\r\nimport Loadable from 'react-loadable';\r\nimport { Controller, Loading, nav } from 'tonva';\r\nimport { VMember } from './VMember';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { FA } from 'tonva';\r\nimport { jnkTop } from 'me/loginTop';\r\nimport { Action, Map, BoxId } from 'tonva';\r\n\r\nexport class CMember extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    @observable member: any;\r\n    private referrer: BoxId;\r\n    private memberAction: Action;\r\n    private memberRecommenverMap: Map;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n        let { cUqMember } = cApp;\r\n        this.memberAction = cUqMember.action('MemberAction');\r\n        this.memberRecommenverMap = cUqMember.map('MemberRecommender');\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n\r\n        if (this.isLogined) {\r\n            let { id: currentUserId } = this.user;\r\n            let promises: PromiseLike<any>[] = [];\r\n            promises.push(this.memberAction.submit({}));\r\n            promises.push(this.memberRecommenverMap.table({ referrer: currentUserId }));\r\n            promises.push(this.memberRecommenverMap.table({ member: currentUserId }));\r\n            let result = await Promise.all(promises);\r\n            let { code, point } = result[0];\r\n            this.referrer = result[2];\r\n            this.member = { recommendationCode: code, point: point, fans: result[1], referrer: result[2] };\r\n        }\r\n    }\r\n\r\n    private loginCallback = async () => {\r\n        nav.pop();\r\n        await this.internalStart(undefined);\r\n    }\r\n\r\n    render = observer(() => {\r\n        if (this.isLogined) {\r\n            return this.member === undefined ? <Loading /> : this.renderView(VMember);\r\n        } else {\r\n            return <div\r\n                className=\"d-flex h-100 flex-column align-items-center justify-content-center\">\r\n                <div className=\"flex-fill\" />\r\n                <button className=\"btn btn-success w-20c\"\r\n                    onClick={() => nav.showLogin(this.loginCallback, true)}>\r\n                    <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                </button>\r\n                <div className=\"flex-fill\" />\r\n                <div className=\"flex-fill\" />\r\n            </div>;\r\n        }\r\n    })\r\n\r\n    tab = () => {\r\n        this.start();\r\n        return <this.render />;\r\n    }\r\n\r\n    setReferrer(code: string) {\r\n        if (code) {\r\n            // 写入map，方法是add，用这个方法可能会写入多次，多以在写入之前要检查有没有，有的话，就不能再调用这个方法了\r\n            // 这个逻辑我认为应该是在服务端，写入的时候要给双方积分，给多少积分的逻辑，也应该在后端，从邀请码到拥有此邀请码\r\n            // 的会员id之间的转换，逻辑也应该在后台，这个后端的逻辑写在ACTION中？\r\n            if (!this.referrer) {\r\n                let { id: currentUserId } = this.user;\r\n            }\r\n        }\r\n    }\r\n}","import { User, loadAppUqs } from 'tonva';\r\nimport { Map, BoxId, CUq, Tuid } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\n\r\nexport class WebUser {\r\n\r\n    id: number;\r\n    name: string;\r\n    nick?: string;\r\n    icon?: string;\r\n    guest: number;\r\n    token: string;\r\n\r\n    @observable firstName: string;\r\n    gender: string;\r\n    salutation: string;\r\n    @observable organizationName: string;\r\n    departmentName: string;\r\n\r\n    telephone: string;\r\n    @observable mobile: string;\r\n    email: string;\r\n    @computed get allowOrdering() {\r\n        return this.currentCustomer !== undefined ||\r\n            (this.mobile && this.firstName && this.organizationName);\r\n    }\r\n\r\n    private _user: User;\r\n\r\n    private webUserTuid: Tuid;\r\n    private webUserCustomerMap: Map;\r\n    private webUserContactMap: Map;\r\n    private webUserContactsMap: Map;\r\n    private webUserSettingMap: Map;\r\n\r\n    private webUserSettings: any;\r\n\r\n    private cUsqCustomer: CUq;\r\n\r\n    constructor(cUsqWebUser: CUq, cUsqCustomer: CUq) {\r\n        this.webUserTuid = cUsqWebUser.tuid(\"webUser\");\r\n        this.webUserCustomerMap = cUsqWebUser.map('webUserCustomer');\r\n        this.webUserContactMap = cUsqWebUser.map('webUserContact');\r\n        this.webUserContactsMap = cUsqWebUser.map('webUserContacts');\r\n        this.webUserSettingMap = cUsqWebUser.map('webUserSetting');\r\n        this.cUsqCustomer = cUsqCustomer;\r\n    }\r\n\r\n    setUser = async (user: User) => {\r\n        if (user !== undefined) {\r\n            this._user = user;\r\n            this.id = user.id;\r\n            this.name = user.name;\r\n            this.nick = user.nick;\r\n            this.icon = user.icon;\r\n            this.guest = user.guest;\r\n            this.token = user.token;\r\n\r\n            await this.loadWebUser();\r\n        }\r\n    }\r\n\r\n    private async loadWebUser() {\r\n        if (this._user !== undefined) {\r\n            let webUser = await this.webUserTuid.load(this.id);\r\n            if (webUser) {\r\n                let { firstName, gender, salutation, organizationName, departmentName } = webUser;\r\n                this.firstName = firstName;\r\n                this.gender = gender;\r\n                this.salutation = salutation;\r\n                this.organizationName = organizationName;\r\n                this.departmentName = departmentName;\r\n            }\r\n            let contact = await this.webUserContactMap.obj({ webUser: this.id });\r\n            if (contact) {\r\n                let { telephone, mobile, email } = contact;\r\n                this.telephone = telephone;\r\n                this.mobile = mobile;\r\n                this.email = email;\r\n            }\r\n            let value = await this.webUserCustomerMap.obj({ webUser: this.id });\r\n            if (value != undefined)\r\n                this.currentCustomer = new Customer(value.customer, this.cUsqCustomer);\r\n        }\r\n    }\r\n\r\n    get isLogined(): boolean {\r\n        return this._user !== undefined;\r\n    }\r\n    get hasCustomer(): boolean {\r\n        return this.currentCustomer !== undefined;\r\n    }\r\n    currentCustomer: Customer;\r\n\r\n    async getContacts(): Promise<any[]> {\r\n\r\n        if (this.currentCustomer !== undefined) {\r\n            return await this.currentCustomer.getContacts()\r\n        }\r\n        return await this.webUserContactsMap.table({ webUser: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.addContact(contactId);\r\n            return;\r\n        }\r\n        await this.webUserContactsMap.add({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.delContact(contactId);\r\n            return;\r\n        }\r\n        await this.webUserContactsMap.del({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async getSetting() {\r\n        this.webUserSettings = await this.webUserSettingMap.obj({ webUser: this.id });\r\n        return this.webUserSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultShippingContact(contactId);\r\n            return;\r\n        }\r\n        // await this.webUserSettingMap.add({ webUser: this.id, shippingContact: contactId });\r\n        this.webUserSettings.shippingContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoiceContact(contactId);\r\n            return;\r\n        }\r\n        await this.webUserSettingMap.add({ webUser: this.id, arr1: [{ invoiceContact: contactId }] });\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoice(invoiceTypeId, invoiceInfoId);\r\n            return;\r\n        }\r\n        // await this.webUserSettingMap.add({ webUser: this.id, arr1: [{ invoiceType: invoiceTypeId, invoiceInfo: invoiceInfoId }] });\r\n        this.webUserSettings.invoiceType = invoiceTypeId;\r\n        this.webUserSettings.InvoiceInfo = invoiceInfoId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async saveDefaultSettings() {\r\n        await this.webUserSettingMap.add(this.webUserSettings);\r\n    }\r\n\r\n\r\n    async changeWebUser(webUser: any) {\r\n        await this.webUserTuid.save(this.id, webUser);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        webUserContact.webUser = this.id;\r\n        await this.webUserContactMap.add(webUserContact);\r\n        await this.loadWebUser();\r\n    }\r\n};\r\n\r\nexport class Customer {\r\n\r\n    private contactMap: Map;\r\n    id: number;\r\n\r\n    private customerSettingMap: Map;\r\n\r\n    private customerSettings: any;\r\n\r\n    constructor(customer: BoxId, cUsqCustomer: CUq) {\r\n        this.id = customer.id;\r\n        this.contactMap = cUsqCustomer.map('customerContacts');\r\n        this.customerSettingMap = cUsqCustomer.map('customerSetting');\r\n    };\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        return await this.contactMap.table({ customer: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        await this.contactMap.add({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        await this.contactMap.del({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async getSetting() {\r\n        this.customerSettings = await this.customerSettingMap.obj({ customer: this.id });\r\n        return this.customerSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        // await this.customerSettingMap.add({ customer: this.id, arr1: [{ defaultShippingContact: contactId }] });\r\n        this.customerSettings.shippingContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        // await this.customerSettingMap.add({ customer: this.id, arr1: [{ defaultInvoiceContact: contactId }] });\r\n        this.customerSettings.invoiceContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        this.customerSettings.invoiceType = invoiceTypeId;\r\n        this.customerSettings.invoiceInfo = invoiceInfoId;\r\n        // await this.customerSettingMap.add({ customer: this.id, arr1: [{ invoiceType: invoiceTypeId, invoiceInfo: invoiceInfoId }] });\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultSettings() {\r\n        await this.customerSettingMap.add(this.customerSettings);\r\n    }\r\n}","export const consts = {\r\n\r\n    uqOrder: '百灵威系统工程部/order',\r\n    uqProduct: \"百灵威系统工程部/product\",\r\n    uqCommon: '百灵威系统工程部/common',\r\n    uqWebUser: '百灵威系统工程部/webuser',\r\n    uqCustomer: '百灵威系统工程部/customer',\r\n    uqCustomerDiscount: '百灵威系统工程部/customerDiscount',\r\n    uqPromotion: '百灵威系统工程部/promotion',\r\n    uqWarehouse: \"百灵威系统工程部/warehouse\",\r\n    uqMember: '百灵威系统工程部/member',\r\n\r\n    appIcon: 'http://101.200.46.56/imgs/Bear-icon.png',\r\n}","import { observable, autorun, IReactionDisposer } from 'mobx';\r\nimport _ from 'lodash';\r\nimport { Action, Query, TuidDiv } from 'tonva';\r\nimport { CCartApp } from '../CCartApp';\r\nimport { LoaderProductChemical } from 'product/itemLoader';\r\nimport { CartItem, CartPackRow } from './Cart';\r\nimport { groupByProduct } from 'tools/groupByProduct';\r\n\r\nexport class CartViewModel {\r\n\r\n    constructor() {\r\n        this.cartItems = this.data.list;\r\n        this.disposer = autorun(this.calcSum);\r\n    }\r\n\r\n    private disposer: IReactionDisposer;\r\n\r\n    cartItems: CartItem[];\r\n    @observable data = {\r\n        list: observable<CartItem>([]),\r\n    };\r\n    count = observable.box<number>(0);\r\n    amount = observable.box<number>(0);\r\n\r\n    dispose() {\r\n        this.disposer();\r\n    }\r\n\r\n    protected calcSum = () => {\r\n        let count = 0, amount = 0;\r\n        for (let cp of this.cartItems) {\r\n            let { $isSelected, $isDeleted, packs } = cp;\r\n            if ($isDeleted === true) continue;\r\n            for (let pi of packs) {\r\n                let { price, quantity } = pi;\r\n                count += quantity;\r\n                if (price === Number.NaN || quantity === Number.NaN) continue;\r\n                if ($isSelected === true) {\r\n                    amount += quantity * price;\r\n                }\r\n            }\r\n        }\r\n        this.count.set(count);\r\n        this.amount.set(amount);\r\n    }\r\n\r\n    getQuantity(productId: number, packId: number): number {\r\n        let cp = this.cartItems.find(v => v.$isDeleted !== true && v.product.id === productId);\r\n        if (cp === undefined) return 0;\r\n        let packItem = cp.packs.find(v => v.pack.id === packId);\r\n        if (packItem === undefined) return 0;\r\n        return packItem.quantity;\r\n    }\r\n\r\n    isDeleted(productId: number): boolean {\r\n        let i = this.cartItems.findIndex(v => v.$isDeleted === true && v.product.id === productId);\r\n        return i !== -1;\r\n    }\r\n\r\n    getSelectedItem(): CartItem[] {\r\n        return this.cartItems.filter(v => {\r\n            let { $isSelected, $isDeleted } = v;\r\n            return $isSelected === true && $isDeleted !== true;\r\n        });\r\n    }\r\n\r\n    add(cartItem: CartItem) {\r\n        let { product, packs } = cartItem;\r\n        let { id: productId } = product;\r\n        let cartItemExists: CartItem = this.cartItems.find((element) => element.product.id === productId);\r\n        if (!cartItemExists) {\r\n            cartItem.$isSelected = true;\r\n            cartItem.$isDeleted = false;\r\n            this.cartItems.push(cartItem);\r\n            return;\r\n        }\r\n\r\n        let { $isDeleted, packs: packsExists } = cartItemExists;\r\n        if ($isDeleted === true) {\r\n            packs.splice(0);\r\n        }\r\n        cartItemExists.$isDeleted = false;\r\n        cartItemExists.$isSelected = true;\r\n\r\n        let { pack, price, currency, quantity, inventoryAllocation, futureDeliveryTimeDescription } = packs[0];\r\n        let piPack: CartPackRow = packsExists.find(v => v.pack.id === pack.id);\r\n        if (piPack === undefined) {\r\n            cartItemExists.packs.push(packs[0]);\r\n        }\r\n        else {\r\n            piPack.price = price;\r\n            piPack.quantity = quantity;\r\n            piPack.currency = currency;\r\n            piPack.futureDeliveryTimeDescription = futureDeliveryTimeDescription;\r\n            piPack.inventoryAllocation = inventoryAllocation;\r\n        }\r\n    }\r\n\r\n    removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        if (rows && rows.length > 0) {\r\n            rows.forEach(pe => {\r\n                let cartItemIndex = this.cartItems.findIndex(e => e.product.id === pe.productId);\r\n                if (cartItemIndex >= 0) {\r\n                    let cartItem = this.cartItems[cartItemIndex];\r\n                    let i = cartItem.packs.findIndex(e => e.pack.id === pe.packId)\r\n                    if (i >= 0) {\r\n                        cartItem.packs.splice(i, 1);\r\n                        if (cartItem.packs.length === 0) {\r\n                            this.cartItems.splice(cartItemIndex, 1);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport class CartServiceFactory {\r\n\r\n    static getCartService(cApp: CCartApp) {\r\n        if (cApp.isLogined)\r\n            return new CartRemoteService(cApp);\r\n        return new CartLocalService(cApp);\r\n    }\r\n}\r\n\r\nexport abstract class CartService {\r\n\r\n    protected cApp: CCartApp;\r\n    private getInventoryAllocationQuery: Query;\r\n    private packTuid: TuidDiv;\r\n\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n        let { cUqWarehouse, cUqProduct } = this.cApp;\r\n        this.getInventoryAllocationQuery = cUqWarehouse.query(\"getInventoryAllocation\");\r\n        this.packTuid = cUqProduct.tuidDiv('productx', 'packx');\r\n    }\r\n\r\n    abstract get isLocal(): boolean;\r\n    abstract async load(): Promise<CartViewModel>;\r\n\r\n    protected async generateCartItems(cartData: any): Promise<CartViewModel> {\r\n\r\n        let result = new CartViewModel();\r\n        if (cartData) {\r\n            for (let cd of cartData) {\r\n                let { product: productId, createdate, packs } = cd;\r\n                result.cartItems.push(await this.generateCartItem(productId, packs))\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    protected async generateCartItem(productId: number, packs: any[]): Promise<CartItem> {\r\n\r\n        let cartItem: CartItem = {} as any;\r\n        let productService = new LoaderProductChemical(this.cApp);\r\n        cartItem.product = await productService.load(productId);\r\n        cartItem.createdate = Date.now();\r\n        cartItem.$isSelected = true;\r\n        cartItem.$isDeleted = false;\r\n\r\n        cartItem.packs = [];\r\n        if (packs !== undefined) {\r\n            for (let p of packs) {\r\n                let { pack: packId, price, quantity, currency } = p;\r\n                let packItem: CartPackRow = {\r\n                    pack: this.packTuid.boxId(packId),\r\n                    price: price,\r\n                    quantity: quantity,\r\n                    currency: currency,\r\n                };\r\n                packItem.inventoryAllocation =\r\n                    await this.getInventoryAllocationQuery.table({ product: productId, pack: packId, salesRegion: this.cApp.currentSalesRegion })\r\n                cartItem.packs.push(packItem);\r\n            }\r\n        }\r\n        return cartItem;\r\n    }\r\n\r\n    abstract async addToCart(cartViewModel: CartViewModel, productId: number, packId: number, quantity: number, price: number, currency: any);\r\n\r\n    abstract async removeFromCart(cartViewModel: CartViewModel, rows: [{ productId: number, packId: number }]);\r\n\r\n    abstract async clear(cartViewModel: CartViewModel);\r\n\r\n    abstract async merge(source: CartViewModel);\r\n}\r\n\r\nexport class CartRemoteService extends CartService {\r\n    private getCartQuery: Query;\r\n    private setCartAction: Action;\r\n    private removeFromCartAction: Action;\r\n    private mergeCartAction: Action;\r\n\r\n    get isLocal(): boolean { return false }\r\n\r\n    constructor(cApp: CCartApp) {\r\n        super(cApp);\r\n\r\n        let { cUqOrder } = this.cApp;\r\n        this.getCartQuery = cUqOrder.query('getcart')\r\n        this.setCartAction = cUqOrder.action('setcart');\r\n        this.removeFromCartAction = cUqOrder.action('removefromcart');\r\n        this.mergeCartAction = cUqOrder.action('mergeCartAction');\r\n    }\r\n\r\n    async load(): Promise<CartViewModel> {\r\n        let cartData = await this.getCartQuery.page(undefined, 0, 100);\r\n        let cartData2 = groupByProduct(cartData);\r\n        return await this.generateCartItems(cartData2);\r\n    }\r\n\r\n    /**\r\n     * 添加购物车\r\n     * @param pack 要添加到购物车中的包装\r\n     * @param quantity 要添加到购物车中包装的个数\r\n     */\r\n    async addToCart(cartViewModel: CartViewModel, productId: number, packId: number, quantity: number, price: number, currency: any) {\r\n        let param = {\r\n            product: productId,\r\n            pack: packId,\r\n            price: price,\r\n            currency: currency,\r\n            quantity: quantity\r\n        }\r\n\r\n        try {\r\n            await this.setCartAction.submit(param);\r\n            let cartItem: CartItem = await this.generateCartItem(productId\r\n                , [{ pack: packId, price: price, quantity: quantity, currency: currency && currency.id }]);\r\n            cartViewModel.add(cartItem);\r\n        } catch (error) {\r\n\r\n        }\r\n    }\r\n\r\n    async removeFromCart(cartViewModel: CartViewModel, rows: [{ productId: number, packId: number }]) {\r\n        if (rows && rows.length > 0) {\r\n            cartViewModel.removeFromCart(rows);\r\n            let param = rows.map(e => { return { product: e.productId, pack: e.packId } });\r\n            await this.removeFromCartAction.submit({ rows: param })\r\n        }\r\n    }\r\n\r\n    async clear(cartViewModel: CartViewModel) {\r\n        let param = cartViewModel.cartItems.map(v => {\r\n            let { product, packs } = v;\r\n            return {\r\n                product: product,\r\n                ...packs\r\n            }\r\n        })\r\n        await this.removeFromCartAction.submit({ rows: param });\r\n    }\r\n\r\n    async merge(source: CartViewModel) {\r\n        let param = source.cartItems.map(v => {\r\n            let { product, packs } = v;\r\n            return {\r\n                product: product,\r\n                ...packs\r\n            }\r\n        })\r\n        await this.mergeCartAction.submit({ rows: param });\r\n        return await this.load();\r\n    }\r\n}\r\n\r\nconst LOCALCARTNAME: string = \"cart\";\r\nexport class CartLocalService extends CartService {\r\n\r\n    constructor(cApp: CCartApp) {\r\n        super(cApp);\r\n    }\r\n\r\n    get isLocal(): boolean { return true }\r\n\r\n    async load(): Promise<CartViewModel> {\r\n        try {\r\n            let cartstring = localStorage.getItem(LOCALCARTNAME);\r\n            let cartData = JSON.parse(cartstring);\r\n            return await this.generateCartItems(cartData);\r\n        }\r\n        catch {\r\n            localStorage.removeItem(LOCALCARTNAME);\r\n        }\r\n    }\r\n\r\n    async addToCart(cartViewModel: CartViewModel, productId: number, packId: number, quantity: number, price: number, currency: any) {\r\n\r\n        let cartItem: CartItem = await this.generateCartItem(productId\r\n            , [{ pack: packId, price: price, quantity: quantity, currency: currency && currency.id }]);\r\n        cartViewModel.add(cartItem);\r\n\r\n        this.save(cartViewModel);\r\n    }\r\n\r\n    async removeFromCart(cartViewModel: CartViewModel, rows: [{ productId: number, packId: number }]) {\r\n        cartViewModel.removeFromCart(rows);\r\n        this.save(cartViewModel);\r\n    }\r\n\r\n    private save(cartViewModel: CartViewModel) {\r\n        let items = cartViewModel.cartItems.map(e => {\r\n            let { product, packs } = e;\r\n            return {\r\n                product: product.id,\r\n                packs: packs && packs.map(v => {\r\n                    let { pack, price, currency, quantity } = v;\r\n                    return {\r\n                        pack: pack.id,\r\n                        price: price,\r\n                        currency: currency && currency.id,\r\n                        quantity: quantity,\r\n                    }\r\n                }),\r\n            }\r\n        });\r\n\r\n        let text = JSON.stringify(items);\r\n        localStorage.setItem(LOCALCARTNAME, text);\r\n    }\r\n\r\n    clear(cartViewModel: CartViewModel) {\r\n        localStorage.removeItem(LOCALCARTNAME);\r\n    }\r\n\r\n    async merge(source: CartViewModel) {\r\n    }\r\n\r\n}","import * as React from 'react';\r\nimport { Page, nav } from 'tonva';\r\nimport logo from '../images/logo.png';\r\n\r\nexport class About extends React.Component {\r\n    private showLogs = () => {\r\n        nav.push(<Page header=\"Logs\">\r\n            <div>NODE_ENV: {process.env.NODE_ENV}</div>\r\n            {nav.logs.map((v, i) => {\r\n                return <div key={i} className=\"px-3 py-1\">{v}</div>;\r\n            })}\r\n        </Page>);\r\n    }\r\n\r\n    render() {\r\n        let right = null; //<button className='btn btn-success btn-sm' onClick={this.showLogs}>log</button>;\r\n        return <Page header=\"关于百灵威\" right={right}>\r\n            <div className='m-3'>\r\n                <img className=\"h-3c position-absolute\" src={logo} />\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <span className=\"text-primary mr-3\">百灵威集团</span>\r\n                </div>\r\n                <p className=\"mt-5\">\r\n                    &emsp;&emsp;百灵威科技有限公司致力于研发和生产化学及相关产品。集敏捷制造、全球营销和现代物流为一体。\r\n                    在中国内地、香港，欧洲及北美等多个国家和地区设有物流中心，提供专业化、个性化的一站式服务。\r\n                    为全球超过200,000 名科技和工业领域的客户提供产品资源及配套技术服务。\r\n                </p>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { userApi, ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page, Edit, UiSchema, VPage, UiRadio } from 'tonva';\r\nimport { CMe } from './CMe';\r\n\r\nexport class EditMeInfo extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            nick: { widget: 'text', label: '别名', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n        }\r\n    }\r\n    @observable private data: any;\r\n\r\n    @observable private webUserData: any;\r\n\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone, mobile, email } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email\r\n        }\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        nav.user[name] = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"个人信息\">\r\n            <Edit schema={this.schema} uiSchema={this.uiSchema}\r\n                data={this.data}\r\n                onItemChanged={this.onItemChanged} />\r\n            <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                data={this.webUserData}\r\n                onItemChanged={this.onWebUserChanged} />\r\n            <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema}\r\n                data={this.webUserContactData}\r\n                onItemChanged={this.onWebUserContactChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport const webUserSchema: ItemSchema[] = [\r\n    { name: 'firstName', type: 'string', required: true } as StringSchema,\r\n    { name: 'gender', type: 'string' } as StringSchema,\r\n    { name: 'salutation', type: 'string' } as StringSchema,\r\n    { name: 'organizationName', type: 'string', required: true } as StringSchema,\r\n    { name: 'departmentName', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport const webUserUiSchema: UiSchema = {\r\n    items: {\r\n        firstName: { widget: 'text', label: '真实姓名', placeholder: '化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。为此，需要您重新提供非虚拟的、可核查的信息。' } as UiTextItem,\r\n        gender: { widget: 'radio', label: '性别', list: [{ value: '1', title: '男' }, { value: '0', title: '女' }], defaultValue: 1 } as UiRadio,\r\n        salutation: { widget: 'text', label: '称谓' } as UiTextItem,\r\n        organizationName: { widget: 'text', label: '单位名称' } as UiTextItem,\r\n        departmentName: { widget: 'text', label: '部门名称' } as UiTextItem,\r\n    }\r\n}\r\n\r\n// 个人联系方式信息\r\nexport const webUserContactSchema: ItemSchema[] = [\r\n    { name: 'telephone', type: 'string' } as StringSchema,\r\n    { name: 'mobile', type: 'string', required: true } as StringSchema,\r\n    { name: 'email', type: 'string' } as StringSchema,\r\n];\r\nexport const webUserContactUiSchema: UiSchema = {\r\n    items: {\r\n        telephone: { widget: 'text', label: '固定电话' } as UiTextItem,\r\n        mobile: { widget: 'text', label: '移动电话' } as UiTextItem,\r\n        email: {\r\n            widget: 'text', label: 'Email',\r\n            rules: (value: any) => {\r\n                if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n                    return \"Email格式不正确。\";\r\n                else\r\n                    return undefined;\r\n            },\r\n            placeholder: 'Email'\r\n        } as UiTextItem,\r\n    }\r\n}","import * as React from 'react';\r\nimport { nav, User, Page, Image, VPage } from 'tonva';\r\nimport { Prop, Media, IconText, FA, PropGrid, LMR } from 'tonva';\r\nimport { About } from './about';\r\nimport { observer } from 'mobx-react';\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\n\r\nexport class VMe extends VPage<CMe> {\r\n\r\n    async open(param?: any) {\r\n\r\n    }\r\n\r\n    private exit() {\r\n        nav.showLogout();\r\n    }\r\n\r\n    private about = () => nav.push(<About />);\r\n\r\n    private changePassword = async () => {\r\n        await nav.changePassword();\r\n        // nav.push(<ChangePasswordPage />);\r\n    }\r\n\r\n    private openContactList = async () => {\r\n        this.controller.openContactList();\r\n    }\r\n\r\n    private openInvoice = async () => {\r\n        this.controller.openInvoice();\r\n    }\r\n\r\n    private meInfo = observer(() => {\r\n        let { user } = nav;\r\n        if (user === undefined) return null;\r\n        let { id, name, nick, icon } = user;\r\n        return <LMR className=\"py-2 cursor-pointer w-100\"\r\n            left={<Image className=\"w-3c h-3c mr-3\" src={icon} />}\r\n            right={<FA className=\"align-self-end\" name=\"chevron-right\" />}\r\n            onClick={() => {\r\n                this.openVPage(EditMeInfo);\r\n            }}>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-muted\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </LMR>;\r\n    });\r\n\r\n    private orderStates = () => {\r\n\r\n        let { openMyOrders } = this.controller;\r\n        return <div className=\"d-flex justify-content-around w-100 my-3\">\r\n            <div className=\"d-flex flex-column align-items-center\" onClick={() => openMyOrders('pendingpayment')}>\r\n                <FA name=\"file-text-o\" className=\"text-info fa-2x\" />\r\n                <small>待付款</small>\r\n            </div>\r\n            <div className=\"d-flex flex-column align-items-center\" onClick={() => openMyOrders('all')}>\r\n                <FA name=\"file-text-o\" className=\"text-info fa-2x\" />\r\n                <small>所有订单</small>\r\n            </div>\r\n        </div>\r\n    };\r\n\r\n    render() {\r\n        const { user } = nav;\r\n        let aboutRows: Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于百灵威\" />,\r\n                onClick: this.about\r\n            },\r\n            '',\r\n        ];\r\n\r\n        let rows: Prop[];\r\n        if (user === undefined) {\r\n            rows = aboutRows;\r\n            rows.push('');\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    component: <button className=\"btn btn-success w-100\" onClick={() => nav.showLogin(undefined, true)}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                    </button>\r\n                },\r\n            );\r\n        }\r\n        else {\r\n            let logOutRows: Prop[] = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    bk: '',\r\n                    component: <button className=\"btn btn-danger w-100\" onClick={this.exit}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 退出登录\r\n                </button>\r\n                },\r\n            ];\r\n\r\n            rows = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.meInfo />\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.orderStates />,\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"地址管理\" />,\r\n                    onClick: this.openContactList\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"发票管理\" />,\r\n                    onClick: this.openInvoice\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text=\"修改密码\" />,\r\n                    onClick: this.changePassword\r\n                },\r\n            ]\r\n            rows.push(...aboutRows, ...logOutRows);\r\n        }\r\n        return <PropGrid rows={rows} values={{}} />;\r\n    }\r\n}\r\n\r\n\r\nfunction userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page, Edit, UiSchema, VPage } from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport { webUserSchema, webUserUiSchema, webUserContactSchema, webUserContactUiSchema } from './EditMeInfo';\r\nimport { FA, LMR } from 'tonva';\r\n\r\nexport class EditMeInfoFirstOrder extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    @observable private webUserData: any;\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone, mobile, email } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email\r\n        }\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"首次下单补充个人信息\">\r\n            <div className=\"alert alert-primary small\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning mr-3 my-1 float-left\" size=\"3x\" />\r\n                化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。\r\n                为此，需要您重新提供非虚拟的、可核查的信息。这些信息包括下面所有带有 <span className=\"text-danger\">*</span> 的信息。\r\n            </div>\r\n            <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                data={this.webUserData}\r\n                onItemChanged={this.onWebUserChanged} />\r\n            <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema}\r\n                data={this.webUserContactData}\r\n                onItemChanged={this.onWebUserContactChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Controller } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VMe } from './VMe';\r\nimport { CSelectShippingContact } from 'customer/CSelectContact';\r\nimport { EditMeInfoFirstOrder } from './EditMeInfoFirstOrder';\r\nimport { CInvoiceInfo } from 'customer/CInvoiceInfo';\r\n\r\nexport class CMe extends Controller {\r\n\r\n    cApp: CCartApp;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    protected async internalStart() {\r\n\r\n    }\r\n\r\n    async changeWebUser(webUser: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUser(webUser);\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUserContact(webUserContact);\r\n    }\r\n\r\n    tab = () => <this.renderMe />\r\n\r\n    private renderMe = () => {\r\n        return this.renderView(VMe);\r\n    }\r\n\r\n    openMyOrders = async (state: string) => {\r\n        let { cOrder } = this.cApp;\r\n        await cOrder.openMyOrders(state);\r\n    }\r\n\r\n    openContactList = async () => {\r\n        let contactList = new CSelectShippingContact(this.cApp, undefined, false);\r\n        await contactList.start();\r\n    }\r\n\r\n    openInvoice = async () => {\r\n        let cInvoiceInfo = new CInvoiceInfo(this.cApp, undefined);\r\n        cInvoiceInfo.start();\r\n    }\r\n\r\n    openMeInfoFirstOrder = async () => {\r\n        await this.openVPage(EditMeInfoFirstOrder);\r\n    }\r\n}","import * as React from 'react';\r\nimport { TuidUI, tv, UqUI } from 'tonva';\r\n\r\nexport const addressUI: TuidUI = {\r\n    content: (values: any) => {\r\n        let { country, province, city, county } = values;\r\n        return <>\r\n            {tv(country)}{tv(province, undefined, undefined, () => <></>)}{tv(city, undefined, undefined, () => <></>)}{tv(county, undefined, undefined, () => <></>)}\r\n        </>\r\n    }\r\n}\r\n\r\nexport const countryUI: TuidUI = {\r\n    content: (values: any) => {\r\n        return <> {values.chineseName} </>;\r\n    }\r\n}\r\n\r\nexport const currencyUI: TuidUI = {\r\n    content: (values: any) => {\r\n        return <> {values.name} </>;\r\n    }\r\n}\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: {\r\n        address: addressUI,\r\n        country: countryUI,\r\n        province: countryUI,\r\n        city: countryUI,\r\n        county: countryUI,\r\n        currency: currencyUI,\r\n    },\r\n}\r\n\r\nexport default uqUI;\r\n","import * as React from 'react';\r\nimport { TuidUI, tv } from 'tonva';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nexport const productUI: TuidUI = {\r\n    content: (values: any) => {\r\n        let product = values;\r\n        let { brand, description, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"row d-flex\">\r\n            <div className=\"col-12\">\r\n                <div className=\"row py-2\">\r\n                    <div className=\"col-12\"><strong>{description}</strong></div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                    </div>\r\n                    <div className=\"col-9\">\r\n                        <div className=\"row\">\r\n                            {item('CAS', CAS)}\r\n                            {item('纯度', purity)}\r\n                            {item('分子式', molecularFomula)}\r\n                            {item('分子量', molecularWeight)}\r\n                            {item('产品编号', origin)}\r\n                            {tv(brand, (values: any) => <>{item(\"品牌\", values.name)}</>)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    },\r\n    divs: {\r\n        packx: {\r\n            content: (values: any) => {\r\n                let { radiox, radioy, unit } = values;\r\n                if (radiox !== 1) return <>{radiox} * {radioy}{unit}</>;\r\n                return <>{radioy}{unit}</>;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction item(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 text-muted pr-0\">{caption}:</div>\r\n        <div className=\"col-8\">{value}</div>\r\n    </>;\r\n}","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\n\r\nexport const contactUI = {\r\n    content: (values: any) => {\r\n        let { name, mobile, organizationName, address, addressString } = values;\r\n        return <div className=\"flex-grow-1\">\r\n            <b>\r\n                {name}\r\n            </b>\r\n            &nbsp; {mobile} &nbsp; {organizationName}<br />\r\n            <small>{tv(address)} {addressString}</small>\r\n        </div>\r\n    }\r\n}","import { UqUI } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import { contactUI } from './contact';\r\nimport { addressUI, countryUI } from 'ui/common';\r\nimport { invoiceInfoUI, invoiceTypeUI } from './invoice';\r\n\r\nexport default {\r\n    contact: contactUI,\r\n    address: addressUI,\r\n    country: countryUI,\r\n    province: countryUI,\r\n    city: countryUI,\r\n    county: countryUI,\r\n    invoiceInfo: invoiceInfoUI,\r\n    invoiceType: invoiceTypeUI\r\n}","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\n\r\nexport const invoiceTypeUI = {\r\n    content: (values: any) => {\r\n        let { id, description } = values;\r\n        return <div className=\"flex-grow-1\">\r\n            {description}\r\n        </div>\r\n    }\r\n}\r\n\r\n\r\nexport const invoiceInfoUI = {\r\n    content: (values: any) => {\r\n        let { title, taxNo } = values;\r\n        return <div className=\"flex-grow-1\">\r\n            <b>\r\n                {title}\r\n            </b>\r\n            &nbsp; {taxNo}\r\n        </div>\r\n    }\r\n}\r\n","import { AppUI, CApp } from 'tonva';\r\nimport { VHome } from './main';\r\nimport { CCartApp } from '../CCartApp';\r\nimport commonUI from './common';\r\nimport orderUI from './order';\r\nimport productUI from './product';\r\nimport customerUI from './customer';\r\nimport warehouseUI from './warehouse';\r\nimport { jnkTop } from '../me/loginTop';\r\n\r\nconst ui: AppUI = {\r\n    appName: \"百灵威系统工程部/cart\",\r\n    CApp: CCartApp,\r\n    main: VHome,\r\n    uqs: {\r\n        '百灵威系统工程部/common': commonUI,\r\n        '百灵威系统工程部/order': orderUI,\r\n        '百灵威系统工程部/product': productUI,\r\n        '百灵威系统工程部/customer': customerUI,\r\n        '百灵威系统工程部/webUser': customerUI,\r\n        '百灵威系统工程部/warehouse': warehouseUI,\r\n    },\r\n    loginTop: jnkTop,\r\n}\r\n\r\nexport default ui;\r\n","//import * as React from 'react';\r\nimport { User, nav } from 'tonva';\r\nimport { CApp, CUq } from 'tonva';\r\nimport { CCart } from 'cart/CCart';\r\nimport { CProduct } from 'product';\r\nimport { COrder } from 'order/COrder';\r\nimport { CHome } from './home/CHome';\r\nimport { CProductCategory } from 'productCategory/CProductCategory';\r\n//import { CSelectContact } from 'customer/CSelectContact';\r\nimport { CMember } from 'member/CMember';\r\nimport { WebUser } from 'CurrentUser';\r\nimport { consts } from './home/consts';\r\nimport { CartViewModel, CartService, CartRemoteService, CartLocalService, CartServiceFactory } from 'cart/Cart2';\r\nimport { CMe } from 'me/CMe';\r\nimport { Cart } from 'cart/Cart';\r\n\r\nexport class CCartApp extends CApp {\r\n    cart: Cart;\r\n    cartService: CartService;\r\n    cartViewModel: CartViewModel;\r\n    topKey: any;\r\n\r\n    currentSalesRegion: any;\r\n    currentLanguage: any;\r\n    currentUser: WebUser;\r\n\r\n    cUqOrder: CUq;\r\n    cUqProduct: CUq;\r\n    cUqCommon: CUq;\r\n    cUqWebUser: CUq;\r\n    cUqCustomer: CUq;\r\n    cUqCustomerDiscount: CUq;\r\n    cUqPromotion: CUq;\r\n    cUqWarehouse: CUq;\r\n    cUqMember: CUq;\r\n\r\n    cHome: CHome;\r\n    cCart: CCart;\r\n    cProduct: CProduct;\r\n    cOrder: COrder;\r\n    //cSelectContact: CSelectContact;\r\n    cProductCategory: CProductCategory;\r\n    cMember: CMember;\r\n    cMe: CMe;\r\n\r\n    protected async internalStart() {\r\n        this.cUqOrder = this.getCUq(consts.uqOrder);\r\n        this.cUqProduct = this.getCUq(consts.uqProduct);\r\n        this.cUqCommon = this.getCUq(consts.uqCommon);\r\n        this.cUqWebUser = this.getCUq(consts.uqWebUser);\r\n        this.cUqCustomer = this.getCUq(consts.uqCustomer);\r\n        this.cUqCustomerDiscount = this.getCUq(consts.uqCustomerDiscount);\r\n        this.cUqPromotion = this.getCUq(consts.uqPromotion);\r\n        this.cUqWarehouse = this.getCUq(consts.uqWarehouse);\r\n        this.cUqMember = this.getCUq(consts.uqMember);\r\n\r\n        let salesRegionTuid = this.cUqCommon.tuid('salesregion');\r\n        this.currentSalesRegion = await salesRegionTuid.load(1);\r\n\r\n        let languageTuid = this.cUqCommon.tuid('language');\r\n        this.currentLanguage = await languageTuid.load(197);\r\n\r\n        this.currentUser = new WebUser(this.cUqWebUser, this.cUqCustomer);\r\n        if (this.isLogined) {\r\n            this.currentUser.setUser(this.user);\r\n        }\r\n\r\n        this.cartService = CartServiceFactory.getCartService(this);\r\n        this.cartViewModel = await this.cartService.load();\r\n\r\n        this.cProductCategory = new CProductCategory(this, undefined);\r\n        this.cCart = new CCart(this, undefined);\r\n        this.cHome = new CHome(this, undefined);\r\n        this.cProduct = new CProduct(this, undefined);\r\n        this.cOrder = new COrder(this, undefined);\r\n        //this.cSelectContact = new CSelectContact(this, undefined);\r\n        this.cMember = new CMember(this, undefined);\r\n        this.cMe = new CMe(this, undefined);\r\n\r\n        let promises: PromiseLike<void>[] = [];\r\n        promises.push(this.cProductCategory.start());\r\n        await Promise.all(promises);\r\n        this.showMain();\r\n        this.topKey = nav.topKey();\r\n    }\r\n\r\n    showMain(initTabName?: string) {\r\n        // eeee\r\n        this.openVPage(this.VAppMain, initTabName);\r\n    }\r\n\r\n    async loginCallBack(user: User) {\r\n        if (this.cartService.isLocal) {\r\n            let cartLocal = { ...this.cartViewModel } as CartViewModel;\r\n            // this.cartService.clear(this.cartViewModel);\r\n            this.cartService = CartServiceFactory.getCartService(this);\r\n            this.cartViewModel = await this.cartService.load();\r\n            // this.cartViewModel = await this.cartService.merge(cartLocal);\r\n        }\r\n    }\r\n\r\n    protected onDispose() {\r\n        this.cartViewModel.dispose();\r\n    }\r\n}\r\n","import { UqUI, Tuid } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import { countryUI, addressUI, currencyUI } from 'ui/common';\r\nimport { productUI } from 'ui/product/tuid/product';\r\nimport { contactUI } from 'ui/customer/tuid/contact';\r\n\r\nexport default {\r\n    productx: productUI,\r\n    address: addressUI,\r\n    country: countryUI,\r\n    province: countryUI,\r\n    city: countryUI,\r\n    county: countryUI,\r\n    contact: contactUI,\r\n    currency: currencyUI,\r\n}","import { UqUI, Tuid } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import { productCategoryUI } from './productCategory';\r\nimport { productUI } from './product';\r\n\r\nexport default {\r\n    productx: productUI,\r\n    productCategory: productCategoryUI,\r\n}\r\n","import * as React from 'react';\r\n\r\nexport const productCategoryUI = {\r\n\r\n    content: (values: any) => {\r\n        let { children } = values;\r\n        return <>\r\n            aaa\r\n        </>\r\n    }\r\n}","import { UqUI, Tuid } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import * as React from 'react';\r\nimport { TuidUI } from 'tonva';\r\n\r\nconst warehouse: TuidUI = {\r\n    content: (values: any) => {\r\n        let { name } = values;\r\n        return <div>\r\n            {name}\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default {\r\n    warehouse: warehouse,\r\n}\r\n","import * as React from 'react';\r\nimport logo from '../images/logo.png';\r\n\r\nexport const jnkTop = <div className=\"d-flex align-items-center\">\r\n    <img className=\"h-3c position-absolute\" src={logo} />\r\n    <div className=\"h3 flex-fill text-center\">\r\n        <span className=\"text-primary mr-3\">百灵威</span>\r\n    </div>\r\n</div>;\r\n","\r\nimport * as React from 'react';\r\nimport './App.css';\r\nimport { NavView, nav, Page, Tabs } from 'tonva';\r\nimport { startApp } from 'tonva';\r\nimport ui from './ui';\r\n//import { faceTabs } from 'facetabs';\r\n\r\n//const tonvaApp = \"bruce/TestApp\";\r\n\r\nclass App extends React.Component {\r\n\r\n  private onLogined = async () => {\r\n    await startApp(ui);\r\n    /*\r\n    let page = <Page header={false}>\r\n      <Tabs tabs={faceTabs} />\r\n    </Page>\r\n    nav.push(page);\r\n    */\r\n    //let b = new B('b');\r\n    //await b.d();\r\n    //nav.push(<div>ddd</div>)\r\n  }\r\n  public render() {\r\n    return <NavView onLogined={this.onLogined} notLogined={this.onLogined} />\r\n  }\r\n}\r\n\r\nexport default App;\r\n\r\n/*\r\nclass B extends A {\r\n  constructor(b:string) {\r\n    super(b);\r\n  }\r\n  //get super() {return this.A}\r\n  async test():Promise<string> {return 'B'}\r\n  async superTest() {\r\n    console.log('superTest: ' + super.t())\r\n    return super.test()\r\n  }\r\n  t() {return 'tb'}\r\n  async d() {\r\n    console.log(super.test);\r\n    console.log(this.test);\r\n    console.log(super.t);\r\n    console.log(this.t);\r\n    console.log('A.test ' + await this.superTest());\r\n    console.log('B.test ' + await this.test());\r\n    console.log('A.t ' + super.t());\r\n    console.log('B.t ' + this.t());\r\n  }\r\n}\r\n*/","// tslint:disable:no-console\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the 'N+1' visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL!,\n      window.location.toString()\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker) {\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the old content will have been purged and\n                // the fresh content will have been added to the cache.\n                // It's the perfect time to display a 'New content is\n                // available; please refresh.' message in your web app.\n                console.log('New content is available; please refresh.');\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // 'Content is cached for offline use.' message.\n                console.log('Content is cached for offline use.');\n              }\n            }\n          };\n        }\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type')!.indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root') as HTMLElement\n);\nregisterServiceWorker();\n"],"sourceRoot":""}