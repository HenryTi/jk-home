{"version":3,"sources":["ui/main.tsx","cart/VCartLabel.tsx","tools/minusPlusWidget.tsx","cart/VCart.tsx","cart/CCart.tsx","tools/productImage.tsx","product/VProduct.tsx","product/VProductList.tsx","mainSubs/loader.ts","tools/productChemical.ts","product/itemLoader.ts","product/VProductDelivery.tsx","product/VProductView.tsx","product/VChemicalInfo.tsx","product/CProduct.tsx","order/VCreateOrder.tsx","order/Order.ts","order/OrderSuccess.tsx","customer/VContactList.tsx","tools/inputValidations.ts","customer/VContact.tsx","customer/VAddress.tsx","customer/CAddress.tsx","customer/CSelectContact.tsx","order/VMyOrders.tsx","order/VOrderDetail.tsx","customer/VInvoiceInfo.tsx","customer/CInvoiceInfo.tsx","tools/groupByProduct.ts","order/VCouponEdit.tsx","order/CCoupon.tsx","order/COrder.tsx","home/VSearchHeader.tsx","home/VSiteHeader.tsx","home/VHome.tsx","home/CHome.tsx","productCategory/VRootCategory.tsx","productCategory/VCategory.tsx","productCategory/CProductCategory.tsx","member/VMember.tsx","member/CMember.tsx","CurrentUser.ts","home/consts.ts","me/about.tsx","me/EditMeInfo.tsx","me/VMe.tsx","me/EditMeInfoFirstOrder.tsx","me/CMe.tsx","cart/Cart.ts","CCartApp.tsx","ui/common.tsx","ui/product/tuid/product.tsx","ui/customer/tuid/contact.tsx","ui/order/index.tsx","ui/order/tuid/index.tsx","ui/product/index.tsx","ui/product/tuid/index.tsx","ui/product/tuid/productCategory.tsx","ui/customer/index.tsx","ui/customer/tuid/index.tsx","ui/customer/tuid/invoice.tsx","ui/warehouse/index.tsx","ui/warehouse/tuid/index.tsx","me/loginTop.tsx","ui/index.tsx","App.tsx","registerServiceWorker.ts","index.tsx","images/logo.png","mainSubs/mainSubs.tsx","mainSubs/render.tsx","mainSubs/index.ts","images/pig.png","images/AnalyticalChemistry.png","images/LabSupplies.png","images/LifeScience.png","images/MaterialScience.png","images/OrganicChemistry.png"],"names":["main_color","selected","main_VHome","_super","VHome","_this","apply","this","arguments","render","param","_a","controller","cHome","cCart","cMember","cMe","cart","faceTabs","name","label","icon","content","tab","notify","undefined","count","map","v","caption","Object","dist","react","header","tabs","tslib_es6","prototype","open","openPage","VCartLabel_VCartLabel","VCartLabel","showCart","start","index_module","badge","onClick","pointer","cApp","get","className","classnames_default","keys","minusPlusWidget_MinusPlusWidget","MinusPlusWidget","minusClick","getValue","setValue","plusClick","ref","input","p","parentElement","tagName","disabled","renderContent","renderTemplet","cn","hasError","itemSchema","required","cursorPointer","minusColor","plusColor","hasFocus","hasAction","readOnly","hasValue","NaN","value","minus","invisible","type","defaultValue","onChange","placeholder","onKeyDown","onFocus","evt","onBlur","maxLength","plus","renderErrors","isValidKey","key","find","call","mobx_module","cartSchema","arr","VCart_VCart","VCart","CheckOutButton","checkOut","amount","renderCartItem","item","product","onProductClick","renderCartProduct","packsRow","pack","price","currency","renderDeliveryTime","uiSchema","selectable","deletable","restorable","items","list","widget","Templet","ArrContainer","RowContainer","packs","RowSeperator","quantity","WidgetClass","onChanged","onQuantityChanged","cartForm","cartData","data","schema","formData","test","row","cartItems","testButton","page","params","footer","length","empty","size","CCart_CCart","CCart","res","context","prev","parentData","add","_b","sent","removeFromCart","productId","id","packId","onRowStateChanged","deleted","alert","loginCallback","user","Promise","currentUser","setUser","loginCallBack","closePage","doCheckOut","selectedCartItems","getSelectedItems","isLogined","showLogin","cOrder","renderView","cProduct","internalStart","openVPage","renderCartLabel","isDeleted","showProductDetail","imagePath","altimagePath","ProductImage","props","style","chemicalId","src","substr","altImage","VProduct_schema","VProduct_VProduct","VProduct","renderProduct","brand","description","descriptionC","CAS","purity","molecularFomula","molecularWeight","origin","imageUrl","productPropItem","renderBrand","arrTemplet","retail","vipPrice","promotionPrice","right","minPrice","retailUI","productBox","renderPack","renderSearchHeader","cartLabel","viewProduct","mainSubs","model","productData","Math","min","Infinity","VProductList_VProductList","VProductList","onScrollBottom","pageProducts","more","none","searchKey","before","loader_Loader","Loader","entities","schemaLoaded","initEntities","loadSchemas","all","load","initData","loadToData","productChemical_LoaderProductChemical","LoaderProductChemical","cUqProduct","productChemicalMap","obj","productChemical","chemical","itemLoader_LoaderBrand","LoaderBrand","brandTuid","tuid","brandId","itemLoader_LoaderProductWithChemical","LoaderProductWithChemical","productTuid","lodash_default","a","merge","brandLoader","packx","forEach","e","push","itemLoader_LoaderProductChemicalWithPrices","LoaderProductChemicalWithPrices","cUqCustomerDiscount","cUqPromotion","cUqWarehouse","getCustomerDiscount","query","priceMap","getPromotionPackQuery","main","subs","productLoader","_c","discount","currentSalesRegion","currentLanguage","hasCustomer","customer","currentCustomer","discountSetting","currentSalesRegionId","table","salesRegion","prices","filter","discountinued","expireDate","Date","now","element","ret","round","getQuantity","promises","language","results","i","promotion","discount_1","VProductDelivery_VProductDelivery","VProductDelivery","inventoryAllocationContainer","futureDeliveryTimeDescriptionContainer","inventoryAllocation","futureDeliveryTimeDescription","index","warehouse","deliveryTimeDescription","values","packObj","owner","getInventoryAllocation","getFutureDeliveryTimeDescription","VProductView_VCartProuductView","VCartProuductView","renderChemicalInfo","VChemicalInfo_VChemicalInfo","VProuductView","VChemicalInfo","chemicalInfo","chemicalInfoContainer","getChemicalInfo","CProduct_PageProducts","PageProducts","searchProductQuery","firstSize","pageSize","pageStart","setPageStart","seq","CProduct_CProduct","CProduct","renderPrice","salesRegionId","getInventoryAllocationQuery","getFutureDeliveryTime","futureDeliveryTime","minValue","maxValue","unit","searchByKey","first","keyWord","searchByCategory","category","productCategoryId","productCategory","captionClass","capClass","valClass","blankTime","VCreateOrder_VCreateOrder","VCreateOrder","useShippingAddress","shippingAddressIsBlank","invoiceAddressIsBlank","invoiceIsBlank","nullContact","parseFloat","toFixed","renderOrderItem","orderItem","renderOrderItemProduct","orderItemKey","renderCoupon","couponData","code","couponOffsetAmount","preferential","validitydate","isValid","couponRemitted","offsetUI","remittedUI","onSubmit","orderData","shippingContact","invoiceContact","invoiceType","invoiceInfo","setTimeout","submitOrder","onSelectShippingContact","onSelectInvoiceContact","openMeInfo","onInvoiceInfoEdit","onCouponEdit","fillMeInfo","role","allowOrdering","fontSize","chevronRight","shippingAddressBlankTip","invoiceAddressBlankTip","divInvoiceContact","invoiceContactUI","defaultChecked","currentTarget","checked","invoiceBlankTip","invoiceInfoUI","title","freightFeeUI","freightFeeRemittedUI","freightFee","freightFeeRemitted","couponUI","orderItems","productAmount","Order_Order","Order","defineProperty","reduce","pv","cv","subAmount","getDataForSave","oi","pk","webUser","organization","coupon","orderitems","Order_OrderItem","OrderItem","c","OrderSuccess_OrderSuccess","OrderSuccess","orderCreateResult","back","no","VContactList_VContactList","VContactList","onContactRender","contact","onEditContact","onContactSelected","onNewContact","userContacts","contactList","telephoneValidation","mobileValidation","emailValidation","faxValidation","addressDetailValidation","zipCodeValidation","organizationNameValidation","nameValidation","VContact_schema","VContact_VContact","VContact","visible","rules","organizationName","mobile","telephone","email","address","pickId","pickAddress","addressValue","country","province","city","county","chineseName","addressString","isDefault","submit","onSaveContact","form","buttonClick","onFormButtonClick","saveContact","onDelContact","userContactData","vCall","VContact_VConfirmDeleteContact","delContact","buttonDel","contactData","clone","fromOrderCreation","onButtonClick","fieldLabelSize","VConfirmDeleteContact","onConfirm","returnCall","onCancel","left","top","VAddress_VAddress","VAddress","backLevel","provinces","renderPCC","onProvinceClick","pcc","border","marginRight","marginBottom","provinceId","getProvinceCities","cities","len","onCityClick","openPageElement","saveAddress","cityId","getCityCounties","counties","onCountyClick","countyId","GLOABLE","CHINA","getCountryProvince","CAddress_CAddress","CAddress","countryId","getCountryProvincesQuery","getProvinceCitiesQuery","getCityCountiesQuery","addressTuid","save","newAddress","addressId","boxId","cUqCommon","CSelectContact_CSelectContact","CSelectContact","userContact","userContactId","contactTuid","getSetting","userSetting","getIsDefault","setDefaultContact","findIndex","splice","newContact","newContactId","contactBox","addContact","backPage","cUqCustomer","getContacts","userContactMaps","CSelectContact_CSelectShippingContact","CSelectShippingContact","contactId","setDefaultShippingContact","CSelectContact_CSelectInvoiceContact","CSelectInvoiceContact","setDefaultInvoiceContact","VMyOrders_VMyOrders","VMyOrders","renderOrder","order","openOrderDetail","date","discription","flow","pendingOrders","isSelected","currentState","getMyOrders","allOrders","tabPosition","VOrderDetail_VOrderDetail","VOrderDetail","brief","state","invoiceTypeUI","VOrderDetail_invoiceInfoUI","invoiceTemplate","taxNo","bank","accountNo","VInvoiceInfo_schema","VInvoiceInfo_uiSchema","commonRequired","valueAddedRequired","commonVisible","valueAddedVisible","VInvoiceInfo_VInvoiceInfo","VInvoiceInfo","showTip","saveTip","invoice","invoiceInfoData","saveInvoiceInfo","onSaveInvoice","onInvoiceTypeClick","event","parseInt","frm","buildForm","tipUI","htmlFor","origInvoice","assure","requiredFields","visibleFields","CInvoiceInfo_CInvoiceInfo","CInvoiceInfo","invoiceTypeTuid","invoiceInfoTuid","newInvoiceInfo","newInvoiceInfoId","invoiceBox","setDefaultInvoice","groupByProduct","packItems","result","cd","packRow","cpi","_i","packItems_1","VCouponEdit_VCouponEdit","VCouponEdit","applyCoupon","couponInput","tips","tipsUI","CCoupon_CCoupon","CCoupon","isValidCoupon","validationResult","rtn","cUqSalesTask","action","FREIGHTFEEFIXED","FREIGHTFEEREMITTEDSTARTPOINT","COrder_COrder","COrder","createOrderFromCart","removeCoupon","getDefaultShippingContact","_e","getDefaultInvoiceContact","getDefaultInvoiceType","_d","getDefaultInvoiceInfo","orderSheet","popTo","topKey","onSelectContact","typeSelectContact","getTime","openMyOrders","getPendingPaymentQuery","mySheets","cInvoiceInfo","newInvoice","orderId","getSheet","orderItemsGrouped","loaderProduct","openMeInfoFirstOrder","cUqOrder","sheet","getDefaultSetting","defaultSetting","getContact","contact0","contactArr","VSearchHeader_VSearchHeader","VSearchHeader","onSearch","VSiteHeader_VSiteHeader","VSiteHeader","logo_default","alt","height","width","VHome_VHome","renderCategoryRootList","siteHeader","renderVm","CHome_CHome","HomeSections","sectionTuid","search","CHome","cProductCategory","renderRootList","titleTitle","overflow","textOverflow","whiteSpace","subStyle","VRootCategory_VRootCategory","VRootCategory","categoryClick","categoryWapper","parent","labelColor","openMainPage","renderRootCategory","children","productCategoryID","ROOTCATEGORY","paddingRight","renderSubCategory","color","total","renderThirdCategory","categories","categories2","renderRoot","root","console","log","join","VCategory_VCategory","VCategory","renderChild","childWapper","breadCrumb","arial-babel","breadCrumbItem","categoryWaper","CProductCategory_CProductCategory","CProductCategory","getRootCategoryQuery","getRootCategoriesQuery","getChildrenCategoryQuery","buildCategories","secend","third","getCategoryChildren","parentCategoryId","firstCategory","secendCategory","stylePig","backgroundImage","backgroundSize","backgroundColor","opacity","position","VMember_VMember","VMember","recommendationCodeRef","member","recommendationCode","point","im","inviteCode","divPoints","pointThisWeek","pointAll","fansTitle","fansDetail","submitRecommendationCode","current","setReferrer","CMember_CMember","CMember","pop","cUqMember","memberAction","memberRecommenverMap","currentUserId","referrer","fans","CurrentUser_WebUser","WebUser","cUsqWebUser","cUsqCustomer","_user","nick","guest","token","loadWebUser","webUserTuid","webUserCustomerMap","webUserContactMap","webUserContactsMap","webUserSettingMap","firstName","gender","salutation","departmentName","fax","zipCode","webUserSettings","CurrentUser_Customer","init","arr1","del","saveDefaultSettings","invoiceTypeId","invoiceInfoId","changeWebUser","changeWebUserContact","webUserContact","Customer","contactMap","customerSettingMap","customerSettings","setDefaultSettings","consts","about_About","About","with_html_default","source","escapeHtml","EditMeInfo_EditMeInfo","EditMeInfo","onItemChanged","newValue","preValue","userSetProp","saveLocalUser","onWebUserChanged","webUserData","onWebUserContactChanged","webUserContactData","webUserSchema","webUserUiSchema","webUserContactSchema","webUserContactUiSchema","VMe_VMe","VMe","about","changePassword","openContactList","openInvoice","meInfo","userSpan","String","orderStates","exit","showLogout","rows","aboutRows","component","iconClass","text","logOutRows","bk","concat","EditMeInfoFirstOrder_EditMeInfoFirstOrder","EditMeInfoFirstOrder","CMe_CMe","CMe","pick","Cart_Cart","Cart","box","calcSum","cp","$isSelected","$isDeleted","packs_1","pi","Number","set","cartItemExists","packExists","createdate","cartStore","storeCart","disposer","dispose","Cart_CartRemote","Cart_CartLocal","cartDataGrouped","cpp","pe","cartItemIndex","cartItem","CartStore","CartRemote","getCartQuery","setCartAction","removeFromCartAction","CartLocal","packTuid","tuidDiv","cartstring","localStorage","getItem","JSON","parse","cartDataBoxed","productbox","packbox","removeItem","setItem","stringify","CCartApp_CCartApp","CCartApp","getCUq","cUqWebUser","salesRegionTuid","SALESREGION_CN","languageTuid","CHINESE","showMain","initTabName","VAppMain","onDispose","addressUI","countryUI","currencyUI","common","productUI","product_item","divs","radiox","radioy","contactUI","ui_order","productx","ui_product","ui_warehouse","jnkTop","ui","appName","CApp","uqs","百灵威系统工程部/common","百灵威系统工程部/order","百灵威系统工程部/product","百灵威系统工程部/customer","百灵威系统工程部/webUser","百灵威系统工程部/warehouse","loginTop","version","7","430","AnalyticalChemistry_default","986","LifeScience_default","1214","MaterialScience_default","1545","LabSupplies_default","src_ui","src_App_0","App","onLogined","notLogined","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","scope","then","registration","onupdatefound","installingWorker","installing","onstatechange","catch","error","react_dom","document","getElementById","URL","toString","addEventListener","fetch","response","status","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","module","exports","ViewBase","ViewMainSubs","sub","renderSubs","subsContainer","renderSubItems","tslib__WEBPACK_IMPORTED_MODULE_0__","subViews","react__WEBPACK_IMPORTED_MODULE_1__","ViewListMainSubs","view","__webpack_require__","_mainSubs__WEBPACK_IMPORTED_MODULE_0__","d","__webpack_exports__"],"mappings":"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","file":"static/js/main.9db250d6.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { VPage, TabCaptionComponent, Page, Tabs } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\n\r\nexport const store = {\r\n    //homeCount: observable.box<number>(-1),\r\n    //cartCount: observable.box<number>(101),\r\n};\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\n\r\nexport class VHome extends VPage<CCartApp> {\r\n    async open(param?: any) {\r\n        this.openPage(this.render);\r\n    }\r\n    render = (param?: any): JSX.Element => {\r\n        let { cHome, cMember, cCart, cMe, cart } = this.controller;\r\n        let faceTabs = [\r\n            { name: 'home', label: '首页', icon: 'home', content: cHome.tab, notify: undefined/*store.homeCount*/ },\r\n            // { name: 'member', label: '会员', icon: 'vcard', content: cMember.tab },\r\n            { name: 'cart', label: '购物车', icon: 'shopping-cart', content: cCart.tab, notify: cart.count },\r\n            { name: 'me', label: '我的', icon: 'user', content: cMe.tab }\r\n        ].map(v => {\r\n            let { name, label, icon, content, notify } = v;\r\n            return {\r\n                name: name,\r\n                caption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n                content: content,\r\n                notify: notify,\r\n            }\r\n        });\r\n        return <Page header={false}>\r\n            <Tabs tabs={faceTabs} />\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from 'tonva';\r\nimport { CCart } from './CCart';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VCartLabel extends View<CCart> {\r\n\r\n    private showCart = async () => {\r\n        this.controller.start();\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    };\r\n\r\n    private content = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let count: any = cart.count.get();\r\n        let badge, onClick, pointer;\r\n        if (count > 0) {\r\n            onClick = this.showCart;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={onClick}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { UpdownWidget } from 'tonva';\r\n\r\nconst keys = [107, 109, 110, 187, 189];\r\n\r\nexport class MinusPlusWidget extends UpdownWidget {\r\n    @observable protected value: any;\r\n    @observable protected disabled: boolean;\r\n    @observable protected hasFocus: boolean;\r\n\r\n    protected isValidKey(key: number): boolean {\r\n        if (keys.find(v => v === key) !== undefined) return false;\r\n        return super.isValidKey(key);\r\n    }\r\n\r\n    protected onBlur(evt: React.FocusEvent<any>) {\r\n        super.onBlur(evt);\r\n        this.hasFocus = false;\r\n    }\r\n\r\n    protected onFocus(evt: React.FocusEvent<any>) {\r\n        super.onFocus(evt);\r\n        this.hasFocus = true;\r\n    }\r\n\r\n    protected onChange(evt: React.ChangeEvent<any>) {\r\n    }\r\n\r\n    private minusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v - 1);\r\n    }\r\n    private plusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v + 1);\r\n    }\r\n\r\n    private ref = (input: HTMLInputElement) => {\r\n        this.input = input;\r\n        if (this.input === null) return;\r\n        let p: HTMLElement;\r\n        for (p = this.input; ; p = p.parentElement) {\r\n            if (!p) break;\r\n            if (p.tagName !== 'FIELDSET') continue;\r\n            if (p['disabled'] === true) {\r\n                this.disabled = true;\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    private renderContent = observer((): JSX.Element => {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn = {\r\n            //'form-control': true,\r\n        };\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        let hasFocus = this.hasFocus; // document.hasFocus() && document.activeElement === this.input;\r\n        let hasAction = this.readOnly !== true && this.disabled !== true;\r\n        let hasValue = this.value !== NaN && this.value !== undefined && this.value > 0;\r\n        let cursorPointer: string,\r\n            minusColor: string, minusClick: any,\r\n            plusColor: string, plusClick: any;\r\n        if (this.disabled === true) {\r\n            cursorPointer = 'cursor-pointer';\r\n            minusColor = plusColor = 'text-light';\r\n        }\r\n        else {\r\n            minusClick = this.minusClick;\r\n            plusClick = this.plusClick;\r\n            minusColor = 'text-danger-2'; //'text-black-50';\r\n            plusColor = 'text-danger';\r\n        }\r\n        let minus = <i className={classNames('fa',\r\n            'fa-minus-circle', 'fa-lg', minusColor, cursorPointer,\r\n            { invisible: !(hasFocus === true || hasAction === true && hasValue === true) })}\r\n            onClick={minusClick} />;\r\n        let input = <input ref={this.ref}\r\n            className={classNames(this.className, cn, 'mx-1 w-4c form-control',\r\n                { invisible: !(hasFocus === true || hasValue === true) })}\r\n            type=\"text\"\r\n            defaultValue={this.value}\r\n            onChange={this.onChange}\r\n            placeholder={this.placeholder}\r\n            readOnly={this.readOnly}\r\n            disabled={this.disabled}\r\n            onKeyDown={this.onKeyDown}\r\n            onFocus={(evt: React.FocusEvent<any>) => this.onFocus(evt)}\r\n            onBlur={(evt: React.FocusEvent<any>) => this.onBlur(evt)}\r\n            maxLength={10} />;\r\n\r\n        let plus = <i className={classNames('fa fa-plus-circle fa-lg',\r\n            plusColor, cursorPointer,\r\n            { invisible: !(hasAction === true) })}\r\n            onClick={plusClick} />;\r\n        return <div className=\"d-flex align-items-center\">{minus}{input}{plus}\r\n            {this.renderErrors()}\r\n        </div>;\r\n    });\r\n\r\n    render() {\r\n        return <this.renderContent />;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, Form, ObjectSchema, NumSchema, ArrSchema, UiSchema, UiArr, FormField } from 'tonva';\r\nimport { CCart } from './CCart';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv, BoxId } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { MinusPlusWidget } from '../tools';\r\nimport { renderBrand, productPropItem } from '../product/CProduct';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { CartPackRow } from './Cart';\r\n\r\nconst cartSchema = [\r\n    {\r\n        name: 'list',\r\n        type: 'arr',\r\n        arr: [\r\n            { name: 'checked', type: 'boolean' },\r\n            { name: 'product', type: 'object' } as ObjectSchema,\r\n            {\r\n                name: 'packs', type: 'arr', arr: [\r\n                    { name: 'pack', type: 'object' } as ObjectSchema,\r\n                    { name: 'price', type: 'number' } as NumSchema,\r\n                    { name: 'quantity', type: 'number' } as NumSchema,\r\n                    { name: 'currency', type: 'object' } as ObjectSchema,\r\n                    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n                    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n                ]\r\n            }\r\n        ],\r\n    } as ArrSchema\r\n];\r\n\r\nexport class VCart extends VPage<CCart> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    protected CheckOutButton = observer(() => {\r\n        let { checkOut, cApp } = this.controller;\r\n        let { cart: cartViewModel } = cApp;\r\n        let amount = cartViewModel.amount.get();\r\n        let check = \"去结算\";\r\n        let content = amount > 0 ?\r\n            <>{check} (¥{amount})</> :\r\n            <>{check}</>;\r\n        return <button className=\"btn btn-success w-100\" type=\"button\" onClick={checkOut} disabled={amount <= 0}>\r\n            {content}\r\n        </button>;\r\n    });\r\n\r\n    render(params: any): JSX.Element {\r\n        return <this.tab />;\r\n    }\r\n\r\n    private renderCartItem = (item: any) => {\r\n        let { product } = item;\r\n        let { controller } = this;\r\n        let { onProductClick, renderCartProduct } = controller;\r\n        return <div className=\"pr-1\">\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\" onClick={() => onProductClick(product)}>\r\n                    {renderCartProduct(product)}\r\n                </div>\r\n                <div className=\"col-lg-6\"><FormField name=\"packs\" /></div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow) => {\r\n        let { pack, price, currency } = item;\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-6c mr-4 text-right\"><span className=\"text-danger h5\">¥{price}</span></div>\r\n                <FormField name=\"quantity\" />\r\n            </div>\r\n            <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        selectable: true,\r\n        deletable: true,\r\n        restorable: true,\r\n        items: {\r\n            list: {\r\n                widget: 'arr',\r\n                Templet: this.renderCartItem,\r\n                ArrContainer: (label: any, content: JSX.Element) => content,\r\n                RowContainer: (content: JSX.Element) => <div className=\"py-3\">{content}</div>,\r\n                items: {\r\n                    packs: {\r\n                        widget: 'arr',\r\n                        Templet: this.packsRow,\r\n                        selectable: false,\r\n                        deletable: false,\r\n                        ArrContainer: (label: any, content: JSX.Element) => content,\r\n                        RowContainer: (content: JSX.Element) => content,\r\n                        RowSeperator: <div className=\"border border-gray border-top my-3\" />,\r\n                        items: {\r\n                            quantity: {\r\n                                widget: 'custom',\r\n                                className: 'text-center',\r\n                                WidgetClass: MinusPlusWidget,\r\n                                onChanged: this.controller.onQuantityChanged\r\n                            }\r\n                        },\r\n                    } as UiArr\r\n                }\r\n            } as UiArr\r\n        }\r\n    }\r\n\r\n    protected cartForm = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let { data: cartData } = cart;\r\n        return <Form className=\"bg-white flex-fill overflow-auto\" schema={cartSchema} uiSchema={this.uiSchema} formData={cartData} />\r\n    });\r\n\r\n    private empty() {\r\n        return <div className=\"py-5 text-center bg-white\">你的购物车空空如也</div>\r\n    }\r\n\r\n    private test = () => {\r\n        let { cart: cartViewModel } = this.controller.cApp;\r\n        let row = cartViewModel.cartItems[0];\r\n        row.packs[0].quantity = row.packs[0].quantity + 1;\r\n    }\r\n\r\n    private testButton = () => <button onClick={() => this.test()}>test</button>;\r\n\r\n    private page = observer((params: any): JSX.Element => {\r\n        let { cart } = this.controller.cApp;\r\n        let footer: any, content: any;\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            content = this.empty();\r\n            footer = undefined;\r\n        }\r\n        else {\r\n            content = <this.cartForm />;\r\n            footer = <this.CheckOutButton />;\r\n        }\r\n        return <Page header=\"购物车\" footer={footer}>\r\n            {content}\r\n        </Page>;\r\n    })\r\n\r\n    private tab = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let header = <header className=\"py-2 text-center bg-info text-white\">\r\n            <FA className=\"align-middle\" name=\"shopping-cart\" size=\"2x\" /> &nbsp; <span className=\"h5 align-middle\">购物车</span>\r\n        </header>;\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            return <>\r\n                {header}\r\n                {this.empty()}\r\n            </>;\r\n        }\r\n        return <div className=\"bg-white d-flex flex-column h-100\">\r\n            {header}\r\n            <this.cartForm />\r\n            <footer className=\"p-3\"><this.CheckOutButton /></footer>\r\n        </div>\r\n    });\r\n}","import * as React from 'react';\r\nimport { VCartLabel } from './VCartLabel';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VCart } from './VCart';\r\nimport { Controller, RowContext, nav, User, BoxId } from 'tonva';\r\nimport { CartPackRow, CartItem2 } from './Cart';\r\n\r\nexport class CCart extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    private selectedCartItems: CartItem2[];\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        this.openVPage(VCart);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * 显示购物车图标\r\n     */\r\n    renderCartLabel() {\r\n        return this.renderView(VCartLabel);\r\n    }\r\n\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data, parentData } = context;\r\n        let { product } = parentData;\r\n        let { pack, price, currency } = data as CartPackRow;\r\n        let { cart } = this.cApp;\r\n        if (value > 0)\r\n            await cart.add(product, pack, value, price, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: product.id, packId: pack.id }]);\r\n    }\r\n\r\n    onRowStateChanged = async (context: RowContext, selected: boolean, deleted: boolean) => {\r\n        alert('onRowStateChanged')\r\n    }\r\n\r\n    private loginCallback = async (user: User): Promise<void> => {\r\n        let { cApp } = this;\r\n        await cApp.currentUser.setUser(user);\r\n        await cApp.loginCallBack(user);\r\n        this.closePage(1);\r\n        await this.doCheckOut();\r\n    };\r\n\r\n    onProductClick(product: BoxId) {\r\n        let { cart, cProduct } = this.cApp;\r\n        if (!cart.isDeleted(product.id)) {\r\n            cProduct.showProductDetail(product);\r\n        }\r\n    }\r\n\r\n    checkOut = async () => {\r\n        let { cart } = this.cApp;\r\n        this.selectedCartItems = cart.getSelectedItems();\r\n        if (this.selectedCartItems === undefined) return;\r\n        if (!this.isLogined) {\r\n            nav.showLogin(this.loginCallback, true);\r\n        } else {\r\n            this.doCheckOut();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 导航到CheckOut界面\r\n     */\r\n    private doCheckOut = async () => {\r\n\r\n        let { cOrder } = this.cApp;\r\n        if (this.selectedCartItems === undefined) return;\r\n        await cOrder.start(this.selectedCartItems);\r\n    }\r\n\r\n    tab = () => this.renderView(VCart);\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    renderCartProduct = (product: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderCartProduct(product);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Image } from 'tonva';\r\n\r\nconst imagePath = \"https://www.jkchemical.com/static/Structure/\";\r\nconst altimagePath = \"https://www.jkchemical.com/static/Structure/999.png\";\r\n\r\ninterface ProductImageProps {\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    chemicalId: string;\r\n}\r\n\r\nexport function ProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    return <Image src={chemicalId && (imagePath + chemicalId.substr(0, 3) + '/' + chemicalId + '.png')}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}\r\n","import * as React from 'react';\r\nimport { CProduct, renderBrand, productPropItem } from './CProduct';\r\nimport {\r\n    VPage, Page, Form, ItemSchema, NumSchema, UiSchema, Field,\r\n    ObjectSchema, RowContext, UiCustom, FormField, BoxId\r\n} from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { MinusPlusWidget } from '../tools/minusPlusWidget';\r\nimport { ProductPackRow } from './Product';\r\nimport { ViewMainSubs, MainProductChemical } from 'mainSubs';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n];\r\n\r\nexport class VProduct extends VPage<CProduct> {\r\n    private productBox: BoxId;\r\n\r\n    async open(param: any) {\r\n        let { productData, product } = param;\r\n        this.productBox = product;\r\n        this.openPage(this.page, productData);\r\n    }\r\n\r\n    private renderProduct = (product: MainProductChemical) => {\r\n\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"mb-3 px-2\">\r\n            <div className=\"py-2\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n            <div className=\"row mt-3\">\r\n                <div className=\"col-12 col-sm-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-12 col-sm-9\">\r\n                    <div className=\"row mx-3\">\r\n                        {productPropItem('CAS', CAS, \"font-weight-bold\")}\r\n                        {productPropItem('产品编号', origin, \"font-weight-bold\")}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('分子式', molecularFomula)}\r\n                        {productPropItem('分子量', molecularWeight)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private arrTemplet = (item: ProductPackRow) => {\r\n        let { pack, retail, vipPrice, promotionPrice } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\"><FormField name=\"quantity\" /></div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div><b>{tv(pack)}</b></div>\r\n                    <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp } = this.controller;\r\n        let { cart } = cApp;\r\n        if (value > 0)\r\n            await cart.add(this.productBox, pack, value, price, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: this.productBox.id, packId: pack.id }]);\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n        items: {\r\n            quantity: {\r\n                widget: 'custom',\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget as any,\r\n                onChanged: this.onQuantityChanged\r\n            } as UiCustom\r\n        },\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"mx-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n    private page = observer((product: any) => {\r\n\r\n        let { cApp } = this.controller;\r\n        let header = cApp.cHome.renderSearchHeader();\r\n        let cartLabel = cApp.cCart.renderCartLabel();\r\n        let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n        viewProduct.model = product;\r\n\r\n        return <Page header={header} right={cartLabel}>\r\n            <div className=\"px-2 py-2 bg-white mb-3\">{viewProduct.render()}</div>\r\n        </Page>\r\n\r\n        /*\r\n        return <Page header={header} right={cartLabel}>\r\n            {tv(this.productBox, (value: any) => {\r\n                let { brand, description, descriptionC, origin, imageUrl, packx } = value;\r\n                return <div className=\"p-2 bg-white mb-3\">\r\n                    <div className=\"mb-3 px-2\">\r\n                        <div className=\"py-2\"><strong>{description}</strong></div>\r\n                        <div>{descriptionC}</div>\r\n                        <div className=\"row mt-3\">\r\n                            <div className=\"col-12 col-sm-3\">\r\n                                <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                            </div>\r\n                            <div className=\"col-12 col-sm-9\">\r\n                                <div className=\"row mx-3\">\r\n                                    {productPropItem('产品编号', origin, \"font-weight-bold\")}\r\n                                    {this.controller.renderChemicalInfo(product)}\r\n                                    {tv(brand, renderBrand)}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        {packx.map((v, index) => {\r\n                            return tv(v, (value: any) => {\r\n                                return <>\r\n                                    <div className=\"sep-product-select\" />\r\n                                    <Form className=\"mx-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n                                </>\r\n                            })\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </Page>\r\n        */\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CProduct, renderProduct } from './CProduct';\r\nimport { List } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\n//import { cCartApp } from 'ui/CCartApp';\r\n\r\nexport class VProductList extends VPage<CProduct> {\r\n\r\n    private searchKey: string;\r\n    async open(key: string) {\r\n        this.searchKey = key;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onProductClick = async (product: any) => {\r\n        this.controller.showProductDetail(product.id);\r\n    }\r\n\r\n    private onScrollBottom = async () => {\r\n\r\n        await this.controller.pageProducts.more();\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { pageProducts, cApp } = this.controller;\r\n        let { cHome, cCart } = cApp;\r\n        let header = cHome.renderSearchHeader();\r\n        let cart = cCart.renderCartLabel();\r\n        let none = <div className=\"my-3 mx-2 text-warning\">抱歉，未找到相关产品，请重新搜索！</div>\r\n        return <Page header={header} right={cart} onScrollBottom={this.onScrollBottom}>\r\n            <div className=\"bg-white p-2 mb-1\">搜索条件: <strong>{this.searchKey}</strong></div>\r\n            <List before={''} none={none} items={pageProducts} item={{ render: renderProduct, onClick: this.onProductClick }} />\r\n        </Page>\r\n    });\r\n}","import { Entity } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\n\r\nexport abstract class Loader<T> {\r\n    protected cApp: CCartApp;\r\n    private entities: Entity[] = [];\r\n    private schemaLoaded: boolean = false;\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n        this.initEntities();\r\n    }\r\n\r\n    protected abstract initEntities(): void;\r\n\r\n    protected async loadSchemas() {\r\n        if (this.schemaLoaded === true) return;\r\n        await Promise.all(this.entities);\r\n        this.schemaLoaded = true;\r\n    }\r\n\r\n    async load(param: any): Promise<T> {\r\n        await this.loadSchemas();\r\n        let data = this.initData();\r\n        await this.loadToData(param, data);\r\n        return data;\r\n    }\r\n    protected abstract async loadToData(param: any, data: T): Promise<void>;\r\n    protected abstract initData(): T;\r\n}\r\n","import { CCartApp } from 'CCartApp';\r\nimport { Map, Query } from 'tonva';\r\nimport { Loader } from 'mainSubs/loader';\r\n\r\nexport class LoaderProductChemical extends Loader<any> {\r\n    private productChemicalMap: Map;\r\n\r\n    initEntities() {\r\n        let { cUqProduct } = this.cApp;\r\n        this.productChemicalMap = cUqProduct.map('productChemical');\r\n    }\r\n\r\n    protected async loadToData(productId: number, data: any): Promise<void> {\r\n\r\n        let productChemical = await this.productChemicalMap.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n    }\r\n\r\n    protected initData(): any {\r\n        return {};\r\n    }\r\n}","import _ from 'lodash';\r\nimport { Tuid, TuidDiv, Map, Query } from 'tonva';\r\nimport { ProductPackRow } from './Product';\r\nimport { Loader } from 'mainSubs/loader';\r\nimport { MainSubs, MainProductChemical, MainBrand } from 'mainSubs';\r\nimport { LoaderProductChemical } from 'tools/productChemical';\r\n\r\nexport class LoaderBrand extends Loader<MainBrand> {\r\n    private brandTuid: Tuid;\r\n\r\n    protected initEntities() {\r\n        let { cUqProduct } = this.cApp;\r\n        this.brandTuid = cUqProduct.tuid('brand');\r\n    }\r\n\r\n    protected async loadToData(brandId: number, data: MainBrand): Promise<void> {\r\n        let brand = await this.brandTuid.load(brandId);\r\n        data.id = brand.id;\r\n        data.name = brand.name;\r\n    }\r\n\r\n    protected initData(): MainBrand {\r\n        return {} as MainBrand;\r\n    }\r\n}\r\n\r\nexport class LoaderProductWithChemical extends Loader<MainProductChemical> {\r\n    private productTuid: Tuid;\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct } = this.cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n    }\r\n\r\n    protected async loadToData(productId: number, data: MainProductChemical): Promise<void> {\r\n\r\n        let product = await this.productTuid.load(productId);\r\n        if (product === undefined)\r\n            return;\r\n        _.merge(data, product);\r\n\r\n        let brandLoader = new LoaderBrand(this.cApp);\r\n        data.brand = await brandLoader.load(data.brand.id);\r\n\r\n        let productChemicalLoader = new LoaderProductChemical(this.cApp);\r\n        let productChemical: any = await productChemicalLoader.load(productId);\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n\r\n        data.packs = [];\r\n        product.packx.forEach(e => {\r\n            // let { id, radiox, radioy, unit } = e;\r\n            data.packs.push(e);\r\n        });\r\n    }\r\n\r\n    protected initData(): MainProductChemical {\r\n        return {} as MainProductChemical;\r\n    }\r\n}\r\n\r\nexport class LoaderProductChemicalWithPrices extends Loader<MainSubs<MainProductChemical, ProductPackRow>> {\r\n\r\n    private getCustomerDiscount: Query;\r\n    private priceMap: Map;\r\n    private getPromotionPackQuery: Query;\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct, cUqCustomerDiscount, cUqWarehouse, cUqPromotion } = this.cApp;\r\n        this.getCustomerDiscount = cUqCustomerDiscount.query(\"getdiscount\");\r\n        this.priceMap = cUqProduct.map('pricex');\r\n        this.getPromotionPackQuery = cUqPromotion.query(\"getPromotionPack\");\r\n    }\r\n\r\n    protected initData(): MainSubs<MainProductChemical, ProductPackRow> {\r\n        return { main: {} as MainProductChemical, subs: [] as ProductPackRow[] };\r\n    }\r\n\r\n    protected async loadToData(productId: any, data: MainSubs<MainProductChemical, ProductPackRow>): Promise<void> {\r\n\r\n        let productLoader = new LoaderProductWithChemical(this.cApp);\r\n        data.main = await productLoader.load(productId);\r\n\r\n        let discount = 0;\r\n        let { currentUser, currentSalesRegion, cart, currentLanguage } = this.cApp;\r\n        if (currentUser.hasCustomer) {\r\n            let discountSetting = await this.getCustomerDiscount.obj({ brand: data.main.brand.id, customer: currentUser.currentCustomer });\r\n            discount = discountSetting && discountSetting.discount;\r\n        }\r\n\r\n        let { id: currentSalesRegionId } = currentSalesRegion;\r\n        let prices = await this.priceMap.table({ product: productId, salesRegion: currentSalesRegionId });\r\n        data.subs = prices.filter(e => e.discountinued === 0 && e.expireDate > Date.now()).map(element => {\r\n            let ret: any = {};\r\n            ret.pack = element.pack;\r\n            ret.retail = element.retail;\r\n            if (discount !== 0)\r\n                ret.vipPrice = Math.round(element.retail * (1 - discount));\r\n            ret.currency = currentSalesRegion.currency;\r\n            ret.quantity = cart.getQuantity(productId, element.pack.id)\r\n            return ret;\r\n        });\r\n\r\n        let promises: PromiseLike<any>[] = [];\r\n        data.subs.forEach(v => {\r\n            promises.push(this.getPromotionPackQuery.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n\r\n        for (let i = 0; i < data.subs.length; i++) {\r\n            let promotion = results[i];\r\n            let discount = promotion && promotion.discount;\r\n            if (discount)\r\n                data.subs[i].promotionPrice = Math.round((1 - discount) * data.subs[i].retail);\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n// 拟用 LoaderProduct 替换\r\nexport class ProductService {\r\n\r\n    private cApp: CCartApp;\r\n    private productTuid: TuidMain;\r\n    private productChemicalMap: Map;\r\n\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n        this.initEntities();\r\n    }\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct, cUqCustomerDiscount, cUqWarehouse } = this.cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n        this.productChemicalMap = cUqProduct.map('productChemical');\r\n    }\r\n\r\n    async loadProductChemical(productId: number): Promise<MainProductChemical> {\r\n\r\n        let result: MainProductChemical;\r\n        let product = await this.productTuid.load(productId);\r\n        result = {...product };\r\n\r\n        let productChemical = await this.productChemicalMap.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            result.chemical = chemical;\r\n            result.purity = purity;\r\n            result.CAS = CAS;\r\n            result.molecularFomula = molecularFomula;\r\n            result.molecularWeight = molecularWeight;\r\n        }\r\n        return result;\r\n    }\r\n}\r\n*/","import * as React from 'react';\r\nimport { tv, View } from 'tonva';\r\nimport { CProduct } from './CProduct';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VProductDelivery extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        let { obj: packObj, id: packId } = param;\r\n        let { owner: productId } = packObj;\r\n        let { controller } = this;\r\n        let { currentSalesRegion } = controller.cApp;\r\n        controller.getInventoryAllocation(productId, packId, currentSalesRegion);\r\n        controller.getFutureDeliveryTimeDescription(productId, currentSalesRegion);\r\n        return <this.content packId={packId} productId={productId} />;\r\n    }\r\n\r\n    private content = observer((param: any) => {\r\n\r\n        let deliveryTimeUI;\r\n        let { packId, productId } = param;\r\n        let { inventoryAllocationContainer, futureDeliveryTimeDescriptionContainer } = this.controller;\r\n        let inventoryAllocation = inventoryAllocationContainer[packId];\r\n        let futureDeliveryTimeDescription = futureDeliveryTimeDescriptionContainer[productId];\r\n        if (inventoryAllocation && inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                return <div key={index} className=\"text-success\">\r\n                    {tv(warehouse, (values: any) => <>{values.name}</>)}: {quantity}\r\n                    {deliveryTimeDescription}\r\n                </div>\r\n            });\r\n        } else {\r\n            deliveryTimeUI = <div>{futureDeliveryTimeDescription && '期货: ' + futureDeliveryTimeDescription}</div>;\r\n        }\r\n        return deliveryTimeUI;\r\n    })\r\n}","import * as React from 'react';\r\nimport { View, tv } from 'tonva';\r\nimport { CProduct, productPropItem, renderBrand } from './CProduct';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nexport class VCartProuductView extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        return <>{tv(param, this.renderCartProduct)}</>;\r\n    }\r\n\r\n\r\n    private renderCartProduct = (product: any) => {\r\n        let { id, brand, description, descriptionC, origin, imageUrl } = product;\r\n\r\n        return <div className=\"row d-flex mb-3 px-2\">\r\n            <div className=\"col-12\">\r\n                <div className=\"py-2\">\r\n                    <strong>{description}</strong>\r\n                </div>\r\n                <div className=\"pb-2\">\r\n                    <strong>{descriptionC}</strong>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-4c h-4c\" />\r\n                    </div>\r\n                    <div className=\"col-9\">\r\n                        <div className=\"row\">\r\n                            {this.controller.renderChemicalInfo(product)}\r\n                            {productPropItem('编号', origin)}\r\n                            {tv(brand, renderBrand)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    };\r\n}\r\n\r\n\r\nexport class VProuductView extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        return <>{tv(param, this.renderProduct)}</>;\r\n    }\r\n\r\n    private renderProduct = (product: any) => {\r\n        let { brand, description, descriptionC, origin, imageUrl } = product;\r\n        return <div className=\"d-block mb-4 px-3\">\r\n            <div className=\"py-2\">\r\n                <div><strong>{description}</strong></div>\r\n                <div>{descriptionC}</div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {productPropItem('产品编号', origin)}\r\n                        {tv(brand, renderBrand)}\r\n                        {this.controller.renderChemicalInfo(product)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import * as React from 'react';\r\nimport { tv, View } from 'tonva';\r\nimport { CProduct, productPropItem } from './CProduct';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VChemicalInfo extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        let { id: productId } = param;\r\n        let { controller } = this;\r\n        controller.getChemicalInfo(productId);\r\n        return <this.content productId={productId} />;\r\n    }\r\n\r\n    private content = observer((param: any) => {\r\n\r\n        let { productId } = param;\r\n        let { chemicalInfoContainer } = this.controller;\r\n        let chemicalInfo = chemicalInfoContainer[productId];\r\n        if (chemicalInfo !== undefined) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = chemicalInfo;\r\n            return <>\r\n                {productPropItem('CAS', CAS)}\r\n                {productPropItem('纯度', purity)}\r\n            </>\r\n        }\r\n        return <></>;\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport * as _ from 'lodash';\r\nimport { Query, tv, BoxId, Map } from 'tonva';\r\nimport { PageItems, Controller, nav, Page, Image } from 'tonva';\r\nimport classNames from 'classnames';\r\nimport { CCartApp } from '../CCartApp';\r\nimport { VProduct } from './VProduct';\r\nimport { VProductList } from './VProductList';\r\nimport { LoaderProductChemicalWithPrices } from './itemLoader';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { VProductDelivery } from './VProductDelivery';\r\nimport { observable } from 'mobx';\r\nimport { VCartProuductView } from './VProductView';\r\nimport { VChemicalInfo } from './VChemicalInfo';\r\n\r\nclass PageProducts extends PageItems<any> {\r\n\r\n    private searchProductQuery: Query;\r\n\r\n    constructor(searchProductQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchProductQuery = searchProductQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchProductQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.seq;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport class CProduct extends Controller {\r\n    cApp: CCartApp;\r\n\r\n    pageProducts: PageProducts;\r\n    private getInventoryAllocationQuery: Query;\r\n    private getFutureDeliveryTime: Query;\r\n    private productChemicalMap: Map;\r\n    private getCustomerDiscount: Query;\r\n    private getPromotionPackQuery: Query;\r\n\r\n    @observable inventoryAllocationContainer: { [packId: number]: any[] } = {};\r\n    @observable futureDeliveryTimeDescriptionContainer: { [productId: number]: string } = {};\r\n    @observable chemicalInfoContainer: { [productId: number]: any } = {};\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        let { cUqWarehouse, cUqProduct, cUqCustomerDiscount, cUqPromotion } = cApp;\r\n        this.getInventoryAllocationQuery = cUqWarehouse.query(\"getInventoryAllocation\");\r\n        this.getFutureDeliveryTime = cUqProduct.query(\"getFutureDeliveryTime\");\r\n        this.productChemicalMap = cUqProduct.map('productChemical');\r\n        this.getCustomerDiscount = cUqCustomerDiscount.query(\"getdiscount\");\r\n        this.getPromotionPackQuery = cUqPromotion.query(\"getPromotionPack\");\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        this.searchByKey(param);\r\n    }\r\n\r\n    searchByKey(key: string) {\r\n        let { cUqProduct, currentSalesRegion } = this.cApp;\r\n        let searchProductQuery = cUqProduct.query(\"searchProduct\");\r\n        this.pageProducts = new PageProducts(searchProductQuery);\r\n        this.pageProducts.first({ keyWord: key, salesRegion: currentSalesRegion.id });\r\n        this.openVPage(VProductList, key);\r\n    }\r\n\r\n    async searchByCategory(category: any) {\r\n        let { cUqProduct, currentSalesRegion } = this.cApp;\r\n        let searchProductQuery = cUqProduct.query(\"searchProductByCategory\");\r\n        this.pageProducts = new PageProducts(searchProductQuery);\r\n        let { productCategoryId, name } = category;\r\n        this.pageProducts.first({ productCategory: productCategoryId, salesRegion: currentSalesRegion.id });\r\n        this.openVPage(VProductList, name);\r\n    }\r\n\r\n    showProductDetail = async (product: BoxId) => {\r\n\r\n        let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n        let productData = await loader.load(product.id);\r\n        this.openVPage(VProduct, { productData, product });\r\n    }\r\n\r\n    renderPrice = async (productId: number, packId: BoxId, salesRegion: number) => {\r\n\r\n    }\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        return this.renderView(VProductDelivery, pack);\r\n    }\r\n\r\n    getInventoryAllocation = async (productId: number, packId: number, salesRegionId: number) => {\r\n        if (this.inventoryAllocationContainer[packId] === undefined)\r\n            this.inventoryAllocationContainer[packId] = await this.getInventoryAllocationQuery.table({ product: productId, pack: packId, salesRegion: this.cApp.currentSalesRegion });\r\n    }\r\n\r\n    getFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n        if (this.futureDeliveryTimeDescriptionContainer[productId] === undefined) {\r\n            let futureDeliveryTime = await this.getFutureDeliveryTime.table({ product: productId, salesRegion: salesRegionId });\r\n            if (futureDeliveryTime.length > 0) {\r\n                let { minValue, maxValue, unit, deliveryTimeDescription } = futureDeliveryTime[0];\r\n                this.futureDeliveryTimeDescriptionContainer[productId] = minValue + (maxValue > minValue ? '~' + maxValue : '') + ' ' + unit;\r\n            }\r\n        }\r\n    }\r\n\r\n    renderChemicalInfo = (product: BoxId) => {\r\n        return this.renderView(VChemicalInfo, product);\r\n    }\r\n\r\n    getChemicalInfo = async (productId: number) => {\r\n        if (this.chemicalInfoContainer[productId] === undefined) {\r\n            this.chemicalInfoContainer[productId] = await this.productChemicalMap.obj({ product: productId });\r\n        }\r\n    }\r\n\r\n    renderCartProduct = (product: BoxId) => {\r\n        return this.renderView(VCartProuductView, product);\r\n    }\r\n}\r\n\r\nexport function renderBrand(brand: any) {\r\n    return productPropItem('品牌', brand.name);\r\n}\r\n\r\nexport function productPropItem(caption: string, value: any, captionClass?: string) {\r\n    if (value === null || value === undefined || value === '0') return null;\r\n    let capClass = captionClass ? classNames(captionClass) : classNames(\"text-muted\");\r\n    let valClass = captionClass ? classNames(captionClass) : \"\";\r\n    return <>\r\n        <div className={classNames(\"col-6 col-sm-2 pr-0 small\", capClass)}> {caption}</div>\r\n        <div className={classNames(\"col-6 col-sm-4\", valClass)}>{value}</div>\r\n    </>;\r\n}\r\n\r\nexport function renderProduct(product: any) {\r\n    let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"d-block mb-4 px-3\">\r\n        <div className=\"py-2\">\r\n            <div><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n        </div>\r\n        <div className=\"row\">\r\n            <div className=\"col-3\">\r\n                <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n            </div>\r\n            <div className=\"col-9\">\r\n                <div className=\"row\">\r\n                    {productPropItem('CAS', CAS)}\r\n                    {productPropItem('产品编号', origin)}\r\n                    {productPropItem('纯度', purity)}\r\n                    {productPropItem('分子式', molecularFomula)}\r\n                    {productPropItem('分子量', molecularWeight)}\r\n                    {tv(brand, renderBrand)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv, BoxId } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { OrderItem } from './Order';\r\nimport { observable } from 'mobx';\r\nimport { CartPackRow } from 'cart/Cart';\r\n\r\nconst blankTime = 2000;\r\n\r\nexport class VCreateOrder extends VPage<COrder> {\r\n    @observable private useShippingAddress: boolean = true;\r\n    @observable private shippingAddressIsBlank: boolean = false;\r\n    @observable private invoiceAddressIsBlank: boolean = false;\r\n    @observable private invoiceIsBlank: boolean = false;\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private nullContact = () => {\r\n        return <span className=\"text-primary\">选择收货地址</span>;\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow, index: number) => {\r\n        let { pack, quantity, price, currency } = item;\r\n\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{parseFloat((price * quantity).toFixed(2))}</span>\r\n                    <small className=\"text-muted\">(¥{parseFloat(price.toFixed(2))} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n            <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: OrderItem) => {\r\n        let { product, packs } = orderItem;\r\n        let { controller, packsRow } = this;\r\n        return <div>\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\">{controller.renderOrderItemProduct(product)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private orderItemKey = (orderItem: OrderItem) => {\r\n        return orderItem.product.id;\r\n    }\r\n\r\n    private renderCoupon = observer((param: any) => {\r\n        let { couponData } = this.controller;\r\n        if (couponData['id'] === undefined) {\r\n            return <span className=\"text-primary\">填写优惠码</span>;\r\n        } else {\r\n            let { id, code, discount, preferential, validitydate, isValid } = couponData;\r\n            let { couponOffsetAmount, couponRemitted } = param;\r\n            let offsetUI, remittedUI;\r\n            if (couponOffsetAmount) {\r\n                offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">折扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponOffsetAmount}</div>\r\n                </div>\r\n            }\r\n            if (couponRemitted) {\r\n                remittedUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">抵扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponRemitted}</div>\r\n                </div>\r\n            }\r\n            return <div className=\"mr-2\">\r\n                <div className=\"text-success\">{code.substr(0, 4)} {code.substr(4)}</div>\r\n                {offsetUI}\r\n                {remittedUI}\r\n            </div>\r\n        }\r\n    });\r\n\r\n    private onSubmit = async () => {\r\n        let { orderData } = this.controller;\r\n        // 必填项验证\r\n        let { shippingContact, invoiceContact, invoiceType, invoiceInfo } = orderData;\r\n        if (!shippingContact) {\r\n            this.shippingAddressIsBlank = true;\r\n            setTimeout(() => this.shippingAddressIsBlank = false, blankTime);\r\n            return;\r\n        }\r\n        if (!invoiceContact) {\r\n            if (this.useShippingAddress) {\r\n                orderData.invoiceContact = shippingContact; //contactBox;\r\n                this.invoiceAddressIsBlank = false;\r\n            } else {\r\n                this.invoiceAddressIsBlank = true;\r\n                setTimeout(() => this.invoiceAddressIsBlank = false, blankTime);\r\n                return;\r\n            }\r\n        }\r\n        if (!invoiceType || !invoiceInfo) {\r\n            this.invoiceIsBlank = true;\r\n            setTimeout(() => this.invoiceIsBlank = false, blankTime);\r\n            return;\r\n        }\r\n\r\n        this.controller.submitOrder();\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { orderData, onSelectShippingContact, onSelectInvoiceContact, openMeInfo, currentUser, onInvoiceInfoEdit, onCouponEdit } = this.controller;\r\n        let fillMeInfo = <div onClick={openMeInfo} className=\"alert alert-warning text-primary py-1\" role=\"alert\">\r\n            点击完善您的个人信息\r\n        </div>\r\n        if (currentUser.allowOrdering)\r\n            fillMeInfo = null;\r\n        let footer = <div className=\"d-block\">\r\n            {fillMeInfo}\r\n            <div className=\"w-100 px-3\">\r\n                <div className=\"d-flex justify-content-left flex-grow-1\">\r\n                    <span className=\"text-danger\" style={{ fontSize: '1.8rem' }}><small>¥</small>{orderData.amount}</span>\r\n                </div>\r\n                <button type=\"button\"\r\n                    className=\"btn btn-danger w-30\"\r\n                    onClick={this.onSubmit} disabled={!currentUser.allowOrdering}>提交订单\r\n                </button>\r\n            </div>\r\n        </div>;\r\n\r\n        let chevronRight = <FA name=\"chevron-right\" className=\"cursor-pointer\" />\r\n        let shippingAddressBlankTip = this.shippingAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>\r\n            : null;\r\n        let invoiceAddressBlankTip = this.invoiceAddressIsBlank ? <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票地址</div> : null;\r\n        let divInvoiceContact: any = null;\r\n        if (this.useShippingAddress === false) {\r\n            if (orderData.invoiceContact !== undefined) {\r\n                divInvoiceContact = <div className=\"col-8 col-sm-10 offset-4 offset-sm-2 d-flex\">\r\n                    {tv(orderData.invoiceContact, undefined, undefined, this.nullContact)}\r\n                    <div>{chevronRight}</div>\r\n                </div>\r\n            } else {\r\n                divInvoiceContact = <div className=\"col-8 offset-4 offset-sm-2\">\r\n                    <button className=\"btn btn-outline-primary\"\r\n                        onClick={onSelectInvoiceContact}>选择发票地址</button>\r\n                    {invoiceAddressBlankTip}\r\n                </div>\r\n            }\r\n        }\r\n\r\n        let invoiceContactUI = <div className=\"row py-3 bg-white mb-1\">\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票地址:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <div>\r\n                    <label className=\"cursor-pointer\">\r\n                        <input type=\"checkbox\"\r\n                            defaultChecked={this.useShippingAddress}\r\n                            onChange={e => {\r\n                                this.useShippingAddress = e.currentTarget.checked;\r\n                                orderData.invoiceContact = undefined;\r\n                                this.invoiceAddressIsBlank = false;\r\n                            }} /> 同收货地址\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            {divInvoiceContact}\r\n        </div>\r\n\r\n        let invoiceBlankTip = this.invoiceIsBlank ? <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票信息</div> : null;\r\n        let invoiceInfoUI = <div className=\"row py-3 bg-white mb-1\" onClick={onInvoiceInfoEdit}>\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票信息:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                    {tv(orderData.invoiceType, (v) => <>{v.description}</>, undefined, () => <span className=\"text-primary\">填写发票信息</span>)}\r\n                    {tv(orderData.invoiceInfo, (v) => <> -- {v.title}</>, undefined, () => <></>)}\r\n                    {invoiceBlankTip}\r\n                </LMR>\r\n            </div>\r\n        </div>\r\n\r\n        let freightFeeUI = <></>;\r\n        let freightFeeRemittedUI = <></>;\r\n        if (orderData.freightFee) {\r\n            freightFeeUI = <>\r\n                <div className=\"col-4 col-sm-2 pb-2 text-muted\">运费:</div>\r\n                <div className=\"col-8 col-sm-10 text-right text-danger\"><small>¥</small>{orderData.freightFee}</div>\r\n            </>\r\n            if (orderData.freightFeeRemitted) {\r\n                freightFeeRemittedUI = <>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">运费减免:</div>\r\n                    <div className=\"col-8 col-sm-10 text-right text-danger\"><small>¥</small>{orderData.freightFeeRemitted}</div>\r\n                </>\r\n            }\r\n        }\r\n\r\n        let couponUI = <></>;\r\n        if (1 === 1) {\r\n            couponUI = <div className=\"row py-3 bg-white mb-1\" onClick={onCouponEdit}>\r\n                <div className=\"col-4 col-sm-2 pb-2 text-muted\">优惠码:</div>\r\n                <div className=\"col-8 col-sm-10\">\r\n                    <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                        <this.renderCoupon couponOffsetAmount={orderData.couponOffsetAmount} couponRemitted={orderData.couponRemitted} />\r\n                    </LMR>\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        return <Page header=\"订单预览\" footer={footer}>\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 bg-white mb-1\" onClick={onSelectShippingContact}>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">收货地址:</div>\r\n                    <div className=\"col-8 col-sm-10\">\r\n                        <LMR className=\"w-100 align-items-center\" right={chevronRight}>{tv(orderData.shippingContact, undefined, undefined, this.nullContact)}</LMR>\r\n                        {shippingAddressBlankTip}\r\n                    </div>\r\n                </div>\r\n                {invoiceContactUI}\r\n                {invoiceInfoUI}\r\n            </div>\r\n            <List items={orderData.orderItems} item={{ render: this.renderOrderItem, key: this.orderItemKey as any }} />\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 pr-3 bg-white my-1\">\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">商品总额:</div>\r\n                    <div className=\"col-8 col-sm-10 text-right\"><small>¥</small>{orderData.productAmount}</div>\r\n                    {freightFeeUI}\r\n                    {freightFeeRemittedUI}\r\n                </div >\r\n                {couponUI}\r\n            </div>\r\n        </Page >\r\n    })\r\n}","import { BoxId } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\nimport { CartPackRow } from 'cart/Cart';\r\n\r\nexport class Order {\r\n\r\n    webUser: any;\r\n    organization: BoxId;\r\n    customer: any;\r\n\r\n    @observable shippingContact: BoxId;\r\n    @observable invoiceContact: BoxId;\r\n    @observable invoiceType: BoxId;\r\n    @observable invoiceInfo: BoxId;\r\n    @observable orderItems: OrderItem[] = [];\r\n\r\n    @observable freightFee: number;\r\n    @observable freightFeeRemitted: number;\r\n\r\n    @computed get amount() {\r\n        return parseFloat((this.orderItems.reduce((pv, cv) => (pv + cv.subAmount), 0) +\r\n            (this.freightFee ? this.freightFee : 0) +\r\n            (this.freightFeeRemitted ? this.freightFeeRemitted : 0) +\r\n            (this.couponOffsetAmount ? this.couponOffsetAmount : 0) +\r\n            (this.couponRemitted ? this.couponRemitted : 0)).toFixed(2));\r\n    };\r\n    @computed get productAmount() {\r\n        return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subAmount, 0).toFixed(2));\r\n    };\r\n    currency: BoxId;\r\n    @observable coupon: BoxId;\r\n    @observable couponOffsetAmount: number;\r\n    @observable couponRemitted: number;\r\n\r\n    getDataForSave() {\r\n        let orderItems: any[] = [];\r\n        this.orderItems.forEach(oi => {\r\n            oi.packs.forEach(pk => {\r\n                this.currency = pk.currency;\r\n                orderItems.push({\r\n                    product: oi.product, pack: pk.pack, price: pk.price, quantity: pk.quantity\r\n                    , subAmount: pk.quantity * pk.price\r\n                })\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            invoiceContact: this.invoiceContact,\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: this.invoiceInfo,\r\n            amount: this.amount,\r\n            currency: this.currency,\r\n            coupon: this.coupon,\r\n            couponOffsetAmount: this.couponOffsetAmount,\r\n            couponRemitted: this.couponRemitted,\r\n            orderitems: orderItems, // 前面的必须是小写的orderitems\r\n        }\r\n    }\r\n}\r\n\r\nexport class OrderItem {\r\n\r\n    product: BoxId;\r\n    @observable packs: CartPackRow[];\r\n    @computed get subAmount() {\r\n        return this.packs.reduce((p, c) => {\r\n            return p + c.price * c.quantity\r\n        }, 0);\r\n    }\r\n    /*\r\n    pack: BoxId;\r\n\r\n    @observable price: number;\r\n    @observable quantity: number;\r\n    @computed get subAmount() {\r\n        return this.price * this.quantity;\r\n    }\r\n    */\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\n\r\nexport class OrderSuccess extends VPage<COrder> {\r\n\r\n    async open(orderCreateResult: any) {\r\n\r\n        this.openPage(this.page, orderCreateResult);\r\n    }\r\n\r\n    private page = (orderCreateResult: any) => {\r\n        return <Page header=\"下单成功\" back=\"close\">\r\n            <div className=\"p-3 bg-white mb-3\">\r\n                <div className=\"mb-3\">下单成功，感谢您对百灵威的厚爱！</div>\r\n                <p className=\"\">\r\n                    订单编号: <span className=\"h5 text-info\">{orderCreateResult.no}</span><br /><br />\r\n                    我们将立刻处理您的订单，请注意查收到货短信。\r\n                </p>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VContactList extends VPage<CSelectContact> {\r\n\r\n    async open() {\r\n\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onContactRender = (contact: any) => {\r\n        let { onEditContact, onContactSelected } = this.controller;\r\n        let right = <div className=\"p-2 cursor-pointer text-info\" onClick={() => onEditContact(contact)}>\r\n            <FA name=\"edit\" />\r\n        </div>\r\n        return <LMR right={right} className=\"px-3 py-2\">\r\n            <div onClick={() => onContactSelected(contact)}>\r\n                {tv(contact)}\r\n            </div>\r\n        </LMR>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { onNewContact, userContacts } = this.controller;\r\n        let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={() => onNewContact()} >添加新地址</button>;\r\n        let contactList = <List items={userContacts} item={{ render: this.onContactRender }} none=\"无地址\" />;\r\n        return <Page footer={footer} header=\"管理地址\">\r\n            {contactList}\r\n        </Page>\r\n    })\r\n}","\r\n\r\nexport function telephoneValidation(value: string) {\r\n    return (value && value.length > 15) ? '固定电话号码最多15位！' : undefined;\r\n}\r\n\r\nexport function mobileValidation(value: string) {\r\n    return (value && value.length !== 11) ? '手机号格式不正确，请重新输入！' : undefined;\r\n}\r\n\r\nexport function emailValidation(value: string) {\r\n    if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n        return \"Email格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function faxValidation(value: string) {\r\n    return (value && value.length > 15) ? \"传真号码最多15位！\" : undefined;\r\n}\r\n\r\nexport function addressDetailValidation(value: string) {\r\n    return (value && value.length > 200) ? \"详细地址最多200个字！\" : undefined;\r\n}\r\n\r\nexport function zipCodeValidation(value: string) {\r\n    return (value && value.length > 15) ? \"邮编过长，请修改后录入！\" : undefined;\r\n}\r\n\r\n\r\nexport function organizationNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function departmentNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"部门名称名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function salutationValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function nameValidation(value: string) {\r\n    return (value && value.length > 50) ? \"姓名最多50个字！\" : undefined;\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { VPage, Page, Form, Schema, UiSchema, Context, UiInputItem, UiIdItem, BoxId } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { addressDetailValidation, emailValidation, telephoneValidation, mobileValidation, organizationNameValidation, nameValidation } from 'tools/inputValidations';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'name', type: 'string', required: true },\r\n    { name: 'organizationName', type: 'string', required: true },\r\n    { name: 'mobile', type: 'string', required: true },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'email', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: true },\r\n    { name: 'addressString', type: 'string', required: true },\r\n    { name: 'isDefault', type: 'boolean', required: false },\r\n];\r\n\r\nexport class VContact extends VPage<CSelectContact> {\r\n\r\n    private userContactData: any;\r\n    private form: Form;\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            name: { widget: 'text', label: '姓名', placeholder: '姓名', rules: nameValidation } as UiInputItem,\r\n            organizationName: { widget: 'text', label: '单位名称', placeholder: '单位名称', rules: organizationNameValidation } as UiInputItem,\r\n            mobile: { widget: 'text', label: '手机号', placeholder: '手机号', rules: mobileValidation } as UiInputItem, telephone: { widget: 'text', label: '电话', placeholder: '电话', rules: telephoneValidation } as UiInputItem,\r\n            email: { widget: 'email', label: 'Email', rules: emailValidation, placeholder: 'Email' } as UiInputItem, address: {\r\n                widget: 'id', label: '所在地区', placeholder: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await this.controller.pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <>\r\n                            {country && country.id && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province && province.id && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city && city.id && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county && county.id && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', placeholder: '详细地址', rules: addressDetailValidation } as UiInputItem,\r\n            isDefault: { widget: 'checkbox', label: '作为默认地址' },\r\n            submit: { widget: 'button', label: '提交' },\r\n        }\r\n    }\r\n\r\n    async open(userContactData: any) {\r\n        this.userContactData = userContactData;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onSaveContact = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.saveContact(context.form.data);\r\n    }\r\n\r\n    private onDelContact = async () => {\r\n        let { contact } = this.userContactData;\r\n        if (await this.vCall(VConfirmDeleteContact, contact) === true) {\r\n            await this.controller.delContact(contact);\r\n            this.closePage();\r\n        };\r\n    }\r\n\r\n    private page = () => {\r\n        let contactData = _.clone(this.userContactData.contact);\r\n\r\n        let buttonDel: any;\r\n        if (contactData !== undefined) {\r\n            buttonDel = <button className=\"btn btn-sm btn-info\" onClick={this.onDelContact}>删除</button>;\r\n        }\r\n        let { fromOrderCreation } = this.controller;\r\n        let footer = <button type=\"button\"\r\n            className=\"btn btn-primary w-100\"\r\n            onClick={this.onSaveContact}>{fromOrderCreation ? '保存并使用' : '保存'}</button>;\r\n        return <Page header=\"地址信息\" footer={footer} right={buttonDel}>\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    formData={contactData}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nclass VConfirmDeleteContact extends VPage<CSelectContact> {\r\n    async open(contact: any) {\r\n        this.openPage(this.page, contact);\r\n    }\r\n\r\n    private onConfirm = async () => {\r\n        await this.returnCall(true);\r\n        this.closePage();\r\n    }\r\n\r\n    private onCancel = async () => {\r\n        await this.returnCall(false);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = (contact: any) => {\r\n        return <Page header=\"删除地址\" back=\"close\">\r\n            <div className=\"w-75 mx-auto border border-primary rounded my-3 p-3 bg-white\">\r\n                <div className=\"p-4 position-relative\">\r\n                    <i className=\"fa fa-question-circle position-absolute fa-2x text-warning\" style={{ left: 0, top: 0 }} />\r\n                    <b className=\"\">是否删除该地址？</b>\r\n                </div>\r\n                <div className=\"d-flex mt-3 justify-content-end\">\r\n                    <button className=\"btn btn-danger mr-3\" onClick={this.onConfirm}>删除地址</button>\r\n                    <button className=\"btn btn-outline-info mr-3\" onClick={this.onCancel}>取消</button>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, BoxId } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { List, FA } from 'tonva';\r\nimport { CAddress } from './CAddress';\r\nimport { GLOABLE } from 'ui';\r\n\r\nexport class VAddress extends VPage<CAddress> {\r\n    private provinceId: number;\r\n    private cityId: number;\r\n    private countyId: number;\r\n    private backLevel = 0;\r\n\r\n    async open(param: any) {\r\n        let provinces = await this.controller.getCountryProvince(GLOABLE.CHINA);\r\n        this.openPage(this.page, { provinces: provinces });\r\n    }\r\n\r\n    private page = (param: any) => {\r\n        this.backLevel++;\r\n        return <Page header=\"选择所在省市\">\r\n            <div className=\"row no-gutters\">\r\n                {param.provinces.map(v => this.renderPCC(v.province, this.onProvinceClick))}\r\n            </div>\r\n        </Page>\r\n    }\r\n\r\n    private renderPCC = (pcc: BoxId, onClick: any) => {\r\n        return <div key={pcc.id} className=\"col-6 col-md-4 col-lg-3 cursor-pointer\">\r\n            {tv(pcc, (value) => {\r\n                let { id, chineseName } = value;\r\n                return <>\r\n                    <div className=\"pt-1 pb-1 px-2\" onClick={() => onClick(id)}\r\n                        style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n                    >\r\n                        <span className=\"ml-1 align-middle\">\r\n                            <FA name=\"chevron-right\" className=\"text-info small\" />\r\n                            &nbsp; {chineseName}\r\n                        </span>\r\n                    </div>\r\n                </>;\r\n            })}\r\n        </div>\r\n    }\r\n\r\n    private onProvinceClick = async (provinceId: any) => {\r\n        this.provinceId = provinceId;\r\n        let cities = await this.controller.getProvinceCities(provinceId);\r\n        if (cities) {\r\n            let len = cities.length;\r\n            if (len === 1) {\r\n                await this.onCityClick(cities[0].id);\r\n                return;\r\n            }\r\n            if (len > 0) {\r\n                this.backLevel++;\r\n                this.openPageElement(<Page header=\"选择所在城市\">\r\n                    <div className=\"row no-gutters\">\r\n                        {cities.map(v => this.renderPCC(v.city, this.onCityClick))}\r\n                    </div>\r\n                </Page>);\r\n                return;\r\n            }\r\n        } else {\r\n            this.closePage(this.backLevel);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCityClick = async (cityId: any) => {\r\n        this.cityId = cityId;\r\n        let counties = await this.controller.getCityCounties(cityId);\r\n        if (counties && counties.length > 0) {\r\n            this.backLevel++;\r\n            this.openPageElement(<Page header=\"选择所在区县\">\r\n                <div className=\"row no-gutters\">\r\n                    {counties.map(v => this.renderPCC(v.county, this.onCountyClick))}\r\n                </div>\r\n            </Page>);\r\n        } else {\r\n            this.closePage(this.backLevel);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCountyClick = async (countyId: any) => {\r\n        this.countyId = countyId;\r\n        this.closePage(this.backLevel);\r\n        this.saveAddress();\r\n    }\r\n\r\n    private saveAddress = async () => {\r\n        await this.controller.saveAddress(GLOABLE.CHINA, this.provinceId, this.cityId, this.countyId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Controller } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { Query, Tuid } from 'tonva';\r\nimport { VAddress } from './VAddress';\r\n\r\nexport class CAddress extends Controller {\r\n    private cApp: CCartApp;\r\n    private getCountryProvincesQuery: Query;\r\n    private getProvinceCitiesQuery: Query;\r\n    private getCityCountiesQuery: Query;\r\n    private addressTuid: Tuid;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqCommon } = this.cApp;\r\n        this.getCountryProvincesQuery = cUqCommon.query('GetCountryProvinces');\r\n        this.getProvinceCitiesQuery = cUqCommon.query('GetProvinceCities');\r\n        this.getCityCountiesQuery = cUqCommon.query('GetCityCounties');\r\n        this.addressTuid = cUqCommon.tuid(\"Address\");\r\n    }\r\n\r\n    protected async internalStart() {\r\n        this.openVPage(VAddress);\r\n    }\r\n\r\n    getCountryProvince = async (countryId: number): Promise<any[]> => {\r\n        return await this.getCountryProvincesQuery.table({ country: countryId });\r\n    }\r\n\r\n    getProvinceCities = async (provinceId: number): Promise<any[]> => {\r\n        return await this.getProvinceCitiesQuery.table({ province: provinceId });\r\n    }\r\n\r\n    getCityCounties = async (cityId: number): Promise<any[]> => {\r\n        return await this.getCityCountiesQuery.table({ city: cityId });\r\n    }\r\n\r\n    saveAddress = async (countryId: number, provinceId: number, cityId?: number, countyId?: number): Promise<any> => {\r\n        let newAddress = await this.addressTuid.save(undefined, { country: countryId, province: provinceId, city: cityId, county: countyId });\r\n        let addressId = newAddress && this.addressTuid.boxId(newAddress.id);\r\n        this.returnCall(addressId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { Tuid, BoxId } from 'tonva';\r\nimport { VContactList } from './VContactList';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VContact } from './VContact';\r\nimport { Controller, Context, nav } from 'tonva';\r\nimport { CAddress } from './CAddress';\r\nimport { observable } from 'mobx';\r\n\r\nexport abstract class CSelectContact extends Controller {\r\n    protected cApp: CCartApp;\r\n    private contactTuid: Tuid;\r\n    fromOrderCreation: boolean;\r\n\r\n    @observable userContacts: BoxId[] = [];\r\n\r\n    constructor(cApp: CCartApp, res: any, fromOrderCreation: boolean) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        let { cUqCustomer } = cApp;\r\n\r\n        this.contactTuid = cUqCustomer.tuid('contact');\r\n        this.fromOrderCreation = fromOrderCreation;\r\n    }\r\n\r\n    async internalStart(/*contactType: ContactType*/) {\r\n        let userContactMaps = await this.cApp.currentUser.getContacts();\r\n        this.userContacts = userContactMaps.map(v => v.contact);\r\n        this.openVPage(VContactList);\r\n        if (this.fromOrderCreation && (!this.userContacts || this.userContacts.length === 0)) {\r\n            this.onNewContact();\r\n        }\r\n    }\r\n\r\n    protected abstract async getIsDefault(userSetting: any, userContactId: number): Promise<boolean>;\r\n\r\n    /**\r\n     * 打开地址新建界面\r\n     */\r\n    onNewContact = async () => {\r\n        this.openVPage(VContact, { contact: undefined });\r\n    }\r\n\r\n    /**\r\n     * 打开地址编辑界面\r\n     */\r\n    onEditContact = async (userContact: BoxId) => {\r\n        let userContactId = userContact.id;\r\n        let contact = await this.contactTuid.load(userContactId);\r\n        let userSetting = await this.cApp.currentUser.getSetting();\r\n        contact.isDefault = await this.getIsDefault(userSetting, userContactId);\r\n        let userContactData: any = { contact: contact };\r\n        this.openVPage(VContact, userContactData);\r\n    }\r\n\r\n    delContact = async (contact: any) => {\r\n        let { id } = contact;\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.delContact(id);\r\n        if (contact.isDefault) {\r\n            this.setDefaultContact(undefined);\r\n        }\r\n        let index = this.userContacts.findIndex(v => v.id === id);\r\n        if (index > -1)\r\n            this.userContacts.splice(index, 1);\r\n    }\r\n\r\n    saveContact = async (contact: any) => {\r\n\r\n        let newContact = await this.contactTuid.save(undefined, contact);\r\n        let { id: newContactId } = newContact;\r\n        let contactBox = this.contactTuid.boxId(newContactId);\r\n\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.addContact(newContactId);\r\n        this.userContacts.push(contactBox);\r\n        let { id, isDefault } = contact;\r\n        if (isDefault === true || this.userContacts.length === 1) {\r\n            await this.setDefaultContact(contactBox);\r\n        }\r\n        // contact.id !== undefined表示是修改了已有的contact(我们只能用“替换”表示“修改”，所以此时需要删除原contact)\r\n        if (id !== undefined) {\r\n            await currentUser.delContact(id);\r\n            let index = this.userContacts.findIndex(v => v.id === id);\r\n            if (index > -1)\r\n                this.userContacts.splice(index, 1);\r\n        }\r\n        this.backPage();\r\n        if (this.fromOrderCreation) {\r\n            this.onContactSelected(contactBox);\r\n        }\r\n    }\r\n\r\n    protected abstract async setDefaultContact(contactId: BoxId);\r\n\r\n    onContactSelected = (contact: BoxId) => {\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(contact);\r\n        }\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n}\r\n\r\nexport class CSelectShippingContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        if (userSetting !== undefined) {\r\n            let { shippingContact } = userSetting;\r\n            return shippingContact && shippingContact.id === userContactId;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultShippingContact(contactId);\r\n    }\r\n}\r\n\r\nexport class CSelectInvoiceContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        if (userSetting !== undefined) {\r\n            let { invoiceContact } = userSetting;\r\n            return invoiceContact && invoiceContact.id === userContactId;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoiceContact(contactId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { List, EasyDate } from 'tonva';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VMyOrders extends VPage<COrder> {\r\n\r\n    @observable private pendingOrders: any[];\r\n    @observable private allOrders: any[];\r\n    private currentState: string;\r\n    async open(param: any) {\r\n        this.currentState = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderOrder = (order: any, index: number) => {\r\n        let { openOrderDetail } = this.controller;\r\n        let { id, no, date, discription, flow } = order;\r\n        return <div className=\"m-3 justify-content-between cursor-pointer\" onClick={() => openOrderDetail(id)}>\r\n            <div><span className=\"small text-muted\">订单编号: </span><strong>{no}</strong></div>\r\n            <div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n        </div>;\r\n    }\r\n\r\n    private page = () => {\r\n\r\n        let tabs = [{\r\n            title: '待付款',\r\n            content: () => {\r\n                return <List items={this.pendingOrders} item={{ render: this.renderOrder }} none=\"无待付款订单\" />\r\n            },\r\n            isSelected: this.currentState === 'pendingpayment',\r\n            load: async () => {\r\n                this.currentState = 'pendingpayment';\r\n                this.pendingOrders = await this.controller.getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            title: '所有订单',\r\n            content: () => {\r\n                return <List items={this.allOrders} item={{ render: this.renderOrder }} none=\"你还没有订单\" />\r\n            },\r\n            isSelected: this.currentState === 'all',\r\n            load: async () => {\r\n                this.currentState = 'all';\r\n                this.allOrders = await this.controller.getMyOrders(this.currentState);\r\n            }\r\n        }];\r\n        return <Page header=\"我的订单\" tabs={tabs} tabPosition=\"top\" />\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, BoxId } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { tv } from 'tonva';\r\nimport { List, LMR } from 'tonva';\r\nimport { renderProduct } from 'product';\r\n\r\nexport class VOrderDetail extends VPage<COrder> {\r\n\r\n    async open(order: any) {\r\n\r\n        this.openPage(this.page, order);\r\n    }\r\n\r\n\r\n    private packsRow = (item: any, index: number) => {\r\n        let { pack, quantity, price, currency } = item;\r\n\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{price * quantity}</span> &nbsp;\r\n                    <small className=\"text-muted\">(¥{price} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: any) => {\r\n        let { product, packs } = orderItem;\r\n        return <div>\r\n            <div className=\"row p-1 my-1\">\r\n                <div className=\"col-lg-6 pb-3\">{renderProduct(product)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return this.packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private page = (order: any) => {\r\n\r\n        let { brief, data } = order;\r\n        let { id, no, state, description, date } = brief;\r\n        let { orderItems, currency, shippingContact, invoiceContact, invoiceType, invoiceInfo, amount, webUser } = data;\r\n        let header = <>订单详情: {no}</>\r\n        return <Page header={header}>\r\n            <List items={orderItems} item={{ render: this.renderOrderItem }} />\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">收货地址:</div>\r\n                <div className=\"col-9\">{tv(shippingContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票地址:</div>\r\n                <div className=\"col-9\">{tv(invoiceContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票信息:</div>\r\n                <div className=\"col-9\">{invoiceTemplate(invoiceType, invoiceInfo)}</div>\r\n            </div>\r\n            <div className=\"bg-white p-3 my-1 text-right\">\r\n                <span className=\"text-danger font-weight-bold\">总金额: {amount}{tv(currency)}</span>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nfunction invoiceTemplate(invoiceType: BoxId, invoiceInfo: BoxId): JSX.Element {\r\n    return <>\r\n        {tv(invoiceType, invoiceTypeUI, undefined, () => <></>)}<br />\r\n        {tv(invoiceInfo, invoiceInfoUI, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nfunction invoiceTypeUI(values: any) {\r\n    let { id, description } = values;\r\n    return <>{description}</>;\r\n}\r\n\r\nfunction invoiceInfoUI(values: any) {\r\n    let { id, title, taxNo, address, telephone, bank, accountNo } = values;\r\n    return <>{title}</>;\r\n}","import * as React from 'react';\r\nimport { VPage, Page, UiSchema, UiInputItem, Form, Context, tv, BoxId, FA } from 'tonva';\r\nimport { CInvoiceInfo } from './CInvoiceInfo';\r\nimport { Schema } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'title', type: 'string', required: false },\r\n    { name: 'taxNo', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: false },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'bank', type: 'string', required: false },\r\n    { name: 'accountNo', type: 'string', required: false },\r\n];\r\n\r\nconst uiSchema: UiSchema = {\r\n    items: {\r\n        id: { visible: false },\r\n        title: {\r\n            widget: 'text', label: '单位全称', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 200) ? '单位全称最多200个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        taxNo: {\r\n            widget: 'text', label: '纳税人识别码', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 20) ? '纳税人识别码最多20位！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        address: {\r\n            widget: 'text', label: '注册地址', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 200) ? '注册地址最多200个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        telephone: {\r\n            widget: 'text', label: '注册电话', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 20) ? '注册电话过长，请修改后录入！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        bank: {\r\n            widget: 'text', label: '开户银行', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 100) ? '开户银行名称最多100个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        accountNo: {\r\n            widget: 'text', label: '银行账号', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 50) ? '银行账号过长，请修改后录入！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        submit: { widget: 'button', label: '提交' },\r\n    }\r\n}\r\n\r\nconst commonRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: false,\r\n};\r\n\r\nconst valueAddedRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: false,\r\n}\r\n\r\nconst commonVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: true,\r\n};\r\n\r\nconst valueAddedVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: true,\r\n}\r\n\r\nexport class VInvoiceInfo extends VPage<CInvoiceInfo> {\r\n    private form: Form;\r\n    @observable showTip: boolean = false;\r\n    saveTip: string = \"\";\r\n    private invoiceInfoData: any;\r\n\r\n    async open(origInvoice?: any) {\r\n        let { invoiceType, invoiceInfo } = origInvoice;\r\n        this.invoiceType = (invoiceType && invoiceType.id) || 1;\r\n        if (invoiceInfo) {\r\n            invoiceInfo.assure();\r\n            this.invoiceInfoData = { ...invoiceInfo.obj };\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { form } = context;\r\n        let { data } = form;\r\n        let invoice = {\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: data,\r\n        };\r\n        this.invoiceInfoData = data;\r\n\r\n        try {\r\n            await this.controller.saveInvoiceInfo(invoice);\r\n            this.saveTip = \"发票信息已经保存\";\r\n        } catch (error) {\r\n            this.saveTip = \"发票信息保存失败，请稍后再试\";\r\n        }\r\n        this.showTip = true;\r\n        setTimeout(() => { this.showTip = false; }, 2000);\r\n    }\r\n\r\n    private onSaveInvoice = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    @observable invoiceType: number;\r\n\r\n    private buildForm(): JSX.Element {\r\n        let requiredFields = this.invoiceType === 1 ? commonRequired : valueAddedRequired;\r\n        let visibleFields = this.invoiceType === 1 ? commonVisible : valueAddedVisible;\r\n        schema.forEach(e => {\r\n            let { items } = uiSchema;\r\n            e.required = requiredFields[e.name];\r\n            items[e.name].visible = visibleFields[e.name];\r\n        });\r\n        return <Form ref={v => this.form = v} className=\"my-3\"\r\n            schema={schema}\r\n            uiSchema={uiSchema}\r\n            formData={this.invoiceInfoData}\r\n            onButtonClick={this.onFormButtonClick}\r\n            fieldLabelSize={3} />\r\n    }\r\n\r\n    private onInvoiceTypeClick = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.invoiceType = parseInt(event.currentTarget.value);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let frm = this.buildForm();\r\n\r\n        let tipUI = this.showTip ? (<div className=\"alert alert-primary\" role=\"alert\">\r\n            <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n            {this.saveTip}\r\n        </div>) : null;\r\n        return <Page header=\"发票\">\r\n            <div className=\"px-3\">\r\n                <div className=\"form-group row py-3 mb-1 bg-white\">\r\n                    <div className=\"col-12 col-sm-3 pb-2 text-muted\">发票类型:</div>\r\n                    <div className=\"col-12 col-sm-9\">\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"common\" value=\"1\"\r\n                                onChange={(event) => this.onInvoiceTypeClick(event)} checked={this.invoiceType === 1}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"common\">增值税普通发票</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"valueAdded\" value=\"2\"\r\n                                onChange={(event) => this.onInvoiceTypeClick(event)} checked={this.invoiceType === 2}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"valueAdded\">增值税专用发票</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"p-3 bg-white\">\r\n                {frm}\r\n                <button type=\"button\"\r\n                    className=\"btn btn-primary w-100\"\r\n                    onClick={this.onSaveInvoice}>确定</button>\r\n                {tipUI}\r\n            </div>\r\n        </Page>\r\n    });\r\n}","import { Controller } from 'tonva';\r\nimport { VInvoiceInfo } from './VInvoiceInfo';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { Tuid } from 'tonva';\r\n\r\nexport class CInvoiceInfo extends Controller {\r\n    protected cApp: CCartApp;\r\n    private invoiceTypeTuid: Tuid;\r\n    private invoiceInfoTuid: Tuid;\r\n    fromOrderCreation: boolean;\r\n\r\n    constructor(cApp: CCartApp, res: any, fromOrderCreation: boolean) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqCommon, cUqCustomer } = cApp;\r\n        this.invoiceTypeTuid = cUqCommon.tuid('invoiceType');\r\n        this.invoiceInfoTuid = cUqCustomer.tuid('invoiceInfo');\r\n        this.fromOrderCreation = fromOrderCreation;\r\n    }\r\n\r\n    async internalStart(origInvoice?: any) {\r\n        this.openVPage(VInvoiceInfo, origInvoice);\r\n    }\r\n\r\n    async saveInvoiceInfo(invoice: any) {\r\n        let { invoiceType, invoiceInfo, isDefault } = invoice;\r\n        let newInvoiceInfo = await this.invoiceInfoTuid.save(undefined, invoiceInfo);\r\n\r\n        let { id: newInvoiceInfoId } = newInvoiceInfo;\r\n        let invoiceBox = {\r\n            invoiceType: this.invoiceTypeTuid.boxId(invoiceType),\r\n            invoiceInfo: this.invoiceInfoTuid.boxId(newInvoiceInfoId),\r\n        }\r\n        // if (isDefault === true || !this.fromOrderCreation) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoice(invoiceBox.invoiceType, invoiceBox.invoiceInfo);\r\n        // }\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(invoiceBox);\r\n        }\r\n    }\r\n}","\r\nexport function groupByProduct(packItems: any[]) {\r\n    let result: any[] = [];\r\n    for (let cd of packItems) {\r\n        let { product, pack, quantity, price, currency } = cd;\r\n        let packRow: any = {\r\n            pack: pack,\r\n            price: price,\r\n            quantity: quantity,\r\n            currency: currency && currency.id\r\n        }\r\n        let cpi = result.find(e => e.product.id === product.id);\r\n        if (cpi === undefined) {\r\n            cpi = { product: product, packs: [] };\r\n            result.push(cpi);\r\n        }\r\n        cpi.packs.push(packRow);\r\n    }\r\n    return result;\r\n}","import * as React from 'react';\r\nimport { VPage, FA, Page } from 'tonva';\r\nimport { CCoupon } from './CCoupon';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VCouponEdit extends VPage<CCoupon> {\r\n\r\n    private couponInput: HTMLInputElement;\r\n    @observable tips: string;\r\n    async open(param: any) {\r\n        if (param !== undefined) {\r\n\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private applyCoupon = async () => {\r\n        let coupon = this.couponInput.value;\r\n        if (!coupon)\r\n            return;\r\n        let ret = await this.controller.applyCoupon(coupon);\r\n        switch (ret) {\r\n            case -1:\r\n                this.tips = '对不起，当前服务器繁忙，请稍后再试。';\r\n                break;\r\n            case 1:\r\n                this.tips = '有效';\r\n                break;\r\n            case 0:\r\n            case 2:\r\n            case 3:\r\n            case 5:\r\n                this.tips = '优惠码无效，请重新输入或与您的专属销售人员联系。';\r\n                break;\r\n            case 4:\r\n                this.tips = '该优惠码已经被使用过了，不允许重复使用。';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        return <Page header=\"填写优惠码\">\r\n            <div className=\"px-2 bg-white\">\r\n                <div className=\"row py-3 pr-3 my-1\">\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">优惠码:</div>\r\n                    <div className=\"col-8 col-sm-10 d-flex\">\r\n                        <input ref={v => this.couponInput = v} type=\"number\" className=\"form-control\"></input>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row my-1\">\r\n                    <div className=\"col-12\">\r\n                        <button className=\"btn btn-primary w-100\" onClick={this.applyCoupon}>应用</button>\r\n                    </div>\r\n                </div>\r\n                {tipsUI}\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import { Controller, Action } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VCouponEdit } from './VCouponEdit';\r\n\r\nexport class CCoupon extends Controller {\r\n    private cApp: CCartApp;\r\n    private isValidCoupon: Action;\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n        let { cUqSalesTask } = cApp;\r\n        this.isValidCoupon = cUqSalesTask.action('isCanUseCoupon');\r\n    }\r\n\r\n    applyCoupon = async (coupon: string) => {\r\n\r\n        let { currentCustomer } = this.cApp.currentUser;\r\n        let validationResult = await this.isValidCoupon.submit({ code: coupon, customer: currentCustomer && currentCustomer.id });\r\n        let rtn = validationResult.result;\r\n        if (rtn === 1) {\r\n            this.returnCall(validationResult);\r\n            this.closePage();\r\n        }\r\n        return rtn;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        this.openVPage(VCouponEdit);\r\n    }\r\n}","import { observable } from 'mobx';\r\nimport { Sheet, BoxId, Query, Action, Tuid, Map } from 'tonva';\r\nimport { Controller, nav } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VCreateOrder } from './VCreateOrder';\r\nimport { Order, OrderItem } from './Order';\r\nimport { OrderSuccess } from './OrderSuccess';\r\nimport { CSelectShippingContact, CSelectInvoiceContact, CSelectContact } from 'customer/CSelectContact';\r\nimport { VMyOrders } from './VMyOrders';\r\nimport { VOrderDetail } from './VOrderDetail';\r\nimport { WebUser } from 'CurrentUser';\r\nimport { CInvoiceInfo } from 'customer/CInvoiceInfo';\r\nimport { groupByProduct } from 'tools/groupByProduct';\r\nimport { LoaderProductWithChemical } from 'product/itemLoader';\r\nimport { CCoupon } from './CCoupon';\r\nimport { CartItem2 } from 'cart/Cart';\r\n\r\nconst FREIGHTFEEFIXED = 12;\r\nconst FREIGHTFEEREMITTEDSTARTPOINT = 100;\r\n\r\nexport class COrder extends Controller {\r\n    private cApp: CCartApp;\r\n    @observable orderData: Order = new Order();\r\n    @observable couponData: any = {};\r\n    private orderSheet: Sheet;\r\n    private getPendingPaymentQuery: Query;\r\n    private priceMap: Map;\r\n    currentUser: WebUser;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        let { cUqOrder, currentUser, cUqSalesTask, cUqProduct } = cApp;\r\n        this.orderSheet = cUqOrder.sheet('order');\r\n        this.getPendingPaymentQuery = cUqOrder.query('getpendingPayment');\r\n        this.priceMap = cUqProduct.map('pricex');\r\n        this.currentUser = currentUser;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        let cart = param;\r\n        await this.createOrderFromCart(cart);\r\n        this.openVPage(VCreateOrder);\r\n    }\r\n\r\n    private createOrderFromCart = async (cartItems: CartItem2[]) => {\r\n        let { currentUser } = this.cApp;\r\n        this.orderData.webUser = currentUser.id;\r\n        this.removeCoupon();\r\n        if (currentUser.currentCustomer !== undefined) {\r\n            this.orderData.customer = currentUser.currentCustomer.id;\r\n        }\r\n\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceContact === undefined) {\r\n            this.orderData.invoiceContact = await this.getDefaultInvoiceContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceType === undefined) {\r\n            this.orderData.invoiceType = await this.getDefaultInvoiceType();\r\n        }\r\n\r\n        if (this.orderData.invoiceInfo === undefined) {\r\n            this.orderData.invoiceInfo = await this.getDefaultInvoiceInfo();\r\n        }\r\n\r\n        if (cartItems !== undefined && cartItems.length > 0) {\r\n            this.orderData.currency = cartItems[0].packs[0].currency;\r\n            this.orderData.orderItems = cartItems.map((element: any, index: number) => {\r\n                var item = new OrderItem();\r\n                item.product = element.product;\r\n                item.packs = element.packs.filter(v => v.quantity > 0);\r\n                return item;\r\n            });\r\n\r\n            // 运费和运费减免\r\n            this.orderData.freightFee = FREIGHTFEEFIXED;\r\n            if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n        }\r\n    }\r\n\r\n    private defaultSetting: any;\r\n    private async getDefaultSetting() {\r\n        if (this.defaultSetting) return this.defaultSetting;\r\n        let { currentUser } = this.cApp;\r\n        return this.defaultSetting = await currentUser.getSetting() || {};\r\n    }\r\n\r\n    private contact0: BoxId;\r\n    private async getContact(): Promise<BoxId> {\r\n        if (this.contact0 === null) return;\r\n        if (this.contact0 !== undefined) return this.contact0;\r\n        let { currentUser } = this.cApp;\r\n        let contactArr = await currentUser.getContacts();\r\n        if (contactArr === undefined || contactArr.length === 0) {\r\n            this.contact0 = null;\r\n            return;\r\n        }\r\n        return this.contact0 = contactArr[0].contact;\r\n    }\r\n\r\n    private async getDefaultShippingContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.shippingContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceType() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceType;\r\n    }\r\n\r\n    private async getDefaultInvoiceInfo() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceInfo;\r\n    }\r\n\r\n    submitOrder = async () => {\r\n        let { orderItems } = this.orderData;\r\n\r\n        let result: any = await this.orderSheet.save(\"order\", this.orderData.getDataForSave());\r\n        await this.orderSheet.action(result.id, result.flow, result.state, \"submit\");\r\n\r\n        let param: [{ productId: number, packId: number }] = [] as any;\r\n        orderItems.forEach(e => {\r\n            e.packs.forEach(v => {\r\n                param.push({ productId: e.product.id, packId: v.pack.id })\r\n            })\r\n        });\r\n        let { cart } = this.cApp;\r\n        cart.removeFromCart(param);\r\n\r\n        // 打开下单成功显示界面\r\n        nav.popTo(this.cApp.topKey);\r\n        this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    private onSelectContact = async (\r\n        typeSelectContact: new (cApp: CCartApp, res: any, autoSelectMode: boolean) => CSelectContact,\r\n    ) => {\r\n        let cSelectContact = new typeSelectContact(this.cApp, undefined, true);\r\n        let contact = await cSelectContact.call<any>();\r\n        return contact;\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        let typeSelectContact: new (cApp: CCartApp, res: any, autoSelectMode: boolean) => CSelectContact = CSelectShippingContact;\r\n        let contactBox = await this.onSelectContact(typeSelectContact);\r\n        this.orderData.shippingContact = contactBox;\r\n    }\r\n\r\n    onSelectInvoiceContact = async () => {\r\n        let typeSelectContact: new (cApp: CCartApp, res: any, autoSelectMode: boolean) => CSelectContact = CSelectInvoiceContact;\r\n        let contactBox = await this.onSelectContact(typeSelectContact);\r\n        this.orderData.invoiceContact = contactBox;\r\n    }\r\n\r\n    onCouponEdit = async () => {\r\n        let cCoupon = new CCoupon(this.cApp, undefined);\r\n        let coupon = await cCoupon.call<any>(this.orderData.coupon);\r\n        if (coupon) {\r\n            await this.applyCoupon(coupon);\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    applyCoupon = async (coupon: any) => {\r\n\r\n        let { id, code, discount, preferential, validitydate, isValid } = coupon;\r\n        if (code !== undefined && isValid === 1 && new Date(validitydate).getTime() > Date.now()) {\r\n            this.orderData.coupon = id;\r\n            this.couponData = coupon;\r\n            if (discount) {\r\n                this.orderData.couponOffsetAmount = Math.round(this.orderData.productAmount * discount) * -1;\r\n                /*\r\n                let { orderItems } = this.orderData;\r\n                if (orderItems !== undefined && orderItems.length > 0) {\r\n                    let promises: PromiseLike<any>[] = [];\r\n                    orderItems.forEach(e => {\r\n                        promises.push(this.priceMap.table({ product: e.product.id, salesRegion: 1 }));\r\n                    });\r\n                    let prices = await Promise.all(promises);\r\n\r\n                    for (let i = 0; i < orderItems.length; i++) {\r\n                        let oi = orderItems[i];\r\n                        let eachPrices = prices[i];\r\n                        let { product, packs } = oi;\r\n                        for (let j = 0; j < packs.length; j++) {\r\n                            let pk = packs[j];\r\n                            let price: any = eachPrices.find(\r\n                                p => p.product.id === product.id &&\r\n                                    p.pack.id === pk.pack.id &&\r\n                                    p.discountinued === 0 &&\r\n                                    p.expireDate > Date.now());\r\n                            if (price) {\r\n                                pk.price = Math.round(price.retail * (1 - discount));\r\n                            }\r\n                        };\r\n                    };\r\n                }\r\n                */\r\n            }\r\n            if (preferential) {\r\n                this.orderData.couponRemitted = preferential * -1;\r\n            }\r\n            // 运费和运费减免\r\n            this.orderData.freightFee = FREIGHTFEEFIXED;\r\n            if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n        }\r\n    }\r\n\r\n    removeCoupon = () => {\r\n        this.orderData.coupon = undefined;\r\n        this.couponData = {};\r\n        this.orderData.couponOffsetAmount = 0;\r\n        this.orderData.couponRemitted = 0;\r\n    }\r\n\r\n\r\n    /*\r\n    * 打开我的订单列表（在“我的”界面使用）\r\n    */\r\n    openMyOrders = async (state: string) => {\r\n\r\n        this.openVPage(VMyOrders, state);\r\n    }\r\n\r\n    /**\r\n     * 根据状态读取我的订单\r\n     */\r\n    getMyOrders = async (state: string) => {\r\n\r\n        switch (state) {\r\n            case 'pendingpayment':\r\n                return await this.getPendingPaymentQuery.table(undefined);\r\n                break;\r\n            default:\r\n                return await this.orderSheet.mySheets(undefined, 1, 20);\r\n                break;\r\n        }\r\n    }\r\n\r\n    onInvoiceInfoEdit = async () => {\r\n        let cInvoiceInfo = new CInvoiceInfo(this.cApp, undefined, true);\r\n        let { invoiceType, invoiceInfo } = this.orderData;\r\n        let origInvoice = {\r\n            invoiceType: invoiceType,\r\n            invoiceInfo: invoiceInfo,\r\n        }\r\n        let newInvoice = await cInvoiceInfo.call<any>(origInvoice);\r\n        this.orderData.invoiceType = newInvoice.invoiceType;\r\n        this.orderData.invoiceInfo = newInvoice.invoiceInfo;\r\n    }\r\n\r\n    openOrderDetail = async (orderId: number) => {\r\n\r\n        let order = await this.orderSheet.getSheet(orderId);\r\n        let { data } = order;\r\n        let { orderitems } = data;\r\n        let orderItemsGrouped = groupByProduct(orderitems);\r\n        let loaderProduct = new LoaderProductWithChemical(this.cApp);\r\n        for (let i = 0; i < orderItemsGrouped.length; i++) {\r\n            let productId = orderItemsGrouped[i].product.id;\r\n            orderItemsGrouped[i].product = await loaderProduct.load(productId);\r\n        }\r\n        data.orderItems = orderItemsGrouped;\r\n        this.openVPage(VOrderDetail, order);\r\n    }\r\n\r\n    openMeInfo = async () => {\r\n        let { cMe } = this.cApp;\r\n        await cMe.openMeInfoFirstOrder();\r\n    }\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    renderOrderItemProduct = (product: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderCartProduct(product);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav } from 'tonva';\r\nimport { CHome } from './CHome';\r\nimport { SearchBox } from 'tonva';\r\n\r\nexport class VSearchHeader extends View<CHome> {\r\n\r\n    private onSearch = async (key: string, param: 'home' | 'insearch' | 'productdetail') => {\r\n        let { cProduct, topKey } = this.controller.cApp;\r\n        if (param !== 'home') {\r\n            nav.popTo(topKey);\r\n        }\r\n\r\n        cProduct.start(key);\r\n    }\r\n\r\n    render(param: 'home' | 'insearch' | 'productdetail') {\r\n        let size: any = param === 'home' ? \"md\" : 'sm';\r\n        return <SearchBox className=\"px-1 w-100\"\r\n            size={size}\r\n            onSearch={(key: string) => this.onSearch(key, param)}\r\n            placeholder=\"搜索品名、编号、CAS、MDL等\" />\r\n    }\r\n}","import * as React from 'react';\r\nimport { View, nav } from 'tonva';\r\nimport { LMR, FA, SearchBox } from 'tonva';\r\nimport logo from '../images/logo.png';\r\nimport { CHome } from './CHome';\r\n\r\nexport class VSiteHeader extends View<CHome> {\r\n    render() {\r\n        let currentSalesRegion = <FA name=\"globe\" />\r\n        let login = <div>\r\n            登录\r\n        </div>\r\n        let left = <img className=\"m-1\" src={logo} alt=\"logo\" style={{height: \"3rem\", width: \"3rem\"}} />;\r\n        //let cart = this.controller.cApp.cCart.renderCartLabel();\r\n        let right = undefined;\r\n        /*\r\n        <div className=\"d-flex flex-row mr-1 align-items-center\">\r\n            {currentSalesRegion} &nbsp;\r\n            <button onClick={()=>nav.start()}>Try</button>\r\n        </div>;*/\r\n        return <LMR\r\n            className=\"mb-3 align-items-center bg-white\"\r\n            left={left} right={right}>\r\n            <div className=\"\">\r\n                {this.controller.renderSearchHeader('md')}\r\n            </div>\r\n        </LMR>\r\n        //<div className=\"h4 px-3 mb-0\">百灵威科技</div>\r\n    }\r\n}","import * as React from 'react';\r\nimport { Page, View } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CHome } from './CHome';\r\nimport { VSiteHeader } from './VSiteHeader';\r\n\r\nexport class VHome extends View<CHome> {\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return <Page header={false}>\r\n            <this.content />\r\n        </Page>;\r\n    })\r\n\r\n    private content = observer(() => {\r\n        let { controller } = this;\r\n        let { renderCategoryRootList } = controller;\r\n        let siteHeader = this.renderVm(VSiteHeader);\r\n        return <>\r\n            {siteHeader}\r\n            {renderCategoryRootList()}\r\n        </>\r\n    });\r\n}","import { Tuid } from 'tonva';\r\nimport { CCartApp } from '../CCartApp';\r\nimport { PageItems, Controller } from 'tonva';\r\nimport { VSearchHeader } from './VSearchHeader';\r\nimport { VHome } from './VHome';\r\n\r\nclass HomeSections extends PageItems<any> {\r\n\r\n    private sectionTuid: Tuid;\r\n\r\n    constructor(sectionTuid: Tuid) {\r\n        super();\r\n        this.firstSize = this.pageSize = 13;\r\n        this.sectionTuid = sectionTuid;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.sectionTuid.search(\"\", pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        if (item === undefined) return 0;\r\n        return item.id;\r\n    }\r\n}\r\n\r\nexport class CHome extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    homeSections: HomeSections;\r\n    sectionTuid: Tuid;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    async internalStart(param: any) {\r\n\r\n        let { cProductCategory } = this.cApp;\r\n        await cProductCategory.start();\r\n        this.openVPage(VHome);\r\n    }\r\n\r\n    renderSearchHeader = (size?: string) => {\r\n        return this.renderView(VSearchHeader, size);\r\n    }\r\n\r\n    renderCategoryRootList = () => {\r\n        let { cProductCategory } = this.cApp;\r\n        return cProductCategory.renderRootList();\r\n    }\r\n\r\n    tab = () => this.renderView(VHome);\r\n}","import * as React from 'react';\r\nimport { View, tv } from 'tonva';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { FA } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { GLOABLE } from 'ui';\r\n\r\nconst imgStyle: React.CSSProperties = {\r\n    height: '1.5rem', width: '1.5rem',\r\n    marginLeft: '0.1rem',\r\n    marginRight: '0.3rem'\r\n}\r\n\r\nexport const titleTitle: React.CSSProperties = {\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport const subStyle: React.CSSProperties = {\r\n    fontSize: '0.75rem',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport class VRootCategory extends View<CProductCategory> {\r\n\r\n    private categoryClick = async (categoryWapper: any, parent: any, labelColor: string) => {\r\n        await this.controller.openMainPage(categoryWapper, parent, labelColor);\r\n    }\r\n\r\n    private renderRootCategory = (item: any, parent: any) => {\r\n        let { name, children, productCategory } = item;\r\n        let { id: productCategoryID } = productCategory;\r\n        let { src, labelColor } = GLOABLE.ROOTCATEGORY[productCategoryID];\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, undefined, labelColor)}>\r\n                <img className=\"mr-5\" src={src} alt={name} style={{ height: \"2.5rem\", width: \"2.5rem\" }} />\r\n                <b>{name}</b>\r\n            </div>\r\n            <div className=\"\"\r\n                style={{ paddingRight: '1px' }}\r\n            >\r\n                <div className=\"row no-gutters\">\r\n                    {children.map(v => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, color: string) => {\r\n        let { name, children, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            onClick={() => this.categoryClick(item, parent, color)}>\r\n            <div className=\"py-3 px-2\"\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <div style={titleTitle}>\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={color} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(children, total)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    }\r\n\r\n    private content = observer(() => {\r\n        let { categories, categories2 } = this.controller;\r\n        return <>{categories.map(v => this.renderRootCategory(v, undefined))}</>;\r\n        // return <>{categories2.map(v => <div key={v.productCategory.id}>{tv(v, e => this.renderRoot(e))}</div>)}</>;\r\n    });\r\n\r\n    private renderRoot(root: any) {\r\n        let { productCategory } = root;\r\n        let { id } = productCategory;\r\n        console.log(id);\r\n        return <div key={id}>{id}</div>\r\n    }\r\n}\r\n\r\n\r\nexport function renderThirdCategory(items: any, total: number) {\r\n    return <div className=\"py-2 px-1 text-muted small\" style={subStyle}>\r\n        {items.length === 0 ? <>该类产品数量: {total > 1000 ? '>1000' : total}</> : items.map(v => v.name).join(' / ')}\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { VPage, Page } from 'tonva';\r\nimport { List, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { titleTitle, subStyle, renderThirdCategory } from './VRootCategory';\r\n\r\nexport class VCategory extends VPage<CProductCategory> {\r\n\r\n    async open(categoryWaper: any) {\r\n\r\n        this.openPage(this.page, categoryWaper);\r\n    }\r\n\r\n    private renderChild = (childWapper: any) => {\r\n\r\n        return <div className=\"py-2\"><FA name=\"hand-o-right mr-2\"></FA>{childWapper.name}</div>\r\n    }\r\n\r\n    private categoryClick = async (childWapper: any, parent: any, labelColor: string) => {\r\n        await this.controller.openMainPage(childWapper, parent, labelColor);\r\n    }\r\n\r\n    private breadCrumb = (item: any, parent: any) => {\r\n        return <nav arial-babel=\"breadcrumb\">\r\n            <ol className=\"breadcrumb\">\r\n                {tv(item, this.breadCrumbItem)}\r\n            </ol>\r\n        </nav>\r\n\r\n    }\r\n\r\n    private breadCrumbItem = (values: any, parent: any) => {\r\n        if (values === undefined || values.productCategory === undefined)\r\n            return <></>;\r\n        return <>\r\n            {tv(values.productCategory.parent, this.breadCrumbItem)}\r\n            <li className=\"breadcrumb-item\" onClick={() => this.categoryClick(values, undefined, \"\")}>{values.name}</li>\r\n        </>\r\n    }\r\n\r\n    private renderRootCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { productCategory, name, children } = item;\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n                <b>{name}</b>\r\n            </div>\r\n            <div className=\"\"\r\n                style={{ paddingRight: '1px' }}\r\n            >\r\n                <div className=\"row no-gutters\">\r\n                    {children.map(v => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { name, children, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n            <div className=\"pt-1 pb-1 px-2\"\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <div style={titleTitle}>\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={labelColor} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(children, total)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private page = (categoryWaper: any) => {\r\n\r\n        let { cHome } = this.controller.cApp;\r\n        let header = cHome.renderSearchHeader();\r\n        let cartLabel = this.controller.cApp.cCart.renderCartLabel();\r\n\r\n        let { categoryWaper: item, parent, labelColor } = categoryWaper;\r\n        return <Page header={header} right={cartLabel}>\r\n            {this.renderRootCategory(item, parent, labelColor)}\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { Query } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { VRootCategory } from './VRootCategory';\r\nimport { VCategory } from './VCategory';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { Controller } from 'tonva';\r\n\r\nexport class CProductCategory extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    // categories: any[];\r\n    @observable categories: any[] = [];\r\n    @observable categories2: any[] = [];\r\n    private getRootCategoryQuery: Query;\r\n    private getRootCategoriesQuery: Query;\r\n    private getChildrenCategoryQuery: Query;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n        let { cUqProduct } = this.cApp;\r\n        this.getRootCategoryQuery = cUqProduct.query('getRootCategory');\r\n        this.getRootCategoriesQuery = cUqProduct.query('getRootCategories');\r\n        this.getChildrenCategoryQuery = cUqProduct.query('getChildrenCategory');\r\n    }\r\n\r\n    async internalStart(param: any) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        let results = await this.getRootCategoryQuery.query({ salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n        this.categories = results.first;\r\n        this.categories.forEach(element => {\r\n            this.buildCategories(element, results.secend, results.third);\r\n        })\r\n        /*\r\n        let result2 = await this.getRootCategoriesQuery.query({ salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n        if (result2)\r\n            this.categories2 = result2.ret;\r\n        */\r\n    }\r\n\r\n    renderRootList = () => {\r\n        return this.renderView(VRootCategory);\r\n    };\r\n\r\n    async getCategoryChildren(parentCategoryId: number) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        return await this.getChildrenCategoryQuery.query({ parent: parentCategoryId, salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n    }\r\n\r\n    async buildCategories(categoryWapper: any, firstCategory: any, secendCategory: any) {\r\n        firstCategory.forEach(async element => {\r\n            element.children = secendCategory.filter(v => v.parent === element.productCategory.id);\r\n        });\r\n        categoryWapper.children = firstCategory.filter(v => v.parent === categoryWapper.productCategory.id);\r\n    }\r\n\r\n    async openMainPage(categoryWaper: any, parent: any, labelColor: string) {\r\n\r\n        let { productCategory, name } = categoryWaper;\r\n        let { id: productCategoryId } = productCategory;\r\n        let results = await this.getCategoryChildren(productCategoryId);\r\n        if (results.first.length !== 0) {\r\n            this.buildCategories(categoryWaper, results.first, results.secend);\r\n            this.openVPage(VCategory, { categoryWaper, parent, labelColor });\r\n        } else {\r\n            let { cProduct } = this.cApp;\r\n            await cProduct.searchByCategory({ productCategoryId, name });\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Image } from 'tonva';\r\nimport { CMember } from './CMember';\r\nimport { LMR, Muted, FA, Media } from 'tonva';\r\nimport pig from '../images/pig.png';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst stylePig: React.CSSProperties = {\r\n    width: '100%',\r\n    height: '20rem',\r\n    backgroundImage: `url(${pig})`,\r\n    backgroundSize: 'contain',\r\n    backgroundColor: 'rgba(255,255,255,0.1)',\r\n    opacity: 0.09,\r\n    position: 'absolute',\r\n}\r\n\r\nexport class VMember extends VPage<CMember> {\r\n    private recommendationCodeRef = React.createRef<HTMLInputElement>();\r\n\r\n    async open(param: any) {\r\n\r\n    }\r\n\r\n    render(member: any): JSX.Element {\r\n\r\n        return <this.content />;\r\n    }\r\n\r\n    private submitRecommendationCode() {\r\n        let code = this.recommendationCodeRef.current.value;\r\n        if (code) {\r\n            let { setReferrer: submit } = this.controller;\r\n            submit(code);\r\n        }\r\n    }\r\n\r\n    private content = observer(() => {\r\n        let { cApp, member } = this.controller;\r\n        if (member === undefined)\r\n            return <></>;\r\n        let { currentUser } = cApp;\r\n        let { recommendationCode, point } = member;\r\n        if (!point) point = 0;\r\n\r\n        let im = <Image className=\"mr-3 w-3c h-3c\" src={currentUser.icon} />;\r\n        let inviteCode = <div className=\"small\">邀请码: {recommendationCode}</div>;\r\n\r\n        let divPoints = <div className=\"my-3 text-center bg-white h-25\" style={{ position: 'relative' }}>\r\n            <div className=\"w-100 bg-white h-20c\" style={{ position: 'absolute' }} />\r\n            <div className=\"d-flex align-items-center justify-content-center\" style={stylePig} />\r\n            <div className=\"w-100 d-flex align-items-center justify-content-center h-20c\" style={{ position: 'absolute' }}>\r\n                <div className=\"muted mr-3 small\">积分: </div>\r\n                <div className=\"text-danger\" style={{ fontSize: '2rem' }}>{point}</div>\r\n            </div>\r\n        </div>\r\n\r\n        let pointTitle = <p className=\"h4\">我的积分</p>\r\n        let pointDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>\r\n        let pointThisWeek = <><p className=\"h5 mb-0\">0</p><Muted>本周</Muted></>\r\n        let pointAll = <><p className=\"h5 mb-0\">{point}</p><Muted>累计</Muted></>\r\n\r\n        let fansTitle = <p>我的粉丝</p>\r\n        let fansDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>;\r\n        let detail = <div className=\"shadow bg-white rounded p-3 mb-1\">\r\n            <LMR left={fansTitle} right={fansDetail}></LMR>\r\n            <LMR className=\"pb-2\">\r\n                <p className=\"h4 mb-0\">0</p>\r\n                <Muted>今日</Muted>\r\n            </LMR>\r\n            <LMR left={pointThisWeek} right={pointAll} />\r\n            <LMR>\r\n                <input type=\"text\" className=\"form-control\" ref={this.recommendationCodeRef} />\r\n                <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.submitRecommendationCode()}>输入邀请码</button>\r\n            </LMR>\r\n        </div>;\r\n\r\n        return <div>\r\n            <LMR className=\"bg-white p-3 mb-1 align-items-center\"\r\n                left={im} right={inviteCode}>\r\n                <b>{currentUser.name}</b>\r\n            </LMR>\r\n            {divPoints}\r\n            {/*detail*/}\r\n        </div>\r\n    })\r\n}\r\n/*\r\n<div className=\"shadow bg-white rounded p-3 mb-1\">\r\n<LMR left={pointTitle} right={pointDetail}></LMR>\r\n<LMR className=\"pb-2\">\r\n    <p className=\"h4 mb-0\">0</p>\r\n    <Muted>今日</Muted>\r\n</LMR>\r\n<LMR left={pointThisWeek} right={pointAll} />\r\n</div>\r\n*/","import * as React from 'react';\r\nimport Loadable from 'react-loadable';\r\nimport { Controller, Loading, nav } from 'tonva';\r\nimport { VMember } from './VMember';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { FA } from 'tonva';\r\nimport { jnkTop } from 'me/loginTop';\r\nimport { Action, Map, BoxId } from 'tonva';\r\n\r\nexport class CMember extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    @observable member: any;\r\n    private referrer: BoxId;\r\n    private memberAction: Action;\r\n    private memberRecommenverMap: Map;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n        let { cUqMember } = cApp;\r\n        this.memberAction = cUqMember.action('MemberAction');\r\n        this.memberRecommenverMap = cUqMember.map('MemberRecommender');\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n\r\n        if (this.isLogined) {\r\n            let { id: currentUserId } = this.user;\r\n            let promises: PromiseLike<any>[] = [];\r\n            promises.push(this.memberAction.submit({}));\r\n            promises.push(this.memberRecommenverMap.table({ referrer: currentUserId }));\r\n            promises.push(this.memberRecommenverMap.table({ member: currentUserId }));\r\n            let result = await Promise.all(promises);\r\n            let { code, point } = result[0];\r\n            this.referrer = result[2];\r\n            this.member = { recommendationCode: code, point: point, fans: result[1], referrer: result[2] };\r\n        }\r\n    }\r\n\r\n    private loginCallback = async () => {\r\n        nav.pop();\r\n        await this.internalStart(undefined);\r\n    }\r\n\r\n    render = observer(() => {\r\n        if (this.isLogined) {\r\n            return this.member === undefined ? <Loading /> : this.renderView(VMember);\r\n        } else {\r\n            return <div\r\n                className=\"d-flex h-100 flex-column align-items-center justify-content-center\">\r\n                <div className=\"flex-fill\" />\r\n                <button className=\"btn btn-success w-20c\"\r\n                    onClick={() => nav.showLogin(this.loginCallback, true)}>\r\n                    <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                </button>\r\n                <div className=\"flex-fill\" />\r\n                <div className=\"flex-fill\" />\r\n            </div>;\r\n        }\r\n    })\r\n\r\n    tab = () => {\r\n        this.start();\r\n        return <this.render />;\r\n    }\r\n\r\n    setReferrer(code: string) {\r\n        if (code) {\r\n            // 写入map，方法是add，用这个方法可能会写入多次，多以在写入之前要检查有没有，有的话，就不能再调用这个方法了\r\n            // 这个逻辑我认为应该是在服务端，写入的时候要给双方积分，给多少积分的逻辑，也应该在后端，从邀请码到拥有此邀请码\r\n            // 的会员id之间的转换，逻辑也应该在后台，这个后端的逻辑写在ACTION中？\r\n            if (!this.referrer) {\r\n                let { id: currentUserId } = this.user;\r\n            }\r\n        }\r\n    }\r\n}","import { User, loadAppUqs } from 'tonva';\r\nimport { Map, BoxId, CUq, Tuid } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\n\r\nexport class WebUser {\r\n\r\n    id: number;\r\n    name: string;\r\n    nick?: string;\r\n    icon?: string;\r\n    guest: number;\r\n    token: string;\r\n\r\n    @observable firstName: string;\r\n    gender: string;\r\n    salutation: string;\r\n    @observable organizationName: string;\r\n    departmentName: string;\r\n\r\n    telephone: string;\r\n    @observable mobile: string;\r\n    email: string;\r\n    fax: string;\r\n    address: BoxId;\r\n    addressString: string;\r\n    zipCode: string;\r\n    @computed get allowOrdering() {\r\n        return this.currentCustomer !== undefined ||\r\n            (this.mobile && this.firstName && this.organizationName);\r\n    }\r\n\r\n    private _user: User;\r\n\r\n    private webUserTuid: Tuid;\r\n    private webUserCustomerMap: Map;\r\n    private webUserContactMap: Map;\r\n    private webUserContactsMap: Map;\r\n    private webUserSettingMap: Map;\r\n\r\n    private webUserSettings: any;\r\n\r\n    private cUsqCustomer: CUq;\r\n\r\n    constructor(cUsqWebUser: CUq, cUsqCustomer: CUq) {\r\n        this.webUserTuid = cUsqWebUser.tuid(\"webUser\");\r\n        this.webUserCustomerMap = cUsqWebUser.map('webUserCustomer');\r\n        this.webUserContactMap = cUsqWebUser.map('webUserContact');\r\n        this.webUserContactsMap = cUsqWebUser.map('webUserContacts');\r\n        this.webUserSettingMap = cUsqWebUser.map('webUserSetting');\r\n        this.cUsqCustomer = cUsqCustomer;\r\n    }\r\n\r\n    setUser = async (user: User) => {\r\n        if (user !== undefined) {\r\n            this._user = user;\r\n            this.id = user.id;\r\n            this.name = user.name;\r\n            this.nick = user.nick;\r\n            this.icon = user.icon;\r\n            this.guest = user.guest;\r\n            this.token = user.token;\r\n\r\n            await this.loadWebUser();\r\n        }\r\n    }\r\n\r\n    private async loadWebUser() {\r\n        let { id, _user } = this;\r\n        if (this._user !== undefined) {\r\n            let webUser = await this.webUserTuid.load(this.id);\r\n            if (webUser) {\r\n                let { firstName, gender, salutation, organizationName, departmentName } = webUser;\r\n                this.firstName = firstName;\r\n                this.gender = gender;\r\n                this.salutation = salutation;\r\n                this.organizationName = organizationName;\r\n                this.departmentName = departmentName;\r\n            }\r\n            let contact = await this.webUserContactMap.obj({ webUser: this.id });\r\n            if (contact) {\r\n                let { telephone, mobile, email, fax, address, addressString, zipCode } = contact;\r\n                this.telephone = telephone;\r\n                this.mobile = mobile;\r\n                this.email = email;\r\n                this.fax = fax;\r\n                this.address = address;\r\n                this.addressString = addressString;\r\n                this.zipCode = zipCode;\r\n            }\r\n            this.webUserSettings = await this.webUserSettingMap.obj({ webUser: this.id }) || { webUser: this.id };\r\n            let value = await this.webUserCustomerMap.obj({ webUser: this.id });\r\n            if (value != undefined) {\r\n                this.currentCustomer = new Customer(value.customer, this.cUsqCustomer);\r\n                await this.currentCustomer.init();\r\n            }\r\n        }\r\n    }\r\n\r\n    get isLogined(): boolean {\r\n        return this._user !== undefined;\r\n    }\r\n    get hasCustomer(): boolean {\r\n        return this.currentCustomer !== undefined;\r\n    }\r\n    currentCustomer: Customer;\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            return await this.currentCustomer.getContacts()\r\n        }\r\n        */\r\n        return await this.webUserContactsMap.table({ webUser: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.addContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        await this.webUserContactsMap.add({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.delContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        await this.webUserContactsMap.del({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async getSetting() {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            return this.currentCustomer.getSetting();\r\n        }\r\n        */\r\n        return this.webUserSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultShippingContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        this.webUserSettings.shippingContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoiceContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        this.webUserSettings.invoiceContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoice(invoiceTypeId, invoiceInfoId);\r\n            return;\r\n        }\r\n        */\r\n        // await this.webUserSettingMap.add({ webUser: this.id, arr1: [{ invoiceType: invoiceTypeId, invoiceInfo: invoiceInfoId }] });\r\n        this.webUserSettings.invoiceType = invoiceTypeId;\r\n        this.webUserSettings.invoiceInfo = invoiceInfoId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async saveDefaultSettings() {\r\n        await this.webUserSettingMap.add(this.webUserSettings);\r\n    }\r\n\r\n\r\n    async changeWebUser(webUser: any) {\r\n        await this.webUserTuid.save(this.id, webUser);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        webUserContact.webUser = this.id;\r\n        await this.webUserContactMap.add(webUserContact);\r\n        await this.loadWebUser();\r\n    }\r\n};\r\n\r\nexport class Customer {\r\n\r\n    private contactMap: Map;\r\n    id: number;\r\n\r\n    private customerSettingMap: Map;\r\n\r\n    private customerSettings: any;\r\n\r\n    constructor(customer: BoxId, cUsqCustomer: CUq) {\r\n        this.id = customer.id;\r\n        this.contactMap = cUsqCustomer.map('customerContacts');\r\n        this.customerSettingMap = cUsqCustomer.map('customerSetting');\r\n    };\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        return await this.contactMap.table({ customer: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        await this.contactMap.add({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        await this.contactMap.del({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async init() {\r\n        this.customerSettings = await this.customerSettingMap.obj({ customer: this.id }) || { customer: this.id };\r\n    }\r\n\r\n    getSetting() {\r\n        return this.customerSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        this.customerSettings.shippingContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        this.customerSettings.invoiceContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        this.customerSettings.invoiceType = invoiceTypeId;\r\n        this.customerSettings.invoiceInfo = invoiceInfoId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultSettings() {\r\n        await this.customerSettingMap.add(this.customerSettings);\r\n    }\r\n}","export const consts = {\r\n\r\n    uqOrder: '百灵威系统工程部/order',\r\n    uqProduct: \"百灵威系统工程部/product\",\r\n    uqCommon: '百灵威系统工程部/common',\r\n    uqWebUser: '百灵威系统工程部/webuser',\r\n    uqCustomer: '百灵威系统工程部/customer',\r\n    uqCustomerDiscount: '百灵威系统工程部/customerDiscount',\r\n    uqPromotion: '百灵威系统工程部/promotion',\r\n    uqWarehouse: \"百灵威系统工程部/warehouse\",\r\n    uqSalesTask: \"百灵威系统工程部/salestask\",\r\n    uqMember: '百灵威系统工程部/member',\r\n\r\n    appIcon: 'http://101.200.46.56/imgs/Bear-icon.png',\r\n}","import * as React from 'react';\r\nimport { Page, nav } from 'tonva';\r\nimport ReactMarkdown from 'react-markdown/with-html';\r\nimport logo from '../images/logo.png';\r\n\r\nconst content = `百灵威科技有限公司是一家致力于研发和生产化学及生命科学相关产品，集敏捷制造、全球营销和现代物流为一体的高科技企业。\r\n\r\n百灵威秉承“诚实守信、开拓创新、合作共赢、实现卓越”的价值观，致力于与化学、生物医药、精细化工、食品工业、现代农业、电子、日化、石化、纺织、生命科学、环境保护、疾病控制、新能源、新材料、航空航天等领域的客户建立互信、长久的合作关系，为实现“促进科技与工业发展，造福人类”的使命而不懈努力！\r\n\r\n<h2>企业使命</h2>\r\n\r\n促进科技与工业发展，造福人类\r\n\r\n<h2>企业愿景</h2>\r\n\r\nJ＆K Scientific想象一个所有人都能在安全和清洁的环境中过上健康，有益的生活的世界。我们致力于纪念未来，努力改善我们的孩子及其子女的世界。当我们与客户合作解决他们的生产需求时，这个愿景指导我们的行动。\r\n\r\n<h2>核心价值观</h2>\r\n\r\n<style>\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n.box {\r\n  float: left;\r\n  width: 25%;\r\n  padding: 1px;\r\n  text-align: center;\r\n}\r\n.clearfix::after {\r\n  content: \"\";\r\n  clear: both;\r\n  display: table;\r\n}\r\n</style>\r\n\r\n<div class=\"clearfix\">\r\n  <div class=\"box\" style=\"background-color:#bbb\">\r\n  <h3>诚实守信</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">诚实守信</p>\r\n  </div>\r\n  <div class=\"box\" style=\"background-color:#ccc\">\r\n      <h3>开拓创新</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">开拓创新</p>\r\n  </div>\r\n  <div class=\"box\" style=\"background-color:#ddd\">\r\n      <h3>合作共赢</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">合作共赢</p>\r\n  </div>\r\n  <div class=\"box\" style=\"background-color:#eee\">\r\n      <h3>实现卓越</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">实现卓越</p>\r\n  </div>\r\n</div>\r\n\r\n<h2>国际营销中心</h2>\r\n\r\n<style>\r\nimg {\r\n  float: left;\r\n}\r\n</style>\r\n\r\n<img src=\"http://47.92.87.6/wordpress/wp-content/uploads/2019/05/World-Wide-Distribution.png\" alt=\"World Wide Distribution\"\r\n    title=\"ww distribution\" class=\"img-fluid\"/>\r\n    百灵威在中国内地、香港，欧洲及北美等多个国家和地区设有物流中心，实行专业化、个性化的一站式服务，为全球超过200,000 名科技和工业领域的客户提供产品资源及配套技术服务。百灵威具有国际化学技术资源背景及强大的国际操控能力，可以帮助有特殊要求的客户从国外单独进口特种化学产品，为项目试验乃至工业化应用提供强大支持。百灵威具有强大的专业化学品定制、采购和出口能力，更具备众多国际性合作项目（如多国化学实验室联合开发战略性化合物）的运作能力，百灵威愿与中国的同行携 手，共创我国化学事业更加辉煌的未来！\r\n\r\n<h2>国际认证</h2>\r\n\r\n<h3>ISO 9001</h3>\r\n\r\n【配图】\r\n`\r\n\r\nexport class About extends React.Component {\r\n    render() {\r\n        let right = null;\r\n        return <Page header=\"关于百灵威\" right={right}>\r\n            <div className='bg-white p-3'>\r\n                <img className=\"h-3c position-absolute\" src={logo} />\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <span className=\"text-primary mr-3\">百灵威集团</span>\r\n                </div>\r\n                <ReactMarkdown className=\"mt-5\" source={content} escapeHtml={false} />\r\n            </div>\r\n        </Page>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { userApi, ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page, Edit, UiSchema, VPage, UiRadio, IdSchema, UiIdItem, Context, BoxId, tv } from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport { faxValidation, emailValidation, mobileValidation, telephoneValidation, addressDetailValidation, zipCodeValidation, organizationNameValidation, departmentNameValidation, salutationValidation, nameValidation } from 'tools/inputValidations';\r\n\r\nexport class EditMeInfo extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            nick: { widget: 'text', label: '别名', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n        }\r\n    }\r\n    @observable private data: any;\r\n\r\n    @observable private webUserData: any;\r\n\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone\r\n            , mobile, email, fax, zipCode, address, addressString } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName,\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            address: address,\r\n            addressString: addressString,\r\n            zipCode: zipCode,\r\n        }\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        nav.user[name] = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        let { schema, uiSchema, data, onItemChanged, webUserData, onWebUserChanged, webUserContactData, onWebUserContactChanged, controller } = this;\r\n        return <Page header=\"个人信息\">\r\n            <Edit schema={schema} uiSchema={uiSchema}\r\n                data={data}\r\n                onItemChanged={onItemChanged} />\r\n            <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                data={webUserData}\r\n                onItemChanged={onWebUserChanged} />\r\n            <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema(controller.pickAddress)}\r\n                data={webUserContactData}\r\n                onItemChanged={onWebUserContactChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport const webUserSchema: ItemSchema[] = [\r\n    { name: 'firstName', type: 'string', required: true } as StringSchema,\r\n    { name: 'gender', type: 'string' } as StringSchema,\r\n    { name: 'salutation', type: 'string' } as StringSchema,\r\n    { name: 'organizationName', type: 'string', required: true } as StringSchema,\r\n    { name: 'departmentName', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport const webUserUiSchema: UiSchema = {\r\n    items: {\r\n        firstName: {\r\n            widget: 'text', label: '真实姓名',\r\n            placeholder: '化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。为此，需要您重新提供非虚拟的、可核查的信息。',\r\n            rules: nameValidation\r\n        } as UiTextItem,\r\n        gender: { widget: 'radio', label: '性别', list: [{ value: '1', title: '男' }, { value: '0', title: '女' }], defaultValue: 1 } as UiRadio,\r\n        salutation: { widget: 'text', label: '称谓', rules: salutationValidation } as UiTextItem,\r\n        organizationName: { widget: 'text', label: '单位名称', rules: organizationNameValidation } as UiTextItem,\r\n        departmentName: { widget: 'text', label: '部门名称', rules: departmentNameValidation } as UiTextItem,\r\n    }\r\n}\r\n\r\n// 个人联系方式信息\r\nexport const webUserContactSchema: ItemSchema[] = [\r\n    { name: 'telephone', type: 'string' } as StringSchema,\r\n    { name: 'mobile', type: 'string', required: true } as StringSchema,\r\n    { name: 'email', type: 'string' } as StringSchema,\r\n    { name: 'fax', type: 'string', required: false } as StringSchema,\r\n    { name: 'address', type: 'id', required: false } as IdSchema,\r\n    { name: 'addressString', type: 'string', required: false } as StringSchema,\r\n    { name: 'zipCode', type: 'string', required: false } as StringSchema,\r\n];\r\n\r\nexport function webUserContactUiSchema(pickAddress: any) {\r\n    return {\r\n        items: {\r\n            telephone: { widget: 'text', label: '固定电话', rules: telephoneValidation } as UiTextItem,\r\n            mobile: { widget: 'text', label: '手机号', rules: mobileValidation } as UiTextItem,\r\n            email: { widget: 'text', label: 'Email', rules: emailValidation, placeholder: 'Email' } as UiTextItem,\r\n            fax: { widget: 'text', label: '传真', rules: faxValidation } as UiTextItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <>\r\n                            {country !== undefined && country.id !== undefined && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province !== undefined && province.id !== undefined && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city !== undefined && city.id !== undefined && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county !== undefined && county.id !== undefined && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', rules: addressDetailValidation } as UiTextItem,\r\n            zipCode: { widget: 'text', label: '邮编', rules: zipCodeValidation } as UiTextItem,\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { nav, User, Page, Image, VPage } from 'tonva';\r\nimport { Prop, Media, IconText, FA, PropGrid, LMR } from 'tonva';\r\nimport { About } from './about';\r\nimport { observer } from 'mobx-react';\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\n\r\nexport class VMe extends VPage<CMe> {\r\n\r\n    async open(param?: any) {\r\n\r\n    }\r\n\r\n    private exit() {\r\n        nav.showLogout();\r\n    }\r\n\r\n    private about = () => nav.push(<About />);\r\n\r\n    private changePassword = async () => {\r\n        await nav.changePassword();\r\n    }\r\n\r\n    private openContactList = async () => {\r\n        this.controller.openContactList();\r\n    }\r\n\r\n    private openInvoice = async () => {\r\n        this.controller.openInvoice();\r\n    }\r\n\r\n    private meInfo = observer(() => {\r\n        let { user } = nav;\r\n        if (user === undefined) return null;\r\n        let { id, name, nick, icon } = user;\r\n        return <LMR className=\"py-2 cursor-pointer w-100\"\r\n            left={<Image className=\"w-3c h-3c mr-3\" src={icon} />}\r\n            right={<FA className=\"align-self-end\" name=\"chevron-right\" />}\r\n            onClick={() => {\r\n                this.openVPage(EditMeInfo);\r\n            }}>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-muted\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </LMR>;\r\n    });\r\n\r\n    private orderStates = () => {\r\n\r\n        let { openMyOrders } = this.controller;\r\n        return <div className=\"d-flex justify-content-around w-100 my-3\">\r\n            <div className=\"d-flex flex-column align-items-center\" onClick={() => openMyOrders('pendingpayment')}>\r\n                <FA name=\"file-text-o\" className=\"text-info fa-2x\" />\r\n                <small>待付款</small>\r\n            </div>\r\n            <div className=\"d-flex flex-column align-items-center\" onClick={() => openMyOrders('all')}>\r\n                <FA name=\"file-text-o\" className=\"text-info fa-2x\" />\r\n                <small>所有订单</small>\r\n            </div>\r\n        </div>\r\n    };\r\n\r\n    render() {\r\n        const { user } = nav;\r\n        let aboutRows: Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于百灵威\" />,\r\n                onClick: this.about\r\n            },\r\n            '',\r\n        ];\r\n\r\n        let rows: Prop[];\r\n        if (user === undefined) {\r\n            rows = aboutRows;\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    component: <button className=\"btn btn-success w-100 my-2\" onClick={() => nav.showLogin(undefined, true)}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                    </button>\r\n                },\r\n            );\r\n        }\r\n        else {\r\n            let logOutRows: Prop[] = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    bk: '',\r\n                    component: <button className=\"btn btn-danger w-100\" onClick={this.exit}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 退出登录\r\n                </button>\r\n                },\r\n            ];\r\n\r\n            rows = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.meInfo />\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.orderStates />,\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"地址管理\" />,\r\n                    onClick: this.openContactList\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"发票管理\" />,\r\n                    onClick: this.openInvoice\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text=\"修改密码\" />,\r\n                    onClick: this.changePassword\r\n                },\r\n            ]\r\n            rows.push(...aboutRows, ...logOutRows);\r\n        }\r\n        return <PropGrid rows={rows} values={{}} />;\r\n    }\r\n}\r\n\r\n\r\nfunction userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page, Edit, UiSchema, VPage } from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport { webUserSchema, webUserUiSchema, webUserContactSchema, webUserContactUiSchema } from './EditMeInfo';\r\nimport { FA, LMR } from 'tonva';\r\n\r\nexport class EditMeInfoFirstOrder extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    @observable private webUserData: any;\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone, mobile, email } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email\r\n        }\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"首次下单补充个人信息\">\r\n            <div className=\"alert alert-primary small\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning mr-3 my-1 float-left\" size=\"3x\" />\r\n                化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。\r\n                为此，需要您重新提供非虚拟的、可核查的信息。这些信息包括下面所有带有 <span className=\"text-danger\">*</span> 的信息。\r\n            </div>\r\n            <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                data={this.webUserData}\r\n                onItemChanged={this.onWebUserChanged} />\r\n            <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema(this.controller.pickAddress)}\r\n                data={this.webUserContactData}\r\n                onItemChanged={this.onWebUserContactChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { Controller, Context } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VMe } from './VMe';\r\nimport { CSelectShippingContact } from 'customer/CSelectContact';\r\nimport { EditMeInfoFirstOrder } from './EditMeInfoFirstOrder';\r\nimport { CInvoiceInfo } from 'customer/CInvoiceInfo';\r\nimport { CAddress } from 'customer/CAddress';\r\n\r\nexport class CMe extends Controller {\r\n\r\n    cApp: CCartApp;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    protected async internalStart() {\r\n\r\n    }\r\n\r\n    async changeWebUser(webUser: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUser(webUser);\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUserContact(webUserContact);\r\n    }\r\n\r\n    tab = () => this.renderView(VMe);\r\n\r\n    openMyOrders = async (state: string) => {\r\n        let { cOrder } = this.cApp;\r\n        await cOrder.openMyOrders(state);\r\n    }\r\n\r\n    openContactList = async () => {\r\n        let contactList = new CSelectShippingContact(this.cApp, undefined, false);\r\n        await contactList.start();\r\n    }\r\n\r\n    openInvoice = async () => {\r\n        let cInvoiceInfo = new CInvoiceInfo(this.cApp, undefined, false);\r\n        let { currentUser } = this.cApp;\r\n        let defaultSetting = await currentUser.getSetting();\r\n\r\n        let origInvoice = _.pick(defaultSetting, ['invoiceType', 'invoiceInfo']);\r\n        cInvoiceInfo.start(origInvoice);\r\n    }\r\n\r\n    openMeInfoFirstOrder = async () => {\r\n        await this.openVPage(EditMeInfoFirstOrder);\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n}","import { observable, autorun, IReactionDisposer } from 'mobx';\r\nimport _ from 'lodash';\r\nimport { Action, Query, TuidDiv, BoxId, Tuid } from 'tonva';\r\nimport { CCartApp } from '../CCartApp';\r\nimport { PackRow } from 'product/Product';\r\nimport { groupByProduct } from 'tools/groupByProduct';\r\nimport { createDeflate } from 'zlib';\r\n\r\nexport interface CartItem2 {\r\n    product: BoxId;\r\n    packs: CartPackRow[];\r\n    $isSelected?: boolean;\r\n    $isDeleted?: boolean;\r\n    createdate: number;\r\n}\r\n\r\nexport interface CartPackRow extends PackRow {\r\n    price: number;\r\n    retail?: number;\r\n    currency: any;\r\n}\r\n\r\nexport class Cart {\r\n    cApp: CCartApp;\r\n\r\n    private cartStore: CartStore;\r\n    private disposer: IReactionDisposer;\r\n\r\n    @observable data: any = {\r\n        list: observable<CartItem2>([]),\r\n    };\r\n    cartItems: CartItem2[];\r\n    count = observable.box<number>(0);\r\n    amount = observable.box<number>(0);\r\n\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n        this.cartItems = this.data.list;\r\n        this.disposer = autorun(this.calcSum);\r\n    }\r\n\r\n    dispose() {\r\n        this.disposer();\r\n    }\r\n\r\n    protected calcSum = () => {\r\n        let count = 0, amount = 0;\r\n        for (let cp of this.cartItems) {\r\n            let { $isSelected, $isDeleted, packs } = cp;\r\n            if ($isDeleted === true) continue;\r\n            for (let pi of packs) {\r\n                let { price, quantity } = pi;\r\n                count += quantity;\r\n                if (price === Number.NaN || quantity === Number.NaN) continue;\r\n                if ($isSelected === true) {\r\n                    amount += quantity * price;\r\n                }\r\n            }\r\n        }\r\n        this.count.set(count);\r\n        this.amount.set(parseFloat(amount.toFixed(2)));\r\n    }\r\n\r\n    async init(): Promise<void> {\r\n        if (this.cApp.isLogined)\r\n            this.cartStore = new CartRemote(this.cApp);\r\n        else\r\n            this.cartStore = new CartLocal(this.cApp);\r\n        let cartData = await this.cartStore.load();\r\n        let cartDataGrouped = groupByProduct(cartData);\r\n        if (cartDataGrouped && cartDataGrouped.length > 0) {\r\n            for (let i = 0; i < cartDataGrouped.length; i++) {\r\n                let { product, packs, createdate } = cartDataGrouped[i];\r\n                this.cartItems.push({\r\n                    product: product,\r\n                    packs: packs,\r\n                    $isSelected: true,\r\n                    $isDeleted: false,\r\n                    createdate: createdate,\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    /*\r\n    private mergeToRemote(localItems: any[]) {\r\n        let originLength = localItems.length;\r\n        let nowLength = this.items.length;\r\n        if (originLength > 0) {\r\n            if (nowLength > 0) {\r\n                // 合并，谁覆盖谁？\r\n                for (let i = 0; i < originLength; i++) {\r\n                    let { product: tempProduct, pack: tempPack } = localItems[i];\r\n                    let cartItemExits = this.items.find(v => v.product === tempProduct && v.pack === tempPack);\r\n                    if (cartItemExits) {\r\n                        // 如果本地购物车中的产品已经过期，则要删除\r\n                    } else {\r\n                        this.items.push(localItems[i]);\r\n                    }\r\n                }\r\n            } else {\r\n                this.items.push(...localItems);\r\n            }\r\n            // 保存到远程\r\n        }\r\n    }\r\n    */\r\n\r\n    getQuantity(productId: number, packId: number): number {\r\n        let cp = this.cartItems.find(v => v.$isDeleted !== true && v.product.id === productId);\r\n        if (!cp) return 0;\r\n        let cpp = cp.packs.find(v => v.pack.id === packId);\r\n        return cpp === undefined ? 0 : cpp.quantity;\r\n    }\r\n\r\n    isDeleted(productId: number): boolean {\r\n        let i = this.cartItems.findIndex(v => v.$isDeleted === true && v.product.id === productId);\r\n        return i !== -1;\r\n    }\r\n\r\n    getSelectedItems(): CartItem2[] {\r\n        return this.cartItems.filter(v => {\r\n            let { $isSelected, $isDeleted } = v;\r\n            return $isSelected === true && $isDeleted !== true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    add = async (product: BoxId, pack: BoxId, quantity: number, price: number, currency: any) => {\r\n\r\n        let cartItemExists = this.cartItems.find((e) => e.product.id === product.id);\r\n        if (!cartItemExists) {\r\n            cartItemExists = {\r\n                product: product,\r\n                packs: [{ pack: pack, quantity: quantity, price: price, currency: currency }],\r\n                $isSelected: true,\r\n                $isDeleted: false,\r\n                createdate: Date.now()\r\n            };\r\n            this.cartItems.push(cartItemExists);\r\n        }\r\n        else {\r\n            let { $isDeleted, packs } = cartItemExists;\r\n            if ($isDeleted === true)\r\n                packs.splice(0);\r\n\r\n            let packExists: CartPackRow = packs.find(e => e.pack.id === pack.id);\r\n            if (packExists === undefined)\r\n                packs.push({ pack: pack, quantity: quantity, price: price, currency: currency });\r\n            else {\r\n                packExists.quantity = quantity;\r\n                packExists.price = price;\r\n                packExists.currency = currency;\r\n            }\r\n            cartItemExists.$isSelected = true;\r\n            cartItemExists.$isDeleted = false;\r\n            cartItemExists.createdate = Date.now();\r\n        }\r\n\r\n        await this.cartStore.storeCart(product, pack, quantity, price, currency);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param rows\r\n     */\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        if (rows && rows.length > 0) {\r\n            rows.forEach(pe => {\r\n                let cartItemIndex = this.cartItems.findIndex(e => e.product.id === pe.productId);\r\n                if (cartItemIndex >= 0) {\r\n                    let cartItem = this.cartItems[cartItemIndex];\r\n                    let i = cartItem.packs.findIndex(e => e.pack.id === pe.packId)\r\n                    if (i >= 0) {\r\n                        cartItem.packs.splice(i, 1);\r\n                        if (cartItem.packs.length === 0) {\r\n                            this.cartItems.splice(cartItemIndex, 1);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            this.cartStore.removeFromCart(rows);\r\n        }\r\n    }\r\n\r\n    /*\r\n    setDeletedMark(productId: number, packId: number) {\r\n        let cp = this.items.find(v => v.$isDeleted !== true && v.product === productId && v.pack === packId);\r\n        if (cp !== undefined)\r\n            cp.$isDeleted = true;\r\n    }\r\n\r\n    async removeDeletedItem() {\r\n        let rows: { product: number, packItem: CartPackRow }[] = [];\r\n        for (let cp of this.items) {\r\n            let { quantity, $isDeleted } = cp;\r\n            if ($isDeleted === true || quantity === 0) {\r\n                // TODO:\r\n            }\r\n        }\r\n        if (rows.length === 0) return;\r\n        await this.cartStore.removeFromCart(rows);\r\n\r\n        // 下面是从本地数据结构中删除\r\n        for (let cp of this.items) {\r\n            let { packs } = cp;\r\n            let packIndexes: number[] = [];\r\n            let len = packs.length;\r\n            for (let i = 0; i < len; i++) {\r\n                if (packs[i].quantity === 0) packIndexes.push(i);\r\n            }\r\n            for (let i = packIndexes.length - 1; i >= 0; i--) packs.splice(packIndexes[i], 1);\r\n        }\r\n\r\n        let itemIndexes: number[] = [];\r\n        let len = this.items.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let { $isDeleted, packs } = this.items[i];\r\n            if ($isDeleted === true || packs.length === 0) itemIndexes.push(i);\r\n        }\r\n        for (let i = itemIndexes.length - 1; i >= 0; i--) this.items.splice(itemIndexes[i], 1);\r\n    }\r\n\r\n    async clear() {\r\n        this.items.forEach(v => v.$isDeleted = true);\r\n        await this.removeDeletedItem();\r\n    }\r\n    */\r\n\r\n}\r\n\r\nabstract class CartStore {\r\n\r\n    protected cApp: CCartApp;\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n    }\r\n    abstract get isLocal(): boolean;\r\n    abstract async load(): Promise<CartItem2[]>;\r\n    abstract async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any): Promise<void>;\r\n    abstract async removeFromCart(rows: [{ productId: number, packId: number }]): Promise<void>;\r\n}\r\n\r\nclass CartRemote extends CartStore {\r\n    private getCartQuery: Query;\r\n    private setCartAction: Action;\r\n    private removeFromCartAction: Action;\r\n\r\n    get isLocal(): boolean { return false }\r\n\r\n    constructor(cApp: CCartApp) {\r\n        super(cApp);\r\n\r\n        let { cUqOrder } = this.cApp;\r\n        this.getCartQuery = cUqOrder.query('getcart')\r\n        this.setCartAction = cUqOrder.action('setcart');\r\n        this.removeFromCartAction = cUqOrder.action('removefromcart');\r\n    }\r\n\r\n    async load(): Promise<CartItem2[]> {\r\n        return await this.getCartQuery.page(undefined, 0, 100);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param product\r\n     * @param pack\r\n     * @param quantity\r\n     * @param price\r\n     * @param currency\r\n     */\r\n    async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any) {\r\n        await this.setCartAction.submit({\r\n            product: product.id,\r\n            pack: pack.id,\r\n            price: price,\r\n            currency: currency,\r\n            quantity: quantity\r\n        });\r\n    }\r\n\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        let param = rows.map(e => { return { product: e.productId, pack: e.packId } });\r\n        await this.removeFromCartAction.submit({ rows: param });\r\n    }\r\n}\r\n\r\nconst LOCALCARTNAME: string = \"cart\";\r\nclass CartLocal extends CartStore {\r\n\r\n    private cartData: any[] = [];\r\n    private productTuid: Tuid;\r\n    private packTuid: TuidDiv;\r\n    constructor(cApp: CCartApp) {\r\n        super(cApp);\r\n        let { cUqProduct } = cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n        this.packTuid = cUqProduct.tuidDiv('productx', 'packx');\r\n    }\r\n\r\n    get isLocal(): boolean { return true }\r\n\r\n    async load(): Promise<CartItem2[]> {\r\n        try {\r\n            let cartstring = localStorage.getItem(LOCALCARTNAME);\r\n            if (cartstring === null) return [];\r\n            this.cartData = JSON.parse(cartstring);\r\n            let cartDataBoxed = [];\r\n            for (let i = 0; i < this.cartData.length; i++) {\r\n                let { product, pack, quantity, price, currency } = this.cartData[i];\r\n                let productbox = this.productTuid.boxId(product);\r\n                let packbox = this.packTuid.boxId(pack);\r\n                cartDataBoxed.push({\r\n                    product: productbox,\r\n                    pack: packbox,\r\n                    quantity: quantity,\r\n                    price: price,\r\n                    currency: currency\r\n                })\r\n            }\r\n            return cartDataBoxed;\r\n        }\r\n        catch {\r\n            localStorage.removeItem(LOCALCARTNAME);\r\n            this.cartData = [];\r\n            return this.cartData;\r\n        }\r\n    }\r\n\r\n    async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any) {\r\n        let cartItemExists = this.cartData.find(e => e.product === product.id && e.pack === pack.id);\r\n        if (cartItemExists !== undefined) {\r\n            cartItemExists.quantity = quantity;\r\n            cartItemExists.price = price;\r\n            cartItemExists.currency = currency && currency.id;\r\n        } else\r\n            this.cartData.push({ product: product.id, pack: pack.id, quantity: quantity, price: price, currency: currency && currency.id });\r\n        localStorage.setItem(LOCALCARTNAME, JSON.stringify(this.cartData));\r\n    }\r\n\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n\r\n        rows.forEach(e => {\r\n            let i = this.cartData.findIndex(v => v.product = e.productId && v.pack === e.packId);\r\n            if (i >= 0)\r\n                this.cartData.splice(i, 1);\r\n        })\r\n        localStorage.setItem(LOCALCARTNAME, JSON.stringify(this.cartData));\r\n    }\r\n}","//import * as React from 'react';\r\nimport { User, nav } from 'tonva';\r\nimport { CApp, CUq } from 'tonva';\r\nimport { CCart } from 'cart/CCart';\r\nimport { CProduct } from 'product';\r\nimport { COrder } from 'order/COrder';\r\nimport { CHome } from './home/CHome';\r\nimport { CProductCategory } from 'productCategory/CProductCategory';\r\n//import { CSelectContact } from 'customer/CSelectContact';\r\nimport { CMember } from 'member/CMember';\r\nimport { WebUser } from 'CurrentUser';\r\nimport { consts } from './home/consts';\r\nimport { CMe } from 'me/CMe';\r\nimport { Cart } from 'cart/Cart';\r\nimport { GLOABLE } from 'ui';\r\n\r\nexport class CCartApp extends CApp {\r\n    cart: Cart;\r\n    topKey: any;\r\n\r\n    currentSalesRegion: any;\r\n    currentLanguage: any;\r\n    currentUser: WebUser;\r\n\r\n    cUqOrder: CUq;\r\n    cUqProduct: CUq;\r\n    cUqCommon: CUq;\r\n    cUqWebUser: CUq;\r\n    cUqCustomer: CUq;\r\n    cUqCustomerDiscount: CUq;\r\n    cUqPromotion: CUq;\r\n    cUqWarehouse: CUq;\r\n    cUqSalesTask: CUq;\r\n    cUqMember: CUq;\r\n\r\n    cHome: CHome;\r\n    cCart: CCart;\r\n    cProduct: CProduct;\r\n    cOrder: COrder;\r\n    //cSelectContact: CSelectContact;\r\n    cProductCategory: CProductCategory;\r\n    cMember: CMember;\r\n    cMe: CMe;\r\n\r\n    protected async internalStart() {\r\n        this.cUqOrder = this.getCUq(consts.uqOrder);\r\n        this.cUqProduct = this.getCUq(consts.uqProduct);\r\n        this.cUqCommon = this.getCUq(consts.uqCommon);\r\n        this.cUqWebUser = this.getCUq(consts.uqWebUser);\r\n        this.cUqCustomer = this.getCUq(consts.uqCustomer);\r\n        this.cUqCustomerDiscount = this.getCUq(consts.uqCustomerDiscount);\r\n        this.cUqPromotion = this.getCUq(consts.uqPromotion);\r\n        this.cUqWarehouse = this.getCUq(consts.uqWarehouse);\r\n        this.cUqSalesTask = this.getCUq(consts.uqSalesTask);\r\n        this.cUqMember = this.getCUq(consts.uqMember);\r\n\r\n        let salesRegionTuid = this.cUqCommon.tuid('salesregion');\r\n        this.currentSalesRegion = await salesRegionTuid.load(GLOABLE.SALESREGION_CN);\r\n\r\n        let languageTuid = this.cUqCommon.tuid('language');\r\n        this.currentLanguage = await languageTuid.load(GLOABLE.CHINESE);\r\n\r\n        this.currentUser = new WebUser(this.cUqWebUser, this.cUqCustomer);\r\n        if (this.isLogined) {\r\n            this.currentUser.setUser(this.user);\r\n        }\r\n\r\n        this.cart = new Cart(this);\r\n        await this.cart.init();\r\n\r\n        this.cProductCategory = new CProductCategory(this, undefined);\r\n        this.cCart = new CCart(this, undefined);\r\n        this.cHome = new CHome(this, undefined);\r\n        this.cProduct = new CProduct(this, undefined);\r\n        this.cOrder = new COrder(this, undefined);\r\n        //this.cSelectContact = new CSelectContact(this, undefined);\r\n        this.cMember = new CMember(this, undefined);\r\n        this.cMe = new CMe(this, undefined);\r\n\r\n        let promises: PromiseLike<void>[] = [];\r\n        promises.push(this.cProductCategory.start());\r\n        await Promise.all(promises);\r\n        this.showMain();\r\n        this.topKey = nav.topKey();\r\n    }\r\n\r\n    showMain(initTabName?: string) {\r\n        this.openVPage(this.VAppMain, initTabName);\r\n    }\r\n\r\n    async loginCallBack(user: User) {\r\n        /*\r\n        if (this.cartService.isLocal) {\r\n            let cartLocal = { ...this.cartViewModel } as CartViewModel;\r\n            // this.cartService.clear(this.cartViewModel);\r\n            this.cartService = CartServiceFactory.getCartService(this);\r\n            this.cartViewModel = await this.cartService.load();\r\n            // this.cartViewModel = await this.cartService.merge(cartLocal);\r\n        }\r\n        */\r\n    }\r\n\r\n    protected onDispose() {\r\n        this.cart.dispose();\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { TuidUI, tv, UqUI } from 'tonva';\r\n\r\nexport const addressUI: TuidUI = {\r\n    content: (values: any) => {\r\n        let { country, province, city, county } = values;\r\n        return <>\r\n            {tv(country)}{tv(province, undefined, undefined, () => <></>)}{tv(city, undefined, undefined, () => <></>)}{tv(county, undefined, undefined, () => <></>)}\r\n        </>\r\n    }\r\n}\r\n\r\nexport const countryUI: TuidUI = {\r\n    content: (values: any) => {\r\n        return <> {values.chineseName} </>;\r\n    }\r\n}\r\n\r\nexport const currencyUI: TuidUI = {\r\n    content: (values: any) => {\r\n        return <> {values.name} </>;\r\n    }\r\n}\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: {\r\n        address: addressUI,\r\n        country: countryUI,\r\n        province: countryUI,\r\n        city: countryUI,\r\n        county: countryUI,\r\n        currency: currencyUI,\r\n    },\r\n}\r\n\r\nexport default uqUI;\r\n","import * as React from 'react';\r\nimport { TuidUI, tv } from 'tonva';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nexport const productUI: TuidUI = {\r\n    content: (values: any) => {\r\n        let product = values;\r\n        let { brand, description, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"row d-flex\">\r\n            <div className=\"col-12\">\r\n                <div className=\"row py-2\">\r\n                    <div className=\"col-12\"><strong>{description}</strong></div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                    </div>\r\n                    <div className=\"col-9\">\r\n                        <div className=\"row\">\r\n                            {item('CAS', CAS)}\r\n                            {item('纯度', purity)}\r\n                            {item('分子式', molecularFomula)}\r\n                            {item('分子量', molecularWeight)}\r\n                            {item('产品编号', origin)}\r\n                            {tv(brand, (values: any) => <>{item(\"品牌\", values.name)}</>)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    },\r\n    divs: {\r\n        packx: {\r\n            content: (values: any) => {\r\n                let { radiox, radioy, unit } = values;\r\n                if (radiox !== 1) return <>{radiox} * {radioy}{unit}</>;\r\n                return <>{radioy}{unit}</>;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction item(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 text-muted pr-0\">{caption}:</div>\r\n        <div className=\"col-8\">{value}</div>\r\n    </>;\r\n}","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\n\r\nexport const contactUI = {\r\n    content: (values: any) => {\r\n        let { name, mobile, organizationName, address, addressString } = values;\r\n        return <div className=\"flex-grow-1\">\r\n            <b>\r\n                {name}\r\n            </b>\r\n            &nbsp; {mobile} &nbsp; {organizationName}<br />\r\n            <small>{tv(address)} {addressString}</small>\r\n        </div>\r\n    }\r\n}","import { UqUI, Tuid } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import { countryUI, addressUI, currencyUI } from 'ui/common';\r\nimport { productUI } from 'ui/product/tuid/product';\r\nimport { contactUI } from 'ui/customer/tuid/contact';\r\n\r\nexport default {\r\n    productx: productUI,\r\n    address: addressUI,\r\n    country: countryUI,\r\n    province: countryUI,\r\n    city: countryUI,\r\n    county: countryUI,\r\n    contact: contactUI,\r\n    currency: currencyUI,\r\n}","import { UqUI, Tuid } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import { productCategoryUI } from './productCategory';\r\nimport { productUI } from './product';\r\n\r\nexport default {\r\n    productx: productUI,\r\n    productCategory: productCategoryUI,\r\n}\r\n","import * as React from 'react';\r\n\r\nexport const productCategoryUI = {\r\n\r\n    content: (values: any) => {\r\n        let { children } = values;\r\n        return <>\r\n            aaa\r\n        </>\r\n    }\r\n}","import { UqUI } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import { contactUI } from './contact';\r\nimport { addressUI, countryUI } from 'ui/common';\r\nimport { invoiceInfoUI, invoiceTypeUI } from './invoice';\r\n\r\nexport default {\r\n    contact: contactUI,\r\n    address: addressUI,\r\n    country: countryUI,\r\n    province: countryUI,\r\n    city: countryUI,\r\n    county: countryUI,\r\n    invoiceInfo: invoiceInfoUI,\r\n    invoiceType: invoiceTypeUI\r\n}","import * as React from 'react';\r\n\r\nexport const invoiceTypeUI = {\r\n    content: (values: any) => {\r\n        let { id, description } = values;\r\n        return <div className=\"flex-grow-1\">\r\n            {description}\r\n        </div>\r\n    }\r\n}\r\n\r\n\r\nexport const invoiceInfoUI = {\r\n    content: (values: any) => {\r\n        let { title, taxNo } = values;\r\n        return <div className=\"flex-grow-1\">\r\n            <b>\r\n                {title}\r\n            </b>\r\n            &nbsp; {taxNo}\r\n        </div>\r\n    }\r\n}\r\n","import { UqUI, Tuid } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import * as React from 'react';\r\nimport { TuidUI } from 'tonva';\r\n\r\nconst warehouse: TuidUI = {\r\n    content: (values: any) => {\r\n        let { name } = values;\r\n        return <div>\r\n            {name}\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default {\r\n    warehouse: warehouse,\r\n}\r\n","import * as React from 'react';\r\nimport logo from '../images/logo.png';\r\n\r\nexport const jnkTop = <div className=\"d-flex align-items-center\">\r\n    <img className=\"h-3c position-absolute\" src={logo} />\r\n    <div className=\"h3 flex-fill text-center\">\r\n        <span className=\"text-primary mr-3\">百灵威</span>\r\n    </div>\r\n</div>;\r\n","import { AppUI, CApp } from 'tonva';\r\nimport { VHome } from './main';\r\nimport { CCartApp } from '../CCartApp';\r\nimport commonUI from './common';\r\nimport orderUI from './order';\r\nimport productUI from './product';\r\nimport customerUI from './customer';\r\nimport warehouseUI from './warehouse';\r\nimport { jnkTop } from '../me/loginTop';\r\nimport AnalyticalChemistry from '../images/AnalyticalChemistry.png';\r\nimport LabSupplies from '../images/LabSupplies.png';\r\nimport LifeScience from '../images/LifeScience.png';\r\nimport MaterialScience from '../images/MaterialScience.png';\r\nimport OrganicChemistry from '../images/OrganicChemistry.png';\r\n\r\nconst ui: AppUI = {\r\n    appName: \"百灵威系统工程部/cart\",\r\n    CApp: CCartApp,\r\n    main: VHome,\r\n    uqs: {\r\n        '百灵威系统工程部/common': commonUI,\r\n        '百灵威系统工程部/order': orderUI,\r\n        '百灵威系统工程部/product': productUI,\r\n        '百灵威系统工程部/customer': customerUI,\r\n        '百灵威系统工程部/webUser': customerUI,\r\n        '百灵威系统工程部/warehouse': warehouseUI,\r\n    },\r\n    loginTop: jnkTop,\r\n    version: \"1.0.1\"\r\n}\r\n\r\n/*\r\nexport const GLOABLE = {\r\n    CHINA: 44,\r\n    CHINESE: 196,\r\n    SALESREGION_CN: 1,\r\n    ROOTCATEGORY: {\r\n        47: {\r\n            src: OrganicChemistry,\r\n            labelColor: 'text-info',\r\n        },\r\n        470: {\r\n            src: AnalyticalChemistry,\r\n            labelColor: 'text-success',\r\n        },\r\n        1013: {\r\n            src: LifeScience,\r\n            labelColor: 'text-danger',\r\n        },\r\n        1219: {\r\n            src: MaterialScience,\r\n            labelColor: 'text-warning',\r\n        },\r\n        1545: {\r\n            src: LabSupplies,\r\n            labelColor: 'text-primary',\r\n        },\r\n    }\r\n}\r\n*/\r\n\r\nexport const GLOABLE = {\r\n    CHINA: 43,\r\n    CHINESE: 197,\r\n    SALESREGION_CN: 1,\r\n    ROOTCATEGORY: {\r\n        7: {\r\n            src: OrganicChemistry,\r\n            labelColor: 'text-info',\r\n        },\r\n        430: {\r\n            src: AnalyticalChemistry,\r\n            labelColor: 'text-success',\r\n        },\r\n        986: {\r\n            src: LifeScience,\r\n            labelColor: 'text-danger',\r\n        },\r\n        1214: {\r\n            src: MaterialScience,\r\n            labelColor: 'text-warning',\r\n        },\r\n        1545: {\r\n            src: LabSupplies,\r\n            labelColor: 'text-primary',\r\n        },\r\n    }\r\n}\r\nexport default ui;\r\n","\r\nimport * as React from 'react';\r\nimport './App.css';\r\nimport { NavView, nav, Page, Tabs } from 'tonva';\r\nimport { startApp } from 'tonva';\r\nimport ui from './ui';\r\n//import { faceTabs } from 'facetabs';\r\n\r\n//const tonvaApp = \"bruce/TestApp\";\r\n\r\nclass App extends React.Component {\r\n\r\n  private onLogined = async () => {\r\n    await startApp(ui);\r\n    /*\r\n    let page = <Page header={false}>\r\n      <Tabs tabs={faceTabs} />\r\n    </Page>\r\n    nav.push(page);\r\n    */\r\n    //let b = new B('b');\r\n    //await b.d();\r\n    //nav.push(<div>ddd</div>)\r\n  }\r\n  public render() {\r\n    return <NavView onLogined={this.onLogined} notLogined={this.onLogined} />\r\n  }\r\n}\r\n\r\nexport default App;\r\n\r\n/*\r\nclass B extends A {\r\n  constructor(b:string) {\r\n    super(b);\r\n  }\r\n  //get super() {return this.A}\r\n  async test():Promise<string> {return 'B'}\r\n  async superTest() {\r\n    console.log('superTest: ' + super.t())\r\n    return super.test()\r\n  }\r\n  t() {return 'tb'}\r\n  async d() {\r\n    console.log(super.test);\r\n    console.log(this.test);\r\n    console.log(super.t);\r\n    console.log(this.t);\r\n    console.log('A.test ' + await this.superTest());\r\n    console.log('B.test ' + await this.test());\r\n    console.log('A.t ' + super.t());\r\n    console.log('B.t ' + this.t());\r\n  }\r\n}\r\n*/","// tslint:disable:no-console\r\n// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the 'N+1' visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\nexport default function register() {\r\n  // if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n  if ('serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL!,\r\n      window.location.toString()\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string) {\r\n  navigator.serviceWorker\r\n    .register(swUrl, { scope: '.' })\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker) {\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the old content will have been purged and\r\n                // the fresh content will have been added to the cache.\r\n                // It's the perfect time to display a 'New content is\r\n                // available; please refresh.' message in your web app.\r\n                console.log('New content is available; please refresh.');\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // 'Content is cached for offline use.' message.\r\n                console.log('Content is cached for offline use.');\r\n              }\r\n            }\r\n          };\r\n        }\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type')!.indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root') as HTMLElement\n);\nregisterServiceWorker();\n","module.exports = \"data:image/png;base64,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\"","import * as React from 'react';\r\nimport { Render } from './render';\r\n\r\nexport interface MainSubs<M, S> {\r\n    main: M;\r\n    subs: S[];\r\n}\r\n\r\nexport abstract class ViewBase<T> {\r\n    model: T;\r\n    abstract render(): JSX.Element;\r\n}\r\n\r\nexport class ViewMainSubs<M, S> extends ViewBase<MainSubs<M, S>> {\r\n    protected main: Render<M>;\r\n    protected sub: Render<S>;\r\n    constructor(main: Render<M>, sub: Render<S>) {\r\n        super();\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    protected subsContainer(subViews: JSX.Element[]): JSX.Element {\r\n        return <div>{subViews}</div>\r\n    }\r\n\r\n    protected renderSubItems(): JSX.Element[] {\r\n        let { subs } = this.model;\r\n        if (!subs) return null;\r\n        let subViews: JSX.Element[] = subs.map((v, index) => {\r\n            return <this.sub key={index} {...v} />;\r\n        });\r\n        return subViews;\r\n    }\r\n\r\n    protected renderSubs = (): JSX.Element => {\r\n        return this.subsContainer(this.renderSubItems());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        let { main } = this.model;\r\n        return <>\r\n            <this.main {...main} />\r\n            <this.renderSubs />\r\n        </>;\r\n    }\r\n}\r\n\r\nexport class ViewListMainSubs<M, S> extends ViewBase<MainSubs<M, S>[]> {\r\n    private row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>;\r\n    private main: Render<M>;\r\n    private sub: Render<S>;\r\n    constructor(\r\n        row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>,\r\n        main: Render<M>,\r\n        sub: Render<S>) {\r\n        super();\r\n        this.row = row;\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    render(): JSX.Element {\r\n        return <>\r\n            {this.model.map((v, index) => {\r\n                let view = new this.row(this.main, this.sub);\r\n                view.model = v;\r\n                return <React.Fragment key={index}>{view.render()}</React.Fragment>;\r\n            })}\r\n        </>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { MainProduct, SubPack } from './model';\r\n\r\nexport type Render<T> = (model: T) => JSX.Element;\r\n\r\nexport function renderMainProduct(model: MainProduct): JSX.Element {\r\n    return <div>\r\n        {model.description}\r\n    </div>\r\n}\r\n\r\nexport function renderSubPack(model: SubPack): JSX.Element {\r\n    let { pack, vipPrice, price, quantity, amount } = model;\r\n    return <div>\r\n        {pack.unit}, {vipPrice}, {price}, {quantity}, {amount}\r\n    </div>\r\n}\r\n","export * from './mainSubs';\r\nexport * from './model';\r\nexport * from './render';\r\n","module.exports = __webpack_public_path__ + \"static/media/pig.772a31a6.png\";","module.exports = __webpack_public_path__ + \"static/media/AnalyticalChemistry.f85ff3e0.png\";","module.exports = __webpack_public_path__ + \"static/media/LabSupplies.3f6ce00f.png\";","module.exports = __webpack_public_path__ + \"static/media/LifeScience.5c2e6ff5.png\";","module.exports = __webpack_public_path__ + \"static/media/MaterialScience.f2439aa0.png\";","module.exports = __webpack_public_path__ + \"static/media/OrganicChemistry.6d56971c.png\";"],"sourceRoot":""}