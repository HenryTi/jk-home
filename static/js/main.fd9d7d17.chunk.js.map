{"version":3,"sources":["ui/main.tsx","cart/VCartLabel.tsx","tools/minusPlusWidget.tsx","tools/productImage.tsx","product/VProduct.tsx","product/VProductList.tsx","mainSubs/loader.ts","product/itemLoader.ts","product/CProduct.tsx","cart/VCart.tsx","cart/CCart.tsx","order/VCreateOrder.tsx","order/Order.ts","order/OrderSuccess.tsx","customer/VContactList.tsx","customer/VContact.tsx","customer/VAddress.tsx","customer/CAddress.tsx","customer/CSelectContact.tsx","order/VMyOrders.tsx","order/VOrderDetail.tsx","customer/VInvoiceInfo.tsx","customer/CInvoiceInfo.tsx","tools/groupByProduct.ts","order/VCouponEdit.tsx","order/CCoupon.tsx","order/COrder.tsx","home/VSiteHeader.tsx","home/VSearchHeader.tsx","home/VHome.tsx","home/CHome.tsx","productCategory/VRootCategory.tsx","productCategory/VCategory.tsx","productCategory/CProductCategory.tsx","member/VMember.tsx","member/CMember.tsx","CurrentUser.ts","home/consts.ts","me/about.tsx","me/EditMeInfo.tsx","me/VMe.tsx","me/EditMeInfoFirstOrder.tsx","me/CMe.tsx","cart/Cart2.ts","cart/CartService.tsx","ui/common.tsx","ui/product/tuid/product.tsx","ui/customer/tuid/contact.tsx","ui/customer/index.tsx","ui/customer/tuid/index.tsx","ui/customer/tuid/invoice.tsx","ui/index.tsx","CCartApp.tsx","ui/order/index.tsx","ui/order/tuid/index.tsx","ui/product/index.tsx","ui/product/tuid/index.tsx","ui/product/tuid/productCategory.tsx","ui/warehouse/index.tsx","ui/warehouse/tuid/index.tsx","me/loginTop.tsx","App.tsx","registerServiceWorker.ts","index.tsx","images/logo.png","mainSubs/mainSubs.tsx","mainSubs/render.tsx","mainSubs/index.ts","images/AnalyticalChemistry.png","images/LabSupplies.png","images/LifeScience.png","images/MaterialScience.png","images/OrganicChemistry.png","images/pig.png"],"names":["main_color","selected","main_VHome","_super","VHome","_this","apply","this","arguments","render","param","_a","controller","cHome","cCart","cMember","cMe","cartViewModel","faceTabs","name","label","icon","content","tab","notify","undefined","count","map","v","caption","Object","dist","react","header","tabs","tslib_es6","prototype","open","openPage","VCartLabel_VCartLabel","VCartLabel","showCart","start","index_module","badge","onClick","pointer","cApp","get","className","classnames_default","keys","minusPlusWidget_MinusPlusWidget","MinusPlusWidget","minusClick","getValue","setValue","plusClick","ref","input","p","parentElement","tagName","disabled","renderContent","renderTemplet","cn","hasError","itemSchema","required","cursorPointer","minusColor","plusColor","hasFocus","hasAction","readOnly","hasValue","NaN","value","minus","invisible","type","defaultValue","onChange","placeholder","onKeyDown","onFocus","evt","onBlur","maxLength","plus","renderErrors","isValidKey","key","find","call","mobx_module","imagePath","altimagePath","ProductImage","props","style","chemicalId","src","substr","altImage","schema","VProduct_VProduct","VProduct","renderProduct","product","brand","description","descriptionC","CAS","purity","molecularFomula","molecularWeight","origin","imageUrl","productPropItem","renderBrand","arrTemplet","item","pack","retail","vipPrice","promotionPrice","inventoryAllocation","futureDeliveryTimeDescription","right","price","minPrice","retailUI","deliveryTimeUI","length","index","warehouse","quantity","deliveryTimeDescription","values","push","onQuantityChanged","context","prev","data","currency","cartService","addToCart","id","sent","removeFromCart","productId","packId","uiSchema","Templet","items","widget","WidgetClass","onChanged","renderPack","formData","page","renderSearchHeader","cartLabel","renderCartLabel","viewProduct","mainSubs","model","main","Math","min","Infinity","VProductList_VProductList","VProductList","onProductClick","showProductDetail","onScrollBottom","pageProducts","more","cart","none","searchKey","before","loader_Loader","Loader","entities","schemaLoaded","initEntities","loadSchemas","Promise","all","load","initData","loadToData","itemLoader_LoaderBrand","LoaderBrand","cUqProduct","brandTuid","tuid","brandId","itemLoader_LoaderProductChemical","LoaderProductChemical","productTuid","productChemicalMap","_b","lodash_default","a","merge","brandLoader","obj","productChemical","chemical","packs","packx","forEach","e","itemLoader_LoaderProductChemicalWithPrices","LoaderProductChemicalWithPrices","getFutureDeliveryTimeDescription","salesRegionId","getFutureDeliveryTime","table","salesRegion","futureDeliveryTime","minValue","maxValue","unit","cUqCustomerDiscount","cUqWarehouse","cUqPromotion","getCustomerDiscount","query","priceMap","getInventoryAllocationQuery","getPromotionPackQuery","subs","productLoader","_c","discount","currentUser","currentSalesRegion","currentLanguage","hasCustomer","customer","currentCustomer","discountSetting","currentSalesRegionId","prices","filter","discountinued","expireDate","Date","now","element","ret","round","getQuantity","promises","language","results","fd","i","promotion","discount_1","CProduct_PageProducts","PageProducts","searchProductQuery","firstSize","pageSize","pageStart","setPageStart","seq","CProduct_CProduct","CProduct","res","openVPage","internalStart","searchByKey","first","searchByCategory","category","productCategoryId","productCategory","captionClass","capClass","valClass","cartSchema","arr","VCart_VCart","VCart","CheckOutButton","checkOut","amount","renderCartItem","renderCartProduct","packsRow","selectable","deletable","restorable","list","ArrContainer","RowContainer","RowSeperator","cartForm","cartData","test","row","cartItems","testButton","params","footer","empty","size","CCart_CCart","CCart","renderCart","renderView","parentData","onRowStateChanged","deleted","alert","loginCallback","user","setUser","loginCallBack","closePage","doCheckOut","selectedCartItems","getSelectedItem","isLogined","showLogin","cOrder","cProduct","isDeleted","blankTime","VCreateOrder_VCreateOrder","VCreateOrder","useShippingAddress","shippingAddressIsBlank","invoiceAddressIsBlank","invoiceIsBlank","nullContact","parseFloat","toFixed","renderOrderItem","orderItem","orderItemKey","onSubmit","orderData","shippingContact","invoiceContact","invoiceType","invoiceInfo","setTimeout","submitOrder","onSelectShippingContact","onSelectInvoiceContact","openMeInfo","onInvoiceInfoEdit","onCouponEdit","fillMeInfo","role","allowOrdering","fontSize","chevronRight","shippingAddressBlankTip","invoiceAddressBlankTip","divInvoiceContact","invoiceContactUI","defaultChecked","currentTarget","checked","invoiceBlankTip","invoiceInfoUI","title","freightFeeUI","freightFeeRemittedUI","freightFee","freightFeeRemitted","couponUI","coupon","offsetUI","remittedUI","couponOffsetAmount","couponRemitted","code","orderItems","productAmount","Order_Order","Order","defineProperty","reduce","pv","cv","subAmount","getDataForSave","oi","pk","webUser","organization","orderitems","Order_OrderItem","OrderItem","c","OrderSuccess_OrderSuccess","OrderSuccess","orderCreateResult","back","no","VContactList_VContactList","VContactList","onContactRender","userContact","contact","onEditContact","onContactSelected","onNewContact","userContacts","contactList","VContact_schema","VContact_VContact","VContact","visible","organizationName","mobile","telephone","email","rules","address","pickId","pickAddress","country","province","city","county","chineseName","addressString","isDefault","submit","onSaveContact","form","buttonClick","onFormButtonClick","saveContact","onDelContact","userContactData","vCall","VContact_VConfirmDeleteContact","delContact","buttonDel","contactData","clone","fromOrderCreation","onButtonClick","fieldLabelSize","VConfirmDeleteContact","onConfirm","returnCall","left","top","VAddress_VAddress","VAddress","backLevel","provinces","renderPCC","onProvinceClick","pcc","border","marginRight","marginBottom","provinceId","getProvinceCities","cities","len","onCityClick","openPageElement","saveAddress","cityId","getCityCounties","counties","onCountyClick","countyId","getCountryProvince","CAddress_CAddress","CAddress","countryId","getCountryProvincesQuery","getProvinceCitiesQuery","getCityCountiesQuery","addressTuid","save","newAddress","addressId","boxId","cUqCommon","CSelectContact_CSelectContact","CSelectContact","userContactId","contactTuid","getSetting","userSetting","getIsDefault","newContact","newContactId","contactBox","addContact","setDefaultContact","backPage","cUqCustomer","getContacts","CSelectContact_CSelectShippingContact","CSelectShippingContact","contactId","setDefaultShippingContact","CSelectContact_CSelectInvoiceContact","CSelectInvoiceContact","setDefaultInvoiceContact","VMyOrders_VMyOrders","VMyOrders","renderOrder","order","openOrderDetail","date","discription","flow","pendingOrders","isSelected","currentState","getMyOrders","allOrders","tabPosition","VOrderDetail_VOrderDetail","VOrderDetail","brief","state","invoiceTypeUI","VOrderDetail_invoiceInfoUI","invoiceTemplate","taxNo","bank","accountNo","VInvoiceInfo_schema","commonRequired","valueAddedRequired","commonVisible","valueAddedVisible","VInvoiceInfo_VInvoiceInfo","VInvoiceInfo","invoice","saveInvoiceInfo","onSaveInvoice","onInvoiceTypeClick","event","parseInt","origInvoice","frm","buildForm","htmlFor","requiredFields","visibleFields","CInvoiceInfo_CInvoiceInfo","CInvoiceInfo","invoiceTypeTuid","invoiceInfoTuid","invoiceInfoBox","newInvoiceInfo","newInvoiceInfoId","invoiceBox","setDefaultInvoice","groupByProduct","packItems","result","cd","packRow","cpi","_i","packItems_1","VCouponEdit_VCouponEdit","VCouponEdit","applyCoupon","couponInput","tips","tipsUI","CCoupon_CCoupon","CCoupon","isValidCoupon","webuser","validationResult","rtn","cUqSalesTask","action","FREIGHTFEEFIXED","FREIGHTFEEREMITTEDSTARTPOINT","COrder_COrder","COrder","createOrderFromCart","getDefaultShippingContact","_e","getDefaultInvoiceContact","getDefaultInvoiceType","_d","getDefaultInvoiceInfo","orderSheet","popTo","topKey","onSelectContact","typeSelectContact","preferential","validitydate","isValid","getTime","removeCoupon","openMyOrders","getPendingPaymentQuery","mySheets","cInvoiceInfo","newInvoice","orderId","getSheet","orderItemsGrouped","packItems_2","orderItemGroupByProduct","loaderProduct","openMeInfoFirstOrder","cUqOrder","sheet","getDefaultSetting","defaultSetting","getContact","contact0","contactArr","VSiteHeader_VSiteHeader","VSiteHeader","logo_default","alt","height","width","VSearchHeader_VSearchHeader","VSearchHeader","onSearch","VHome_VHome","renderSection","subtitle","siteHeader","renderSiteHeader","renderCategoryRootList","CHome_CHome","HomeSections","sectionTuid","search","CHome","cProductCategory","renderRootList","x","685","labelColor","1092","AnalyticalChemistry_default","1626","LifeScience_default","1906","MaterialScience_default","2211","LabSupplies_default","titleTitle","overflow","textOverflow","whiteSpace","subStyle","VRootCategory_VRootCategory","VRootCategory","categoryClick","categoryWapper","parent","openMainPage","renderRootCategory","children","productCategoryID","paddingRight","renderSubCategory","color","total","renderThirdCategory","categories","categories2","renderRoot","root","console","log","join","VCategory_VCategory","VCategory","renderChild","childWapper","breadCrumb","arial-babel","breadCrumbItem","categoryWaper","CProductCategory_CProductCategory","CProductCategory","getRootCategoryQuery","getRootCategoriesQuery","getChildrenCategoryQuery","buildCategories","secend","third","getCategoryChildren","parentCategoryId","firstCategory","secendCategory","stylePig","backgroundImage","backgroundSize","backgroundColor","opacity","position","VMember_VMember","VMember","recommendationCodeRef","member","recommendationCode","point","im","inviteCode","divPoints","pointThisWeek","pointAll","fansTitle","fansDetail","submitRecommendationCode","current","setReferrer","CMember_CMember","CMember","pop","cUqMember","memberAction","memberRecommenverMap","currentUserId","referrer","fans","CurrentUser_WebUser","WebUser","cUsqWebUser","cUsqCustomer","_user","nick","guest","token","loadWebUser","webUserTuid","webUserCustomerMap","webUserContactMap","webUserContactsMap","webUserSettingMap","firstName","gender","salutation","departmentName","fax","zipCode","CurrentUser_Customer","add","arr1","del","webUserSettings","saveDefaultSettings","invoiceTypeId","invoiceInfoId","changeWebUser","changeWebUserContact","webUserContact","Customer","contactMap","customerSettingMap","customerSettings","setDefaultSettings","consts","about_About","About","with_html_default","source","escapeHtml","EditMeInfo_EditMeInfo","EditMeInfo","onItemChanged","newValue","preValue","userSetProp","saveLocalUser","onWebUserChanged","webUserData","onWebUserContactChanged","webUserContactData","webUserSchema","webUserUiSchema","webUserContactSchema","webUserContactUiSchema","VMe_VMe","VMe","about","changePassword","openContactList","openInvoice","meInfo","userSpan","String","orderStates","exit","showLogout","rows","aboutRows","component","iconClass","text","logOutRows","bk","concat","EditMeInfoFirstOrder_EditMeInfoFirstOrder","EditMeInfoFirstOrder","CMe_CMe","CMe","renderMe","Cart2_CartViewModelSimple","CartViewModelSimple","box","calcSum","cp","$isSelected","$isDeleted","packs_1","pi","Number","set","disposer","dispose","packItem","Cart2_CartViewModel","CartViewModel","packs_2","findIndex","cartItem","cartItemExists","packsExists","splice","piPack","pe","cartItemIndex","CartServiceFactory","getCartService","CartService_CartRemoteService","CartService_CartLocalService","CartService_CartService","CartService","packTuid","tuidDiv","generateCartItems","cartData_1","createdate","generateCartItem","generateSimpleCartItems","cartData_2","productService","CartRemoteService","getCartQuery","setCartAction","removeFromCartAction","mergeCartAction","cartData2","loadSimple","clear","CartLocalService","cartstring","localStorage","getItem","JSON","parse","removeItem","stringify","setItem","addressUI","countryUI","currencyUI","productUI","product_item","divs","radiox","radioy","contactUI","customer_uqUI","src_ui","appName","CApp","CCartApp","getCUq","cUqWebUser","salesRegionTuid","languageTuid","showMain","initTabName","VAppMain","isLocal","onDispose","uqs","百灵威系统工程部/common","百灵威系统工程部/order","productx","百灵威系统工程部/product","百灵威系统工程部/customer","百灵威系统工程部/webUser","百灵威系统工程部/warehouse","loginTop","src_App_0","App","onLogined","notLogined","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","scope","then","registration","onupdatefound","installingWorker","installing","onstatechange","catch","error","react_dom","document","getElementById","URL","toString","addEventListener","fetch","response","status","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","module","exports","ViewBase","ViewMainSubs","sub","renderSubs","subsContainer","renderSubItems","tslib__WEBPACK_IMPORTED_MODULE_0__","subViews","react__WEBPACK_IMPORTED_MODULE_1__","ViewListMainSubs","view","__webpack_require__","_mainSubs__WEBPACK_IMPORTED_MODULE_0__","d","__webpack_exports__"],"mappings":"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","file":"static/js/main.fd9d7d17.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { VPage, TabCaptionComponent, Page, Tabs } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\n\r\nexport const store = {\r\n    //homeCount: observable.box<number>(-1),\r\n    //cartCount: observable.box<number>(101),\r\n};\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\n\r\nexport class VHome extends VPage<CCartApp> {\r\n    async open(param?: any) {\r\n        this.openPage(this.render);\r\n    }\r\n    render = (param?: any): JSX.Element => {\r\n        let { cHome, cMember, cCart, cMe, cartViewModel } = this.controller;\r\n        let faceTabs = [\r\n            { name: 'home', label: '首页', icon: 'home', content: cHome.tab, notify: undefined/*store.homeCount*/ },\r\n            // { name: 'member', label: '会员', icon: 'vcard', content: cMember.tab },\r\n            { name: 'cart', label: '购物车', icon: 'shopping-cart', content: cCart.tab, notify: cartViewModel.count },\r\n            { name: 'me', label: '我的', icon: 'user', content: cMe.tab }\r\n        ].map(v => {\r\n            let { name, label, icon, content, notify } = v;\r\n            return {\r\n                name: name,\r\n                caption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n                content: content,\r\n                notify: notify,\r\n            }\r\n        });\r\n        return <Page header={false}>\r\n            <Tabs tabs={faceTabs} />\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from 'tonva';\r\nimport { CCart } from './CCart';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VCartLabel extends View<CCart> {\r\n\r\n    private showCart = async () => {\r\n        // let { cApp } = this.controller;\r\n        // cApp.showMain('cart');\r\n        this.controller.start();\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    };\r\n\r\n    private content = observer(() => {\r\n        let { cartViewModel: cart } = this.controller.cApp;\r\n        let count: any = cart.count.get();\r\n        let badge, onClick, pointer;\r\n        if (count > 0) {\r\n            onClick = this.showCart;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={onClick}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { UpdownWidget } from 'tonva';\r\n\r\nconst keys = [107, 109, 110, 187, 189];\r\n\r\nexport class MinusPlusWidget extends UpdownWidget {\r\n    @observable protected value: any;\r\n    @observable protected disabled: boolean;\r\n    @observable protected hasFocus: boolean;\r\n\r\n    protected isValidKey(key: number): boolean {\r\n        if (keys.find(v => v === key) !== undefined) return false;\r\n        return super.isValidKey(key);\r\n    }\r\n\r\n    protected onBlur(evt: React.FocusEvent<any>) {\r\n        super.onBlur(evt);\r\n        this.hasFocus = false;\r\n    }\r\n\r\n    protected onFocus(evt: React.FocusEvent<any>) {\r\n        super.onFocus(evt);\r\n        this.hasFocus = true;\r\n    }\r\n\r\n    protected onChange(evt: React.ChangeEvent<any>) {\r\n    }\r\n\r\n    private minusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v - 1);\r\n    }\r\n    private plusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v + 1);\r\n    }\r\n\r\n    private ref = (input: HTMLInputElement) => {\r\n        this.input = input;\r\n        if (this.input === null) return;\r\n        let p: HTMLElement;\r\n        for (p = this.input; ; p = p.parentElement) {\r\n            if (!p) break;\r\n            if (p.tagName !== 'FIELDSET') continue;\r\n            if (p['disabled'] === true) {\r\n                this.disabled = true;\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    private renderContent = observer((): JSX.Element => {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn = {\r\n            //'form-control': true,\r\n        };\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        let hasFocus = this.hasFocus; // document.hasFocus() && document.activeElement === this.input;\r\n        let hasAction = this.readOnly !== true && this.disabled !== true;\r\n        let hasValue = this.value !== NaN && this.value !== undefined && this.value > 0;\r\n        let cursorPointer: string,\r\n            minusColor: string, minusClick: any,\r\n            plusColor: string, plusClick: any;\r\n        if (this.disabled === true) {\r\n            cursorPointer = 'cursor-pointer';\r\n            minusColor = plusColor = 'text-light';\r\n        }\r\n        else {\r\n            minusClick = this.minusClick;\r\n            plusClick = this.plusClick;\r\n            minusColor = 'text-danger-2'; //'text-black-50';\r\n            plusColor = 'text-danger';\r\n        }\r\n        let minus = <i className={classNames('fa',\r\n            'fa-minus-circle', 'fa-lg', minusColor, cursorPointer,\r\n            { invisible: !(hasFocus === true || hasAction === true && hasValue === true) })}\r\n            onClick={minusClick} />;\r\n        let input = <input ref={this.ref}\r\n            className={classNames(this.className, cn, 'mx-1 w-4c form-control',\r\n                { invisible: !(hasFocus === true || hasValue === true) })}\r\n            type=\"text\"\r\n            defaultValue={this.value}\r\n            onChange={this.onChange}\r\n            placeholder={this.placeholder}\r\n            readOnly={this.readOnly}\r\n            disabled={this.disabled}\r\n            onKeyDown={this.onKeyDown}\r\n            onFocus={(evt: React.FocusEvent<any>) => this.onFocus(evt)}\r\n            onBlur={(evt: React.FocusEvent<any>) => this.onBlur(evt)}\r\n            maxLength={10} />;\r\n\r\n        let plus = <i className={classNames('fa fa-plus-circle fa-lg',\r\n            plusColor, cursorPointer,\r\n            { invisible: !(hasAction === true) })}\r\n            onClick={plusClick} />;\r\n        return <div className=\"d-flex align-items-center\">{minus}{input}{plus}\r\n            {this.renderErrors()}\r\n        </div>;\r\n    });\r\n\r\n    render() {\r\n        return <this.renderContent />;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Image } from 'tonva';\r\n\r\nconst imagePath = \"http://www.jkchemical.com/static/Structure/\";\r\nconst altimagePath = \"http://www.jkchemical.com/static/Structure/999.png\";\r\n\r\ninterface ProductImageProps {\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    chemicalId: string;\r\n}\r\n\r\nexport function ProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    return <Image src={chemicalId && (imagePath + chemicalId.substr(0, 3) + '/' + chemicalId + '.png')}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}\r\n","import * as React from 'react';\r\nimport { CProduct, renderBrand, productPropItem } from './CProduct';\r\nimport {\r\n    VPage, Page, Form, ItemSchema, NumSchema, UiSchema, Field,\r\n    ObjectSchema, RowContext, UiCustom, FormField\r\n} from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { MinusPlusWidget } from '../tools/minusPlusWidget';\r\nimport { ProductPackRow } from './Product';\r\nimport { ViewMainSubs, MainProductChemical } from 'mainSubs';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n];\r\n\r\nexport class VProduct extends VPage<CProduct> {\r\n    private product: MainProductChemical;\r\n\r\n    async open(product: any) {\r\n        this.product = product.main;\r\n        this.openPage(this.page, product);\r\n    }\r\n\r\n    private renderProduct = (product: MainProductChemical) => {\r\n\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"mb-3 px-2\">\r\n            <div className=\"py-2\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n            <div className=\"row mt-3\">\r\n                <div className=\"col-12 col-sm-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-12 col-sm-9\">\r\n                    <div className=\"row mx-3\">\r\n                        {productPropItem('CAS', CAS, \"font-weight-bold\")}\r\n                        {productPropItem('产品编号', origin, \"font-weight-bold\")}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('分子式', molecularFomula)}\r\n                        {productPropItem('分子量', molecularWeight)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private arrTemplet = (item: ProductPackRow) => {\r\n        let { pack, retail, vipPrice, promotionPrice, inventoryAllocation, futureDeliveryTimeDescription } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\"><FormField name=\"quantity\" /></div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        let deliveryTimeUI = [];\r\n        if (inventoryAllocation && inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                return <div key={index} className=\"text-success\">\r\n                    {tv(warehouse, (values: any) => <>{values.name}</>)}: {quantity}\r\n                    {deliveryTimeDescription}\r\n                </div>\r\n            });\r\n        } else {\r\n            deliveryTimeUI.push(<div>{futureDeliveryTimeDescription && '期货: ' + futureDeliveryTimeDescription}</div>);\r\n        }\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div><b>{tv(pack)}</b></div>\r\n                    <div>{deliveryTimeUI.map((v, index) => v)}</div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp } = this.controller;\r\n        let { cartService, cartViewModel } = cApp;\r\n        if (value > 0) {\r\n            await cartService.addToCart(cartViewModel, this.product.id, pack.id, value, price, currency);\r\n        } else {\r\n            await cartService.removeFromCart(cartViewModel, [{ productId: this.product.id, packId: pack.id }]);\r\n        }\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n        items: {\r\n            quantity: {\r\n                widget: 'custom',\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget as any,\r\n                onChanged: this.onQuantityChanged\r\n            } as UiCustom\r\n        },\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"mx-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n    private page = observer((product: any) => {\r\n\r\n        let { cApp } = this.controller;\r\n        let header = cApp.cHome.renderSearchHeader();\r\n        let cartLabel = cApp.cCart.renderCartLabel();\r\n        let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n        viewProduct.model = product;\r\n        return <Page header={header} right={cartLabel}>\r\n            <div className=\"px-2 py-2 bg-white mb-3\">{viewProduct.render()}</div>\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CProduct, renderProduct } from './CProduct';\r\nimport { List } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\n//import { cCartApp } from 'ui/CCartApp';\r\n\r\nexport class VProductList extends VPage<CProduct> {\r\n\r\n    private searchKey: string;\r\n    async open(key: string) {\r\n        this.searchKey = key;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onProductClick = async (product: any) => {\r\n        this.controller.showProductDetail(product.id);\r\n    }\r\n\r\n    private onScrollBottom = async () => {\r\n\r\n        await this.controller.pageProducts.more();\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { pageProducts, cApp } = this.controller;\r\n        let header = cApp.cHome.renderSearchHeader();\r\n        let cart = cApp.cCart.renderCartLabel();\r\n        let none = <div className=\"my-3 mx-2 text-warning\">抱歉，未找到相关产品，请重新搜索！</div>\r\n        return <Page header={header} right={cart} onScrollBottom={this.onScrollBottom}>\r\n            <div className=\"bg-white p-2 mb-1\">搜索条件: <strong>{this.searchKey}</strong></div>\r\n            <List before={''} none={none} items={pageProducts} item={{ render: renderProduct, onClick: this.onProductClick }} />\r\n        </Page>\r\n    });\r\n}","import { Entity } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\n\r\nexport abstract class Loader<T> {\r\n    protected cApp: CCartApp;\r\n    private entities: Entity[] = [];\r\n    private schemaLoaded: boolean = false;\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n        this.initEntities();\r\n    }\r\n\r\n    protected abstract initEntities(): void;\r\n\r\n    protected async loadSchemas() {\r\n        if (this.schemaLoaded === true) return;\r\n        await Promise.all(this.entities);\r\n        this.schemaLoaded = true;\r\n    }\r\n\r\n    async load(param: any): Promise<T> {\r\n        await this.loadSchemas();\r\n        let data = this.initData();\r\n        await this.loadToData(param, data);\r\n        return data;\r\n    }\r\n    protected abstract async loadToData(param: any, data: T): Promise<void>;\r\n    protected abstract initData(): T;\r\n}\r\n","import _ from 'lodash';\r\nimport { Tuid, TuidDiv, Map, Query } from 'tonva';\r\nimport { ProductPackRow } from './Product';\r\nimport { Loader } from 'mainSubs/loader';\r\nimport { MainSubs, MainProductChemical, MainBrand } from 'mainSubs';\r\n\r\nexport class LoaderBrand extends Loader<MainBrand> {\r\n    private brandTuid: Tuid;\r\n\r\n    protected initEntities() {\r\n        let { cUqProduct } = this.cApp;\r\n        this.brandTuid = cUqProduct.tuid('brand');\r\n    }\r\n\r\n    protected async loadToData(brandId: number, data: MainBrand): Promise<void> {\r\n        let brand = await this.brandTuid.load(brandId);\r\n        data.id = brand.id;\r\n        data.name = brand.name;\r\n    }\r\n\r\n    protected initData(): MainBrand {\r\n        return {} as MainBrand;\r\n    }\r\n}\r\n\r\nexport class LoaderProductChemical extends Loader<MainProductChemical> {\r\n    private productTuid: Tuid;\r\n    private productChemicalMap: Map;\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct } = this.cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n        this.productChemicalMap = cUqProduct.map('productChemical');\r\n    }\r\n\r\n    protected async loadToData(productId: number, data: MainProductChemical): Promise<void> {\r\n\r\n        let product = await this.productTuid.load(productId);\r\n        _.merge(data, product);\r\n\r\n        let brandLoader = new LoaderBrand(this.cApp);\r\n        data.brand = await brandLoader.load(data.brand.id);\r\n\r\n        let productChemical = await this.productChemicalMap.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n\r\n        data.packs = [];\r\n        product.packx.forEach(e => {\r\n            // let { id, radiox, radioy, unit } = e;\r\n            data.packs.push(e);\r\n        });\r\n    }\r\n\r\n    protected initData(): MainProductChemical {\r\n        return {} as MainProductChemical;\r\n    }\r\n}\r\n\r\nexport class LoaderProductChemicalWithPrices extends Loader<MainSubs<MainProductChemical, ProductPackRow>> {\r\n\r\n    private getCustomerDiscount: Query;\r\n    private priceMap: Map;\r\n    private getInventoryAllocationQuery: Query;\r\n    private getFutureDeliveryTime: Query;\r\n    private getPromotionPackQuery: Query;\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct, cUqCustomerDiscount, cUqWarehouse, cUqPromotion } = this.cApp;\r\n        this.getCustomerDiscount = cUqCustomerDiscount.query(\"getdiscount\");\r\n        this.priceMap = cUqProduct.map('pricex');\r\n        this.getInventoryAllocationQuery = cUqWarehouse.query(\"getInventoryAllocation\");\r\n        this.getFutureDeliveryTime = cUqProduct.query(\"getFutureDeliveryTime\");\r\n        this.getPromotionPackQuery = cUqPromotion.query(\"getPromotionPack\");\r\n    }\r\n\r\n    protected initData(): MainSubs<MainProductChemical, ProductPackRow> {\r\n        return { main: {} as MainProductChemical, subs: [] as ProductPackRow[] };\r\n    }\r\n\r\n    protected async loadToData(productId: any, data: MainSubs<MainProductChemical, ProductPackRow>): Promise<void> {\r\n\r\n        let productLoader = new LoaderProductChemical(this.cApp);\r\n        data.main = await productLoader.load(productId);\r\n\r\n        let discount = 0;\r\n        let { currentUser, currentSalesRegion, cartViewModel, currentLanguage } = this.cApp;\r\n        if (currentUser.hasCustomer) {\r\n            let discountSetting = await this.getCustomerDiscount.obj({ brand: data.main.brand.id, customer: currentUser.currentCustomer });\r\n            discount = discountSetting && discountSetting.discount;\r\n        }\r\n\r\n        let { id: currentSalesRegionId } = currentSalesRegion;\r\n        let prices = await this.priceMap.table({ product: productId, salesRegion: currentSalesRegionId });\r\n        data.subs = prices.filter(e => e.discountinued === 0 && e.expireDate > Date.now()).map(element => {\r\n            let ret: any = {};\r\n            ret.pack = element.pack;\r\n            ret.retail = element.retail;\r\n            if (discount !== 0)\r\n                ret.vipPrice = Math.round(element.retail * (1 - discount));\r\n            ret.currency = currentSalesRegion.currency;\r\n            ret.quantity = cartViewModel.getQuantity(productId, element.pack.id)\r\n            return ret;\r\n        });\r\n\r\n        let promises: PromiseLike<any>[] = [];\r\n        data.subs.forEach(v => {\r\n            promises.push(this.getInventoryAllocationQuery.table({ product: productId, pack: v.pack, salesRegion: currentSalesRegion }));\r\n            promises.push(this.getPromotionPackQuery.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n\r\n        let fd = await this.getFutureDeliveryTimeDescription(productId, currentSalesRegionId);\r\n        for (let i = 0; i < data.subs.length; i++) {\r\n            data.subs[i].futureDeliveryTimeDescription = fd;\r\n            data.subs[i].inventoryAllocation = results[i * 2];\r\n            let promotion = results[i * 2 + 1];\r\n            let discount = promotion && promotion.discount;\r\n            if (discount)\r\n                data.subs[i].promotionPrice = Math.round((1 - discount) * data.subs[i].retail);\r\n        }\r\n    }\r\n\r\n    private getFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n        let futureDeliveryTime = await this.getFutureDeliveryTime.table({ product: productId, salesRegion: salesRegionId });\r\n        if (futureDeliveryTime.length > 0) {\r\n            let { minValue, maxValue, unit, deliveryTimeDescription } = futureDeliveryTime[0];\r\n            return minValue + (maxValue > minValue ? '~' + maxValue : '') + ' ' + unit;\r\n            // return futureDeliveryTime[0].deliveryTimeDescription;\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n// 拟用 LoaderProduct 替换\r\nexport class ProductService {\r\n\r\n    private cApp: CCartApp;\r\n    private productTuid: TuidMain;\r\n    private productChemicalMap: Map;\r\n\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n        this.initEntities();\r\n    }\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct, cUqCustomerDiscount, cUqWarehouse } = this.cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n        this.productChemicalMap = cUqProduct.map('productChemical');\r\n    }\r\n\r\n    async loadProductChemical(productId: number): Promise<MainProductChemical> {\r\n\r\n        let result: MainProductChemical;\r\n        let product = await this.productTuid.load(productId);\r\n        result = {...product };\r\n\r\n        let productChemical = await this.productChemicalMap.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            result.chemical = chemical;\r\n            result.purity = purity;\r\n            result.CAS = CAS;\r\n            result.molecularFomula = molecularFomula;\r\n            result.molecularWeight = molecularWeight;\r\n        }\r\n        return result;\r\n    }\r\n}\r\n*/","import * as React from 'react';\r\nimport * as _ from 'lodash';\r\nimport { Query, tv, BoxId } from 'tonva';\r\nimport { PageItems, Controller, nav, Page, Image } from 'tonva';\r\nimport classNames from 'classnames';\r\nimport { CCartApp } from '../CCartApp';\r\nimport { VProduct } from './VProduct';\r\nimport { VProductList } from './VProductList';\r\nimport { LoaderProductChemicalWithPrices } from './itemLoader';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nclass PageProducts extends PageItems<any> {\r\n\r\n    private searchProductQuery: Query;\r\n\r\n    constructor(searchProductQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchProductQuery = searchProductQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchProductQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.seq;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport class CProduct extends Controller {\r\n    cApp: CCartApp;\r\n\r\n    pageProducts: PageProducts;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        this.searchByKey(param);\r\n    }\r\n\r\n    searchByKey(key: string) {\r\n        let { cUqProduct, currentSalesRegion } = this.cApp;\r\n        let searchProductQuery = cUqProduct.query(\"searchProduct\");\r\n        this.pageProducts = new PageProducts(searchProductQuery);\r\n        this.pageProducts.first({ key: key, salesRegion: currentSalesRegion.id });\r\n        this.openVPage(VProductList, key);\r\n    }\r\n\r\n    async searchByCategory(category: any) {\r\n        let { cUqProduct, currentSalesRegion } = this.cApp;\r\n        let searchProductQuery = cUqProduct.query(\"searchProductByCategory\");\r\n        this.pageProducts = new PageProducts(searchProductQuery);\r\n        let { productCategoryId, name } = category;\r\n        this.pageProducts.first({ productCategory: productCategoryId, salesRegion: currentSalesRegion.id });\r\n        this.openVPage(VProductList, name);\r\n    }\r\n\r\n    showProductDetail = async (id: number) => {\r\n\r\n        let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n        let product = await loader.load(id);\r\n        /*\r\n        let product = new Product(this.cApp);\r\n        await product.load(id);\r\n        */\r\n        this.openVPage(VProduct, product);\r\n    }\r\n}\r\n\r\nexport function renderBrand(brand: any) {\r\n    return productPropItem('品牌', brand.name);\r\n}\r\n\r\nexport function productPropItem(caption: string, value: any, captionClass?: string) {\r\n    if (value === null || value === undefined || value === '0') return null;\r\n    let capClass = captionClass ? classNames(captionClass) : classNames(\"text-muted\");\r\n    let valClass = captionClass ? classNames(captionClass) : \"\";\r\n    return <>\r\n        <div className={classNames(\"col-6 col-sm-2 pr-0 small\", capClass)}> {caption}</div>\r\n        <div className={classNames(\"col-6 col-sm-4\", valClass)}>{value}</div>\r\n    </>;\r\n}\r\n\r\nexport function renderProduct(product: any, index: number) {\r\n    let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"d-block mb-4 px-3\">\r\n        <div className=\"py-2\">\r\n            <div><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n        </div>\r\n        <div className=\"row\">\r\n            <div className=\"col-3\">\r\n                <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n            </div>\r\n            <div className=\"col-9\">\r\n                <div className=\"row\">\r\n                    {productPropItem('CAS', CAS)}\r\n                    {productPropItem('产品编号', origin)}\r\n                    {productPropItem('纯度', purity)}\r\n                    {productPropItem('分子式', molecularFomula)}\r\n                    {productPropItem('分子量', molecularWeight)}\r\n                    {tv(brand, renderBrand)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Form, ObjectSchema, NumSchema, ArrSchema, UiSchema, UiArr, FormField } from 'tonva';\r\nimport { CCart } from './CCart';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv, BoxId } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { MinusPlusWidget } from '../tools';\r\nimport { renderBrand, productPropItem } from '../product/CProduct';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { CartPackRow } from './Cart';\r\n\r\nconst cartSchema = [\r\n    {\r\n        name: 'list',\r\n        type: 'arr',\r\n        arr: [\r\n            { name: 'checked', type: 'boolean' },\r\n            { name: 'product', type: 'object' } as ObjectSchema,\r\n            {\r\n                name: 'packs', type: 'arr', arr: [\r\n                    { name: 'pack', type: 'object' } as ObjectSchema,\r\n                    { name: 'price', type: 'number' } as NumSchema,\r\n                    { name: 'quantity', type: 'number' } as NumSchema,\r\n                    { name: 'currency', type: 'object' } as ObjectSchema,\r\n                    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n                    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n                ]\r\n            }\r\n        ],\r\n    } as ArrSchema\r\n];\r\n\r\nexport class VCart extends VPage<CCart> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    protected CheckOutButton = observer(() => {\r\n        let { checkOut, cApp } = this.controller;\r\n        let { cartViewModel } = cApp;\r\n        let amount = cartViewModel.amount.get();\r\n        let check = \"去结算\";\r\n        let content = amount > 0 ?\r\n            <>{check} (¥{amount})</> :\r\n            <>{check}</>;\r\n        return <button className=\"btn btn-success w-100\" type=\"button\" onClick={checkOut} disabled={amount <= 0}>\r\n            {content}\r\n        </button>;\r\n    });\r\n\r\n    render(params: any): JSX.Element {\r\n        return <this.tab />;\r\n    }\r\n\r\n    private renderCartItem = (item: any) => {\r\n        let { product } = item;\r\n        return <div className=\"pr-1\">\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\" onClick={() => this.controller.onProductClick(product.id)}>\r\n                    {renderCartProduct(product, 0)}\r\n                </div>\r\n                <div className=\"col-lg-6\"><FormField name=\"packs\" /></div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow) => {\r\n        let { pack, price, currency, inventoryAllocation, futureDeliveryTimeDescription } = item;\r\n\r\n        let deliveryTimeUI = [];\r\n        if (inventoryAllocation && inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                return <div key={index} className=\"text-success\">\r\n                    {tv(warehouse, (values: any) => <>{values.name}</>)}: {quantity}\r\n                    {deliveryTimeDescription}\r\n                </div>\r\n            });\r\n        } else {\r\n            deliveryTimeUI.push(<div>{futureDeliveryTimeDescription && '期货: ' + futureDeliveryTimeDescription}</div>);\r\n        }\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-6c mr-4 text-right\"><span className=\"text-danger h5\">¥{price}</span></div>\r\n                <FormField name=\"quantity\" />\r\n            </div>\r\n            <div>{deliveryTimeUI.map((v, index) => v)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        selectable: true,\r\n        deletable: true,\r\n        restorable: true,\r\n        items: {\r\n            list: {\r\n                widget: 'arr',\r\n                Templet: this.renderCartItem,\r\n                ArrContainer: (label: any, content: JSX.Element) => content,\r\n                RowContainer: (content: JSX.Element) => <div className=\"py-3\">{content}</div>,\r\n                items: {\r\n                    packs: {\r\n                        widget: 'arr',\r\n                        Templet: this.packsRow,\r\n                        selectable: false,\r\n                        deletable: false,\r\n                        ArrContainer: (label: any, content: JSX.Element) => content,\r\n                        RowContainer: (content: JSX.Element) => content,\r\n                        RowSeperator: <div className=\"border border-gray border-top my-3\" />,\r\n                        items: {\r\n                            quantity: {\r\n                                widget: 'custom',\r\n                                className: 'text-center',\r\n                                WidgetClass: MinusPlusWidget,\r\n                                onChanged: this.controller.onQuantityChanged\r\n                            }\r\n                        },\r\n                    } as UiArr\r\n                }\r\n            } as UiArr\r\n        }\r\n    }\r\n\r\n    protected cartForm = observer(() => {\r\n        let { cartViewModel } = this.controller.cApp;\r\n        // let cartData = cart.data;\r\n        let { data: cartData } = cartViewModel;\r\n        return <Form className=\"bg-white flex-fill overflow-auto\" schema={cartSchema} uiSchema={this.uiSchema} formData={cartData} />\r\n    });\r\n\r\n    private empty() {\r\n        return <div className=\"py-5 text-center bg-white\">你的购物车空空如也</div>\r\n    }\r\n\r\n    private test = () => {\r\n        let { cartViewModel } = this.controller.cApp;\r\n        // let row = cart.items[0];\r\n        let row = cartViewModel.cartItems[0];\r\n        row.packs[0].quantity = row.packs[0].quantity + 1;\r\n    }\r\n\r\n    private testButton = () => <button onClick={() => this.test()}>test</button>;\r\n\r\n    private page = observer((params: any): JSX.Element => {\r\n        let { cartViewModel: cart } = this.controller.cApp;\r\n        let footer: any, content: any;\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            content = this.empty();\r\n            footer = undefined;\r\n        }\r\n        else {\r\n            content = <this.cartForm />;\r\n            footer = <this.CheckOutButton />;\r\n        }\r\n        return <Page header=\"购物车\" footer={footer}>\r\n            {content}\r\n        </Page>;\r\n    })\r\n\r\n    private tab = observer(() => {\r\n        let { cartViewModel: cart } = this.controller.cApp;\r\n        let header = <header className=\"py-2 text-center bg-info text-white\">\r\n            <FA className=\"align-middle\" name=\"shopping-cart\" size=\"2x\" /> &nbsp; <span className=\"h5 align-middle\">购物车</span>\r\n        </header>;\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            return <>\r\n                {header}\r\n                {this.empty()}\r\n            </>;\r\n        }\r\n        return <div className=\"bg-white d-flex flex-column h-100\">\r\n            {header}\r\n            <this.cartForm />\r\n            <footer className=\"p-3\"><this.CheckOutButton /></footer>\r\n        </div>\r\n    });\r\n}\r\n\r\nexport function renderCartProduct(product: any, index: number) {\r\n    let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"row d-flex mb-3 px-2\">\r\n        <div className=\"col-12\">\r\n            <div className=\"py-2\">\r\n                <strong>{description}</strong>\r\n            </div>\r\n            <div className=\"pb-2\">\r\n                <strong>{descriptionC}</strong>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-4c h-4c\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {productPropItem('CAS', CAS)}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('编号', origin)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { VCartLabel } from './VCartLabel';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VCart } from './VCart';\r\nimport { Controller, RowContext, nav, User } from 'tonva';\r\nimport { CartPackRow, CartItem } from './Cart';\r\n\r\nexport class CCart extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    private selectedCartItems: CartItem[];\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        this.openVPage(VCart);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * 显示购物车图标\r\n     */\r\n    renderCartLabel() {\r\n        return this.renderView(VCartLabel);\r\n    }\r\n\r\n    renderCart = () => {\r\n        return this.renderView(VCart);\r\n    }\r\n\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data, parentData } = context;\r\n        let { product } = parentData;\r\n        let { pack, price, currency } = data as CartPackRow;\r\n        // await this.cart.AddToCart(product.id, pack.id, value, price, currency);\r\n        let { cartViewModel, cartService } = this.cApp;\r\n        if (value > 0) {\r\n            await cartService.addToCart(cartViewModel, product.id, pack.id, value, price, currency);\r\n        } else {\r\n            await cartService.removeFromCart(cartViewModel, [{ productId: product.id, packId: pack.id }]);\r\n        }\r\n    }\r\n\r\n    onRowStateChanged = async (context: RowContext, selected: boolean, deleted: boolean) => {\r\n        alert('onRowStateChanged')\r\n    }\r\n\r\n    private loginCallback = async (user: User): Promise<void> => {\r\n        let { cApp } = this;\r\n        await cApp.currentUser.setUser(user);\r\n        await cApp.loginCallBack(user);\r\n        this.closePage(1);\r\n        await this.doCheckOut();\r\n    };\r\n\r\n    onProductClick(productId: number) {\r\n        let { cartViewModel, cProduct } = this.cApp;\r\n        if (!cartViewModel.isDeleted(productId)) {\r\n            cProduct.showProductDetail(productId);\r\n        }\r\n    }\r\n\r\n    checkOut = async () => {\r\n        let { cartViewModel } = this.cApp;\r\n        this.selectedCartItems = cartViewModel.getSelectedItem();\r\n        if (this.selectedCartItems === undefined) return;\r\n        if (!this.isLogined) {\r\n            nav.showLogin(this.loginCallback, true);\r\n        } else {\r\n            this.doCheckOut();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 导航到CheckOut界面\r\n     */\r\n    private doCheckOut = async () => {\r\n\r\n        let { cOrder } = this.cApp;\r\n        if (this.selectedCartItems === undefined) return;\r\n        await cOrder.start(this.selectedCartItems);\r\n    }\r\n\r\n    tab = () => <this.renderCart />\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv, BoxId } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { OrderItem } from './Order';\r\nimport { renderCartProduct } from 'cart/VCart';\r\nimport { observable } from 'mobx';\r\nimport { CartPackRow } from 'cart/Cart';\r\n\r\nconst blankTime = 2000;\r\n\r\nexport class VCreateOrder extends VPage<COrder> {\r\n    @observable private useShippingAddress: boolean = true;\r\n    @observable private shippingAddressIsBlank: boolean = false;\r\n    @observable private invoiceAddressIsBlank: boolean = false;\r\n    @observable private invoiceIsBlank: boolean = false;\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private nullContact = () => {\r\n        return <span className=\"text-primary\">选择收货地址</span>;\r\n    }\r\n\r\n    //private renderProduct = (product: any) => <strong>{product.description}</strong>\r\n\r\n    private packsRow = (item: CartPackRow, index: number) => {\r\n        let { pack, quantity, price, currency, inventoryAllocation, futureDeliveryTimeDescription } = item;\r\n\r\n        let deliveryTimeUI = [];\r\n        if (inventoryAllocation && inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                return <div key={index} className=\"text-success\">\r\n                    {tv(warehouse, (values: any) => <>{values.name}</>)}: {quantity}\r\n                    {deliveryTimeDescription}\r\n                </div>\r\n            });\r\n        } else {\r\n            deliveryTimeUI.push(<div>{futureDeliveryTimeDescription && '期货: ' + futureDeliveryTimeDescription}</div>);\r\n        }\r\n\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{parseFloat((price * quantity).toFixed(2))}</span>\r\n                    <small className=\"text-muted\">(¥{parseFloat(price.toFixed(2))} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n            <div>{deliveryTimeUI.map((v, index) => v)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: OrderItem) => {\r\n        let { product, packs } = orderItem;\r\n        return <div>\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\">{renderCartProduct(product, 0)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return this.packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private orderItemKey = (orderItem: OrderItem) => {\r\n        return orderItem.product.id;\r\n    }\r\n\r\n    private onSubmit = async () => {\r\n        let { orderData } = this.controller;\r\n        // 必填项验证\r\n        let { shippingContact, invoiceContact, invoiceType, invoiceInfo } = orderData;\r\n        if (!shippingContact) {\r\n            this.shippingAddressIsBlank = true;\r\n            setTimeout(() => this.shippingAddressIsBlank = false, blankTime);\r\n            return;\r\n        }\r\n        if (!invoiceContact) {\r\n            if (this.useShippingAddress) {\r\n                orderData.invoiceContact = shippingContact; //contactBox;\r\n                this.invoiceAddressIsBlank = false;\r\n            } else {\r\n                this.invoiceAddressIsBlank = true;\r\n                setTimeout(() => this.invoiceAddressIsBlank = false, blankTime);\r\n                return;\r\n            }\r\n        }\r\n        if (!invoiceType || !invoiceInfo) {\r\n            this.invoiceIsBlank = true;\r\n            setTimeout(() => this.invoiceIsBlank = false, blankTime);\r\n            return;\r\n        }\r\n\r\n        this.controller.submitOrder();\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { orderData, onSelectShippingContact, onSelectInvoiceContact, openMeInfo, currentUser, onInvoiceInfoEdit, onCouponEdit } = this.controller;\r\n        let fillMeInfo = <div onClick={openMeInfo} className=\"alert alert-warning text-primary py-1\" role=\"alert\">\r\n            点击完善您的个人信息\r\n        </div>\r\n        if (currentUser.allowOrdering)\r\n            fillMeInfo = null;\r\n        let footer = <div className=\"d-block\">\r\n            {fillMeInfo}\r\n            <div className=\"w-100 px-3\">\r\n                <div className=\"d-flex justify-content-left flex-grow-1\">\r\n                    <span className=\"text-danger\" style={{ fontSize: '1.8rem' }}><small>¥</small>{orderData.amount}</span>\r\n                </div>\r\n                <button type=\"button\"\r\n                    className=\"btn btn-danger w-30\"\r\n                    onClick={this.onSubmit} disabled={!currentUser.allowOrdering}>提交订单\r\n                </button>\r\n            </div>\r\n        </div>;\r\n        let chevronRight = <FA name=\"chevron-right\" className=\"cursor-pointer\" />\r\n\r\n        let shippingAddressBlankTip = this.shippingAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>\r\n            : null;\r\n        let invoiceAddressBlankTip = this.invoiceAddressIsBlank ? <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票地址</div> : null;\r\n        let divInvoiceContact: any = null;\r\n        if (this.useShippingAddress === false) {\r\n            if (orderData.invoiceContact !== undefined) {\r\n                divInvoiceContact = <div className=\"col-12 col-sm-10 offset-sm-2 d-flex\">\r\n                    {tv(orderData.invoiceContact, undefined, undefined, this.nullContact)}\r\n                    <div>{chevronRight}</div>\r\n                </div>\r\n            } else {\r\n                divInvoiceContact = <div className=\"col-8 offset-4 offset-sm-2\">\r\n                    <button className=\"btn btn-outline-primary\"\r\n                        onClick={onSelectInvoiceContact}>选择发票地址</button>\r\n                    {invoiceAddressBlankTip}\r\n                </div>\r\n            }\r\n        }\r\n\r\n        let invoiceContactUI = <div className=\"row py-3 bg-white mb-1\">\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票地址:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <div>\r\n                    <label className=\"cursor-pointer\">\r\n                        <input type=\"checkbox\"\r\n                            defaultChecked={this.useShippingAddress}\r\n                            onChange={e => {\r\n                                this.useShippingAddress = e.currentTarget.checked;\r\n                                orderData.invoiceContact = undefined;\r\n                                this.invoiceAddressIsBlank = false;\r\n                            }} /> 同收货地址\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            {divInvoiceContact}\r\n        </div>\r\n\r\n        let invoiceBlankTip = this.invoiceIsBlank ? <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票信息</div> : null;\r\n        let invoiceInfoUI = <div className=\"row py-3 bg-white mb-1\" onClick={onInvoiceInfoEdit}>\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票信息:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                    {tv(orderData.invoiceType, (v) => <>{v.description}</>, undefined, () => <span className=\"text-primary\">填写发票信息</span>)}\r\n                    {tv(orderData.invoiceInfo, (v) => <> -- {v.title}</>, undefined, () => <></>)}\r\n                    {invoiceBlankTip}\r\n                </LMR>\r\n            </div>\r\n        </div>\r\n\r\n        let freightFeeUI = <></>;\r\n        let freightFeeRemittedUI = <></>;\r\n        if (orderData.freightFee) {\r\n            freightFeeUI = <>\r\n                <div className=\"col-4 col-sm-2 pb-2 text-muted\">运费:</div>\r\n                <div className=\"col-8 col-sm-10 text-right text-danger\"><small>¥</small>{orderData.freightFee}</div>\r\n            </>\r\n            if (orderData.freightFeeRemitted) {\r\n                freightFeeRemittedUI = <>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">运费减免:</div>\r\n                    <div className=\"col-8 col-sm-10 text-right text-danger\"><small>¥</small>{orderData.freightFeeRemitted}</div>\r\n                </>\r\n            }\r\n        }\r\n\r\n        let couponUI = <></>;\r\n        if (1 === 1) {\r\n            couponUI = <div className=\"row py-3 bg-white mb-1\" onClick={onCouponEdit}>\r\n                <div className=\"col-4 col-sm-2 pb-2 text-muted\">优惠码:</div>\r\n                <div className=\"col-8 col-sm-10\">\r\n                    <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                        {tv(orderData.coupon, (v) => {\r\n                            let offsetUI, remittedUI;\r\n                            if (orderData.couponOffsetAmount) {\r\n                                offsetUI = <LMR right={<>{orderData.couponOffsetAmount}</>}>\r\n                                    <div>优惠码折扣:</div>\r\n                                </LMR>\r\n                            }\r\n                            if (orderData.couponRemitted) {\r\n                                remittedUI = <LMR right={<>{orderData.couponRemitted}</>}>\r\n                                    <div>优惠码减免:</div>\r\n                                </LMR>\r\n                            }\r\n                            return <div>\r\n                                <div>{v.code}</div>\r\n                                {offsetUI}\r\n                                {remittedUI}\r\n                            </div>\r\n                        }, undefined, () => <span className=\"text-primary\">填写优惠码</span>)}\r\n                    </LMR>\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        return <Page header=\"订单预览\" footer={footer}>\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 bg-white mb-1\" onClick={onSelectShippingContact}>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">收货地址:</div>\r\n                    <div className=\"col-8 col-sm-10\">\r\n                        <LMR className=\"w-100 align-items-center\" right={chevronRight}>{tv(orderData.shippingContact, undefined, undefined, this.nullContact)}</LMR>\r\n                        {shippingAddressBlankTip}\r\n                    </div>\r\n                </div>\r\n                {invoiceContactUI}\r\n                {invoiceInfoUI}\r\n            </div>\r\n            <List items={orderData.orderItems} item={{ render: this.renderOrderItem, key: this.orderItemKey as any }} />\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 pr-3 bg-white my-1\">\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">商品总额:</div>\r\n                    <div className=\"col-8 col-sm-10 text-right\"><small>¥</small>{orderData.productAmount}</div>\r\n                    {freightFeeUI}\r\n                    {freightFeeRemittedUI}\r\n                </div >\r\n                {couponUI}\r\n            </div>\r\n        </Page >\r\n    })\r\n}","import { BoxId } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\nimport { CartPackRow } from 'cart/Cart';\r\n\r\nexport class Order {\r\n\r\n    webUser: any;\r\n    organization: BoxId;\r\n    customer: any;\r\n\r\n    @observable shippingContact: BoxId;\r\n    @observable invoiceContact: BoxId;\r\n    @observable invoiceType: BoxId;\r\n    @observable invoiceInfo: BoxId;\r\n    @observable orderItems: OrderItem[] = [];\r\n\r\n    @observable freightFee: number;\r\n    @observable freightFeeRemitted: number;\r\n\r\n    @computed get amount() {\r\n        return parseFloat((this.orderItems.reduce((pv, cv) => (pv + cv.subAmount), 0) +\r\n            (this.freightFee ? this.freightFee : 0) +\r\n            (this.freightFeeRemitted ? this.freightFeeRemitted : 0) +\r\n            (this.couponOffsetAmount ? this.couponOffsetAmount : 0) +\r\n            (this.couponRemitted ? this.couponRemitted : 0)).toFixed(2));\r\n    };\r\n    @computed get productAmount() {\r\n        return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subAmount, 0).toFixed(2));\r\n    };\r\n    currency: BoxId;\r\n    @observable coupon: BoxId;\r\n    @observable couponOffsetAmount: number;\r\n    @observable couponRemitted: number;\r\n\r\n    getDataForSave() {\r\n        let orderItems: any[] = [];\r\n        this.orderItems.forEach(oi => {\r\n            oi.packs.forEach(pk => {\r\n                this.currency = pk.currency;\r\n                orderItems.push({\r\n                    product: oi.product, pack: pk.pack, price: pk.price, quantity: pk.quantity\r\n                    , subAmount: pk.quantity * pk.price\r\n                })\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            invoiceContact: this.invoiceContact,\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: this.invoiceInfo,\r\n            amount: this.amount,\r\n            currency: this.currency,\r\n            coupon: this.coupon,\r\n            couponOffsetAmount: this.couponOffsetAmount,\r\n            couponRemitted: this.couponRemitted,\r\n            orderitems: orderItems, // 前面的必须是小写的orderitems\r\n        }\r\n    }\r\n}\r\n\r\nexport class OrderItem {\r\n\r\n    product: BoxId;\r\n    @observable packs: CartPackRow[];\r\n    @computed get subAmount() {\r\n        return this.packs.reduce((p, c) => {\r\n            return p + c.price * c.quantity\r\n        }, 0);\r\n    }\r\n    /*\r\n    pack: BoxId;\r\n\r\n    @observable price: number;\r\n    @observable quantity: number;\r\n    @computed get subAmount() {\r\n        return this.price * this.quantity;\r\n    }\r\n    */\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\n\r\nexport class OrderSuccess extends VPage<COrder> {\r\n\r\n    async open(orderCreateResult: any) {\r\n\r\n        this.openPage(this.page, orderCreateResult);\r\n    }\r\n\r\n    private page = (orderCreateResult: any) => {\r\n        return <Page header=\"下单成功\" back=\"close\">\r\n            <div className=\"p-3 bg-white mb-3\">\r\n                <div className=\"mb-3\">下单成功，感谢您对百灵威的厚爱！</div>\r\n                <p className=\"\">\r\n                    订单编号: <span className=\"h5 text-info\">{orderCreateResult.no}</span><br /><br />\r\n                    我们将立刻处理您的订单，请注意查收到货短信。\r\n                </p>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\n\r\nexport class VContactList extends VPage<CSelectContact> {\r\n\r\n    async open() {\r\n\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onContactRender = (userContact: any) => {\r\n        let { contact } = userContact;\r\n        let { onEditContact, onContactSelected } = this.controller;\r\n        let right = <div className=\"p-2 cursor-pointer text-info\" onClick={() => onEditContact(userContact)}>\r\n            <FA name=\"edit\" />\r\n        </div>\r\n        return <LMR right={right} className=\"px-3 py-2\">\r\n            <div onClick={() => onContactSelected(contact)}>\r\n                {tv(contact)}\r\n            </div>\r\n        </LMR>\r\n    }\r\n\r\n\r\n    private page = () => {\r\n\r\n        let { onNewContact, userContacts } = this.controller;\r\n        let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={() => onNewContact()} >添加新地址</button>;\r\n        let contactList = <List items={userContacts} item={{ render: this.onContactRender }} none=\"无地址\" />;\r\n        return <Page footer={footer} header=\"管理地址\">\r\n            {contactList}\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { VPage, Page, Form, Schema, UiSchema, Context, UiInputItem, UiIdItem } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { CSelectContact } from './CSelectContact';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'name', type: 'string', required: true },\r\n    { name: 'organizationName', type: 'string', required: true },\r\n    { name: 'mobile', type: 'string', required: true },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'email', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: true },\r\n    { name: 'addressString', type: 'string', required: true },\r\n    { name: 'isDefault', type: 'boolean', required: false },\r\n    // { name: 'submit', type: 'submit' },\r\n];\r\n\r\nexport class VContact extends VPage<CSelectContact> {\r\n\r\n    //private contactData: any = {};\r\n    private userContactData: any;\r\n    private form: Form;\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            name: { widget: 'text', label: '姓名', placeholder: '姓名' } as UiInputItem,\r\n            organizationName: { widget: 'text', label: '单位名称', placeholder: '单位名称' } as UiInputItem,\r\n            mobile: { widget: 'text', label: '手机号码', placeholder: '手机号码' } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '电话' } as UiInputItem,\r\n            email: {\r\n                widget: 'email', label: 'Email',\r\n                rules: (value: any) => {\r\n                    if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n                        return \"Email格式不正确。\";\r\n                    else\r\n                        return undefined;\r\n                },\r\n                placeholder: 'Email'\r\n            } as UiInputItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区', placeholder: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await this.controller.pickAddress(context, name, value),\r\n                Templet: (item: any) => {\r\n                    let { obj } = item;\r\n                    if (!obj) return <small className=\"text-muted\">请选择地区</small>;\r\n                    let { country, province, city, county } = obj;\r\n                    //, (v) => <>{v.chineseName}</>\r\n                    return <>\r\n                        {tv(country, v => <>{v.chineseName}</>)}\r\n                        {tv(province, (v) => <>{v.chineseName}</>)}\r\n                        {tv(city, (v) => <>{v.chineseName}</>)}\r\n                        {tv(county, (v) => <>{v.chineseName}</>)}\r\n                    </>;\r\n                }\r\n            } as UiIdItem,\r\n            addressString: {\r\n                widget: 'text', label: '详细地址',\r\n                placeholder: '详细地址'\r\n            } as UiInputItem,\r\n            isDefault: { widget: 'checkbox', label: '作为默认地址' },\r\n            submit: { widget: 'button', label: '提交' },\r\n        }\r\n    }\r\n\r\n    async open(userContactData: any) {\r\n        this.userContactData = userContactData;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onSaveContact = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.saveContact(context.form.data);\r\n    }\r\n\r\n    private onDelContact = async () => {\r\n        let { contact } = this.userContactData;\r\n        if (await this.vCall(VConfirmDeleteContact, contact) === true) {\r\n            await this.controller.delContact(contact);\r\n            this.closePage();\r\n        };\r\n    }\r\n\r\n    private page = () => {\r\n        let contactData = _.clone(this.userContactData.contact);\r\n\r\n        let buttonDel: any;\r\n        if (contactData !== undefined) {\r\n            buttonDel = <button className=\"btn btn-sm btn-info\" onClick={this.onDelContact}>删除</button>;\r\n        }\r\n        let { fromOrderCreation } = this.controller;\r\n        let footer = <button type=\"button\"\r\n            className=\"btn btn-primary w-100\"\r\n            onClick={this.onSaveContact}>{fromOrderCreation ? '保存并使用' : '保存'}</button>;\r\n        return <Page header=\"地址信息\" footer={footer} right={buttonDel}>\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    formData={contactData}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nclass VConfirmDeleteContact extends VPage<CSelectContact> {\r\n    async open(contact: any) {\r\n        this.openPage(this.page, contact);\r\n    }\r\n\r\n    private onConfirm = async () => {\r\n        await this.returnCall(true);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = (contact: any) => {\r\n        return <Page header=\"确认\" back=\"close\">\r\n            <div className=\"w-50 mx-auto border border-primary rounded my-3 p-3 bg-white\">\r\n                <div className=\"p-4 text-center position-relative\">\r\n                    <i className=\"fa fa-question-circle position-absolute fa-2x text-warning\" style={{ left: 0, top: 0 }} />\r\n                    <b className=\"\">{contact.name}</b>\r\n                </div>\r\n                <button className=\"btn btn-danger w-50 mx-auto d-block mt-3\" onClick={this.onConfirm}>确认删除</button>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { List, FA } from 'tonva';\r\nimport { CAddress } from './CAddress';\r\n\r\nexport class VAddress extends VPage<CAddress> {\r\n    private provinceId: number;\r\n    private cityId: number;\r\n    private countyId: number;\r\n    private backLevel = 0;\r\n\r\n    async open(param: any) {\r\n        let provinces = await this.controller.getCountryProvince(43);\r\n        this.openPage(this.page, { items: provinces });\r\n    }\r\n\r\n    private page = (provinces: any) => {\r\n        this.backLevel++;\r\n        return <Page header=\"选择所在省市\">\r\n            <div className=\"row no-gutters\">\r\n                {provinces.items.map(v => this.renderPCC(v, this.onProvinceClick))}\r\n            </div>\r\n        </Page>\r\n    }\r\n\r\n    private renderPCC = (pcc: any, onClick: any) => {\r\n        let { id, chineseName } = pcc;\r\n        return <div key={id} className=\"col-6 col-md-4 col-lg-3 cursor-pointer\" >\r\n            <div className=\"pt-1 pb-1 px-2\" onClick={() => onClick(pcc)}\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <span className=\"ml-1 align-middle\">\r\n                    <FA name=\"chevron-right\" className=\"text-info small\" />\r\n                    &nbsp; {chineseName}\r\n                </span>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onProvinceClick = async (item: any) => {\r\n        this.provinceId = item.id;\r\n        let cities = await this.controller.getProvinceCities(this.provinceId);\r\n        if (cities) {\r\n            let len = cities.length;\r\n            if (len === 1) {\r\n                await this.onCityClick(cities[0]);\r\n                return;\r\n            }\r\n            if (len > 0) {\r\n                this.backLevel++;\r\n                this.openPageElement(<Page header=\"选择所在城市\">\r\n                    <div className=\"row no-gutters\">\r\n                        {cities.map(v => this.renderPCC(v, this.onCityClick))}\r\n                    </div>\r\n                </Page>);\r\n                return;\r\n            }\r\n        } else {\r\n            this.closePage(1);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCityClick = async (item: any) => {\r\n        this.cityId = item.id;\r\n        let counties = await this.controller.getCityCounties(this.cityId);\r\n        if (counties && counties.length > 0) {\r\n            this.backLevel++;\r\n            this.openPageElement(<Page header=\"选择所在区县\">\r\n                <div className=\"row no-gutters\">\r\n                    {counties.map(v => this.renderPCC(v, this.onCountyClick))}\r\n                </div>\r\n            </Page>);\r\n        } else {\r\n            this.closePage(2);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCountyClick = async (item: any) => {\r\n        this.countyId = item.id;\r\n        this.closePage(this.backLevel);\r\n        this.saveAddress();\r\n    }\r\n\r\n    private saveAddress = async () => {\r\n        await this.controller.saveAddress(43, this.provinceId, this.cityId, this.countyId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Controller } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { Query, Tuid } from 'tonva';\r\nimport { VAddress } from './VAddress';\r\n\r\nexport class CAddress extends Controller {\r\n    private cApp: CCartApp;\r\n    private getCountryProvincesQuery: Query;\r\n    private getProvinceCitiesQuery: Query;\r\n    private getCityCountiesQuery: Query;\r\n    private addressTuid: Tuid;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqCommon } = this.cApp;\r\n        this.getCountryProvincesQuery = cUqCommon.query('GetCountryProvinces');\r\n        this.getProvinceCitiesQuery = cUqCommon.query('GetProvinceCities');\r\n        this.getCityCountiesQuery = cUqCommon.query('GetCityCounties');\r\n        this.addressTuid = cUqCommon.tuid(\"Address\");\r\n    }\r\n\r\n    protected async internalStart() {\r\n        this.openVPage(VAddress);\r\n    }\r\n\r\n    getCountryProvince = async (countryId: number): Promise<any[]> => {\r\n        return await this.getCountryProvincesQuery.table({ country: countryId });\r\n    }\r\n\r\n    getProvinceCities = async (provinceId: number): Promise<any[]> => {\r\n        return await this.getProvinceCitiesQuery.table({ province: provinceId });\r\n    }\r\n\r\n    getCityCounties = async (cityId: number): Promise<any[]> => {\r\n        return await this.getCityCountiesQuery.table({ city: cityId });\r\n    }\r\n\r\n    saveAddress = async (countryId: number, provinceId: number, cityId?: number, countyId?: number): Promise<any> => {\r\n        let newAddress = await this.addressTuid.save(undefined, { country: countryId, province: provinceId, city: cityId, county: countyId });\r\n        let addressId = newAddress && this.addressTuid.boxId(newAddress.id);\r\n        this.returnCall(addressId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { Tuid, BoxId } from 'tonva';\r\nimport { VContactList } from './VContactList';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VContact } from './VContact';\r\nimport { Controller, Context, nav } from 'tonva';\r\nimport { CAddress } from './CAddress';\r\n\r\nexport abstract class CSelectContact extends Controller {\r\n    protected cApp: CCartApp;\r\n    private contactTuid: Tuid;\r\n    fromOrderCreation: boolean;\r\n\r\n    userContacts: any[] = [];\r\n\r\n    constructor(cApp: CCartApp, res: any, fromOrderCreation: boolean) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        let { cUqCustomer } = cApp;\r\n\r\n        this.contactTuid = cUqCustomer.tuid('contact');\r\n        this.fromOrderCreation = fromOrderCreation;\r\n    }\r\n\r\n    async internalStart(/*contactType: ContactType*/) {\r\n        //this.contactType = contactType;\r\n        this.userContacts = await this.cApp.currentUser.getContacts();\r\n        this.openVPage(VContactList);\r\n        if (!this.userContacts || this.userContacts.length === 0) {\r\n            this.onNewContact();\r\n        }\r\n    }\r\n\r\n    protected abstract async getIsDefault(userSetting: any, userContactId: number): Promise<boolean>;\r\n\r\n    /**\r\n     * 打开地址新建界面\r\n     */\r\n    onNewContact = async () => {\r\n        this.openVPage(VContact, { contact: undefined });\r\n    }\r\n\r\n    /**\r\n     * 打开地址编辑界面\r\n     */\r\n    onEditContact = async (userContact: any) => {\r\n        let userContactId = userContact.contact.id;\r\n        let contact = await this.contactTuid.load(userContactId);\r\n        let userSetting = await this.cApp.currentUser.getSetting();\r\n        contact.isDefault = await this.getIsDefault(userSetting, userContactId);\r\n        let userContactData: any = { contact: contact };\r\n        this.openVPage(VContact, userContactData);\r\n    }\r\n\r\n    delContact = async (contact: any) => {\r\n        // 真正的调用数据库操作\r\n        alert('真正调用数据库操作');\r\n    }\r\n\r\n    saveContact = async (contact: any) => {\r\n\r\n        let newContact = await this.contactTuid.save(undefined, contact);\r\n        let { id: newContactId } = newContact;\r\n        let contactBox = this.contactTuid.boxId(newContactId);\r\n\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.addContact(newContactId);\r\n        let { id, isDefault } = contact;\r\n        if (isDefault === true) {\r\n            await this.setDefaultContact(contactBox);\r\n        }\r\n        // contact.id !== undefined表示是修改了已有的contact(我们只能用“替换”表示“修改”，所以此时需要删除原contact)\r\n        if (id !== undefined) {\r\n            await currentUser.delContact(id);\r\n        }\r\n        this.backPage();\r\n        if (this.fromOrderCreation) {\r\n            this.onContactSelected(contactBox);\r\n        }\r\n    }\r\n\r\n    protected abstract async setDefaultContact(contactId: BoxId);\r\n\r\n    onContactSelected = (contact: BoxId) => {\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(contact);\r\n        }\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n}\r\n\r\nexport class CSelectShippingContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        let { shippingContact } = userSetting;\r\n        return shippingContact && shippingContact.id === userContactId;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultShippingContact(contactId);\r\n    }\r\n}\r\n\r\nexport class CSelectInvoiceContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        let { invoiceContact } = userSetting;\r\n        return invoiceContact && invoiceContact.id === userContactId;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoiceContact(contactId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { List, EasyDate } from 'tonva';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VMyOrders extends VPage<COrder> {\r\n\r\n    @observable private pendingOrders: any[];\r\n    @observable private allOrders: any[];\r\n    private currentState: string;\r\n    async open(param: any) {\r\n        this.currentState = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderOrder = (order: any, index: number) => {\r\n        let { openOrderDetail } = this.controller;\r\n        let { id, no, date, discription, flow } = order;\r\n        return <div className=\"m-3 justify-content-between cursor-pointer\" onClick={() => openOrderDetail(id)}>\r\n            <div><span className=\"small text-muted\">订单编号: </span><strong>{no}</strong></div>\r\n            <div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n        </div>;\r\n    }\r\n\r\n    private page = () => {\r\n\r\n        let tabs = [{\r\n            title: '待付款',\r\n            content: () => {\r\n                return <List items={this.pendingOrders} item={{ render: this.renderOrder }} />\r\n            },\r\n            isSelected: this.currentState === 'pendingpayment',\r\n            load: async () => {\r\n                this.currentState = 'pendingpayment';\r\n                this.pendingOrders = await this.controller.getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            title: '所有订单',\r\n            content: () => {\r\n                return <List items={this.allOrders} item={{ render: this.renderOrder }} />\r\n            },\r\n            isSelected: this.currentState === 'all',\r\n            load: async () => {\r\n                this.currentState = 'all';\r\n                this.allOrders = await this.controller.getMyOrders(this.currentState);\r\n            }\r\n        }];\r\n        return <Page header=\"我的订单\" tabs={tabs} tabPosition=\"top\" />\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, BoxId } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { tv } from 'tonva';\r\nimport { List, LMR } from 'tonva';\r\nimport { renderProduct } from 'product';\r\n\r\nexport class VOrderDetail extends VPage<COrder> {\r\n\r\n    async open(order: any) {\r\n\r\n        this.openPage(this.page, order);\r\n    }\r\n\r\n\r\n    private packsRow = (item: any, index: number) => {\r\n        let { pack, quantity, price, currency } = item;\r\n\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{price * quantity}</span> &nbsp;\r\n                    <small className=\"text-muted\">(¥{price} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: any) => {\r\n        let { product, packs } = orderItem;\r\n        return <div>\r\n            <div className=\"row p-1 my-1\">\r\n                <div className=\"col-lg-6 pb-3\">{renderProduct(product, 0)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return this.packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private page = (order: any) => {\r\n\r\n        let { brief, data } = order;\r\n        let { id, no, state, description, date } = brief;\r\n        let { orderItems, currency, shippingContact, invoiceContact, invoiceType, invoiceInfo, amount, webUser } = data;\r\n        let header = <>订单详情: {no}</>\r\n        return <Page header={header}>\r\n            <List items={orderItems} item={{ render: this.renderOrderItem }} />\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">收货地址:</div>\r\n                <div className=\"col-9\">{tv(shippingContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票地址:</div>\r\n                <div className=\"col-9\">{tv(invoiceContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票信息:</div>\r\n                <div className=\"col-9\">{invoiceTemplate(invoiceType, invoiceInfo)}</div>\r\n            </div>\r\n            <div className=\"bg-white p-3 my-1 text-right\">\r\n                <span className=\"text-danger font-weight-bold\">总金额: {amount}{tv(currency)}</span>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nfunction invoiceTemplate(invoiceType: BoxId, invoiceInfo: BoxId): JSX.Element {\r\n    return <>\r\n        {tv(invoiceType, invoiceTypeUI, undefined, () => <></>)}<br />\r\n        {tv(invoiceInfo, invoiceInfoUI, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nfunction invoiceTypeUI(values: any) {\r\n    let { id, description } = values;\r\n    return <>{description}</>;\r\n}\r\n\r\nfunction invoiceInfoUI(values: any) {\r\n    let { id, title, taxNo, address, telephone, bank, accountNo } = values;\r\n    return <>{title}</>;\r\n}","import * as React from 'react';\r\nimport { VPage, Page, UiSchema, UiInputItem, Form, Context } from 'tonva';\r\nimport { CInvoiceInfo } from './CInvoiceInfo';\r\nimport { Schema } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'title', type: 'string', required: false },\r\n    { name: 'taxNo', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: false },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'bank', type: 'string', required: false },\r\n    { name: 'accountNo', type: 'string', required: false },\r\n    { name: 'isDefault', type: 'boolean', required: false },\r\n];\r\n\r\nconst commonRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: false,\r\n};\r\n\r\nconst valueAddedRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: false,\r\n}\r\n\r\nconst commonVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: true,\r\n};\r\n\r\nconst valueAddedVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: true,\r\n}\r\n\r\n\r\n\r\nexport class VInvoiceInfo extends VPage<CInvoiceInfo> {\r\n    private form: Form;\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            title: { widget: 'text', label: '单位名称', placeholder: '必填' } as UiInputItem,\r\n            taxNo: { widget: 'text', label: '纳税人识别码', placeholder: '必填' } as UiInputItem,\r\n            address: { widget: 'text', label: '注册地址', placeholder: '必填' } as UiInputItem,\r\n            telephone: { widget: 'text', label: '注册电话', placeholder: '必填' } as UiInputItem,\r\n            bank: { widget: 'text', label: '开户银行', placeholder: '必填' } as UiInputItem,\r\n            accountNo: { widget: 'text', label: '银行账号', placeholder: '必填' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交' },\r\n            isDefault: { widget: 'checkbox', label: '作为默认发票信息' },\r\n        }\r\n    }\r\n\r\n    async open(origInvoice?: any) {\r\n        if (origInvoice  !== undefined && origInvoice.invoiceType !== undefined)\r\n            this.invoiceType = origInvoice.invoiceType.id;\r\n        else\r\n            this.invoiceType = 1;\r\n        this.openPage(this.page, origInvoice);\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { form } = context;\r\n        let { data } = form;\r\n        let invoice = {\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: data,\r\n            isDefault: data.isDefault,\r\n        };\r\n        await this.controller.saveInvoiceInfo(invoice);\r\n    }\r\n\r\n    private onSaveInvoice = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    @observable invoiceType: number;\r\n\r\n    private buildForm(invoiceInfo: any): JSX.Element {\r\n        let requiredFields = this.invoiceType === 1 ? commonRequired : valueAddedRequired;\r\n        let visibleFields = this.invoiceType === 1 ? commonVisible : valueAddedVisible;\r\n        schema.forEach(e => {\r\n            let { items } = this.uiSchema;\r\n            e.required = requiredFields[e.name];\r\n            items[e.name].visible = visibleFields[e.name];\r\n        });\r\n        return <Form ref={v => this.form = v} className=\"my-3\"\r\n            schema={schema}\r\n            uiSchema={this.uiSchema}\r\n            formData={invoiceInfo}\r\n            onButtonClick={this.onFormButtonClick}\r\n            fieldLabelSize={3} />\r\n    }\r\n\r\n    private onInvoiceTypeClick = (event: React.MouseEvent<HTMLInputElement>) => {\r\n        this.invoiceType = parseInt(event.currentTarget.value);\r\n    }\r\n\r\n    private page = observer((origInvoice: any) => {\r\n        let frm = this.buildForm(origInvoice.invoiceInfo);\r\n        return <Page header=\"发票\">\r\n            <div className=\"px-3\">\r\n                <div className=\"form-group row py-3 mb-1 bg-white\">\r\n                    <div className=\"col-12 col-sm-3 pb-2 text-muted\">发票类型:</div>\r\n                    <div className=\"col-12 col-sm-9\">\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"common\" value=\"1\"\r\n                                onClick={(event) => this.onInvoiceTypeClick(event)} defaultChecked></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"common\">普通发票</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"valueAdded\" value=\"2\"\r\n                                onClick={(event) => this.onInvoiceTypeClick(event)}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"valueAdded\">增值税发票</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"p-3 bg-white\">\r\n                {frm}\r\n                <button type=\"button\"\r\n                    className=\"btn btn-primary w-100\"\r\n                    onClick={this.onSaveInvoice}>确定</button>\r\n            </div>\r\n        </Page>\r\n    });\r\n}","import { Controller } from 'tonva';\r\nimport { VInvoiceInfo } from './VInvoiceInfo';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { Tuid } from 'tonva';\r\n\r\nexport class CInvoiceInfo extends Controller {\r\n    protected cApp: CCartApp;\r\n    private invoiceTypeTuid: Tuid;\r\n    private invoiceInfoTuid: Tuid;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqCommon, cUqCustomer } = cApp;\r\n        this.invoiceTypeTuid = cUqCommon.tuid('invoiceType');\r\n        this.invoiceInfoTuid = cUqCustomer.tuid('invoiceInfo');\r\n    }\r\n\r\n    async internalStart(origInvoice?: any) {\r\n        if (origInvoice !== undefined) {\r\n            let { invoiceInfo: invoiceInfoBox } = origInvoice;\r\n            if (invoiceInfoBox !== undefined) {\r\n                let invoiceInfo = await this.invoiceInfoTuid.load(invoiceInfoBox.id);\r\n                origInvoice.invoiceInfo = invoiceInfo;\r\n            }\r\n        }\r\n        this.openVPage(VInvoiceInfo, origInvoice);\r\n    }\r\n\r\n    async saveInvoiceInfo(invoice: any) {\r\n        let { invoiceType, invoiceInfo, isDefault } = invoice;\r\n        let newInvoiceInfo = await this.invoiceInfoTuid.save(undefined, invoiceInfo);\r\n        let { id: newInvoiceInfoId } = newInvoiceInfo;\r\n        let invoiceBox = {\r\n            invoiceType: this.invoiceTypeTuid.boxId(invoiceType),\r\n            invoiceInfo: this.invoiceInfoTuid.boxId(newInvoiceInfoId),\r\n        }\r\n        if (isDefault === true) {\r\n            let { currentUser } = this.cApp;\r\n            await currentUser.setDefaultInvoice(invoiceBox.invoiceType, invoiceBox.invoiceInfo);\r\n        }\r\n        this.backPage();\r\n        this.returnCall(invoiceBox);\r\n    }\r\n}","\r\nexport function groupByProduct(packItems: any[]) {\r\n    let result: any[] = [];\r\n    for (let cd of packItems) {\r\n        let { product, pack, quantity, price, currency } = cd;\r\n        let packRow: any = {\r\n            pack: pack.id,\r\n            price: price,\r\n            quantity: quantity,\r\n            currency: currency && currency.id\r\n        }\r\n        let cpi = result.find(e => e.product === product.id);\r\n        if (cpi === undefined) {\r\n            cpi = { product: product.id, packs: [] };\r\n            result.push(cpi);\r\n        }\r\n        cpi.packs.push(packRow);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function orderItemGroupByProduct(packItems: any[]) {\r\n    let result: any[] = [];\r\n    for (let cd of packItems) {\r\n        let { product, pack, quantity, price, currency } = cd;\r\n        let cpi = result.find(e => e.product.id === product.id);\r\n        if (cpi === undefined) {\r\n            cpi = { product: product, packs: [] };\r\n            result.push(cpi);\r\n        }\r\n        let packRow: any = {\r\n            pack: pack,\r\n            price: price,\r\n            quantity: quantity,\r\n            currency: currency && currency.id\r\n        }\r\n        cpi.packs.push(packRow);\r\n    }\r\n    return result;\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, FA, Page } from 'tonva';\r\nimport { CCoupon } from './CCoupon';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VCouponEdit extends VPage<CCoupon> {\r\n\r\n    private couponInput: HTMLInputElement;\r\n    @observable tips: string;\r\n    async open(param: any) {\r\n        if (param !== undefined) {\r\n\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private applyCoupon = async () => {\r\n        let coupon = this.couponInput.value;\r\n        if (!coupon)\r\n            return;\r\n        let ret = await this.controller.applyCoupon(coupon);\r\n        switch (ret) {\r\n            case -1:\r\n                this.tips = '对不起，当前服务器繁忙，请稍后再试。';\r\n                break;\r\n            case 1:\r\n                this.tips = '有效';\r\n                break;\r\n            case 0:\r\n            case 2:\r\n            case 3:\r\n            case 5:\r\n                this.tips = '优惠码无效，请重新输入或与您的专属销售人员联系。';\r\n                break;\r\n            case 4:\r\n                this.tips = '该优惠码已经被使用过了，不允许重复使用。';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        return <Page header=\"填写优惠码\">\r\n            <div className=\"px-2 bg-white\">\r\n                <div className=\"row py-3 pr-3 my-1\">\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">优惠码:</div>\r\n                    <div className=\"col-8 col-sm-10 d-flex\">\r\n                        <input ref={v => this.couponInput = v} type=\"number\" className=\"form-control\"></input>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row my-1\">\r\n                    <div className=\"col-12\">\r\n                        <button className=\"btn btn-primary w-100\" onClick={this.applyCoupon}>应用</button>\r\n                    </div>\r\n                </div>\r\n                {tipsUI}\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import { Controller, Action } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VCouponEdit } from './VCouponEdit';\r\n\r\nexport class CCoupon extends Controller {\r\n    private cApp: CCartApp;\r\n    private isValidCoupon: Action;\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n        let { cUqSalesTask } = cApp;\r\n        this.isValidCoupon = cUqSalesTask.action('isCanUseCoupon');\r\n    }\r\n\r\n    applyCoupon = async (coupon: string) => {\r\n\r\n        let validationResult = await this.isValidCoupon.submit({ code: coupon, webuser: this.cApp.currentUser.id });\r\n        let rtn = validationResult.result;\r\n        if (rtn === 1) {\r\n            this.returnCall(validationResult);\r\n            this.closePage();\r\n        }\r\n        return rtn;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        this.openVPage(VCouponEdit);\r\n    }\r\n}","import { observable } from 'mobx';\r\nimport { Sheet, BoxId, Query, Action, Tuid, Map } from 'tonva';\r\nimport { Controller, nav } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VCreateOrder } from './VCreateOrder';\r\nimport { Order, OrderItem } from './Order';\r\nimport { OrderSuccess } from './OrderSuccess';\r\nimport { CSelectShippingContact, CSelectInvoiceContact, CSelectContact } from 'customer/CSelectContact';\r\nimport { VMyOrders } from './VMyOrders';\r\nimport { VOrderDetail } from './VOrderDetail';\r\nimport { WebUser } from 'CurrentUser';\r\nimport { CInvoiceInfo } from 'customer/CInvoiceInfo';\r\nimport { orderItemGroupByProduct } from 'tools/groupByProduct';\r\nimport { LoaderProductChemical } from 'product/itemLoader';\r\nimport { CCoupon } from './CCoupon';\r\n\r\nconst FREIGHTFEEFIXED = 12;\r\nconst FREIGHTFEEREMITTEDSTARTPOINT = 100;\r\n\r\nexport class COrder extends Controller {\r\n    private cApp: CCartApp;\r\n    @observable orderData: Order = new Order();\r\n    private orderSheet: Sheet;\r\n    private getPendingPaymentQuery: Query;\r\n    private priceMap: Map;\r\n    currentUser: WebUser;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        let { cUqOrder, currentUser, cUqSalesTask, cUqProduct } = cApp;\r\n        this.orderSheet = cUqOrder.sheet('order');\r\n        this.getPendingPaymentQuery = cUqOrder.query('getpendingPayment');\r\n        this.priceMap = cUqProduct.map('pricex');\r\n        this.currentUser = currentUser;\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        let cart = param;\r\n        await this.createOrderFromCart(cart);\r\n        this.openVPage(VCreateOrder);\r\n    }\r\n\r\n    private createOrderFromCart = async (cartItems: any[]) => {\r\n        let { currentUser } = this.cApp;\r\n        this.orderData.webUser = currentUser.id;\r\n        if (currentUser.currentCustomer !== undefined) {\r\n            this.orderData.customer = currentUser.currentCustomer.id;\r\n        }\r\n\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceContact === undefined) {\r\n            this.orderData.invoiceContact = await this.getDefaultInvoiceContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceType === undefined) {\r\n            this.orderData.invoiceType = await this.getDefaultInvoiceType();\r\n        }\r\n\r\n        if (this.orderData.invoiceInfo === undefined) {\r\n            this.orderData.invoiceInfo = await this.getDefaultInvoiceInfo();\r\n        }\r\n\r\n        if (cartItems !== undefined && cartItems.length > 0) {\r\n            this.orderData.currency = cartItems[0].currency;\r\n            this.orderData.orderItems = cartItems.map((element: any, index: number) => {\r\n                var item = new OrderItem();\r\n                item.product = element.product;\r\n                item.packs = element.packs.filter(v => v.quantity > 0);\r\n                return item;\r\n            });\r\n\r\n            // 运费和运费减免\r\n            this.orderData.freightFee = FREIGHTFEEFIXED;\r\n            if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n        }\r\n    }\r\n\r\n    private defaultSetting: any;\r\n    private async getDefaultSetting() {\r\n        if (this.defaultSetting) return this.defaultSetting;\r\n        let { currentUser } = this.cApp;\r\n        return this.defaultSetting = await currentUser.getSetting() || {};\r\n    }\r\n\r\n    private contact0: BoxId;\r\n    private async getContact(): Promise<BoxId> {\r\n        if (this.contact0 === null) return;\r\n        if (this.contact0 !== undefined) return this.contact0;\r\n        let { currentUser } = this.cApp;\r\n        let contactArr = await currentUser.getContacts();\r\n        if (contactArr === undefined || contactArr.length === 0) {\r\n            this.contact0 = null;\r\n            return;\r\n        }\r\n        return this.contact0 = contactArr[0].contact;\r\n    }\r\n\r\n    private async getDefaultShippingContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.shippingContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceType() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceType;\r\n    }\r\n\r\n    private async getDefaultInvoiceInfo() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceInfo;\r\n    }\r\n\r\n    submitOrder = async () => {\r\n        let { orderItems } = this.orderData;\r\n\r\n        let result: any = await this.orderSheet.save(\"order\", this.orderData.getDataForSave());\r\n        await this.orderSheet.action(result.id, result.flow, result.state, \"submit\");\r\n\r\n        let { cartViewModel, cartService } = this.cApp;\r\n        let param: [{ productId: number, packId: number }] = [] as any;\r\n        orderItems.forEach(e => {\r\n            e.packs.forEach(v => {\r\n                param.push({ productId: e.product.id, packId: v.pack.id })\r\n            })\r\n        });\r\n        cartService.removeFromCart(cartViewModel, param);\r\n        // 打开下单成功显示界面\r\n        nav.popTo(this.cApp.topKey);\r\n        this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    private onSelectContact = async (\r\n        typeSelectContact: new (cApp: CCartApp, res: any, autoSelectMode: boolean) => CSelectContact,\r\n    ) => {\r\n        let cSelectContact = new typeSelectContact(this.cApp, undefined, true);\r\n        let contact = await cSelectContact.call<any>();\r\n        return contact;\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        let typeSelectContact: new (cApp: CCartApp, res: any, autoSelectMode: boolean) => CSelectContact = CSelectShippingContact;\r\n        let contactBox = await this.onSelectContact(typeSelectContact);\r\n        this.orderData.shippingContact = contactBox;\r\n    }\r\n\r\n    onSelectInvoiceContact = async () => {\r\n        let typeSelectContact: new (cApp: CCartApp, res: any, autoSelectMode: boolean) => CSelectContact = CSelectInvoiceContact;\r\n        let contactBox = await this.onSelectContact(typeSelectContact);\r\n        this.orderData.invoiceContact = contactBox;\r\n    }\r\n\r\n    onCouponEdit = async () => {\r\n        let cCoupon = new CCoupon(this.cApp, undefined);\r\n        let coupon = await cCoupon.call<any>(this.orderData.coupon);\r\n        if (coupon) {\r\n            await this.applyCoupon(coupon);\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    applyCoupon = async (coupon: any) => {\r\n\r\n        let { id, code, discount, preferential, validitydate, isValid } = coupon;\r\n        if (code !== undefined && isValid === 1 && new Date(validitydate).getTime() > Date.now()) {\r\n            this.orderData.coupon = id;\r\n            if (discount) {\r\n                this.orderData.couponOffsetAmount = Math.round(this.orderData.productAmount * discount) * -1;\r\n                /*\r\n                let { orderItems } = this.orderData;\r\n                if (orderItems !== undefined && orderItems.length > 0) {\r\n                    let promises: PromiseLike<any>[] = [];\r\n                    orderItems.forEach(e => {\r\n                        promises.push(this.priceMap.table({ product: e.product.id, salesRegion: 1 }));\r\n                    });\r\n                    let prices = await Promise.all(promises);\r\n\r\n                    for (let i = 0; i < orderItems.length; i++) {\r\n                        let oi = orderItems[i];\r\n                        let eachPrices = prices[i];\r\n                        let { product, packs } = oi;\r\n                        for (let j = 0; j < packs.length; j++) {\r\n                            let pk = packs[j];\r\n                            let price: any = eachPrices.find(\r\n                                p => p.product.id === product.id &&\r\n                                    p.pack.id === pk.pack.id &&\r\n                                    p.discountinued === 0 &&\r\n                                    p.expireDate > Date.now());\r\n                            if (price) {\r\n                                pk.price = Math.round(price.retail * (1 - discount));\r\n                            }\r\n                        };\r\n                    };\r\n                }\r\n                */\r\n            }\r\n            if (preferential) {\r\n                this.orderData.couponRemitted = preferential * -1;\r\n            }\r\n            // 运费和运费减免\r\n            this.orderData.freightFee = FREIGHTFEEFIXED;\r\n            if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n        }\r\n    }\r\n\r\n    removeCoupon = async () => {\r\n\r\n    }\r\n\r\n    /*\r\n    */\r\n    openMyOrders = async (state: string) => {\r\n\r\n        this.openVPage(VMyOrders, state);\r\n    }\r\n\r\n    getMyOrders = async (state: string) => {\r\n\r\n        switch (state) {\r\n            case 'pendingpayment':\r\n                return await this.getPendingPaymentQuery.table(undefined);\r\n                break;\r\n            default:\r\n                return await this.orderSheet.mySheets(undefined, 1, 20);\r\n                break;\r\n        }\r\n    }\r\n\r\n    onInvoiceInfoEdit = async () => {\r\n        let cInvoiceInfo = new CInvoiceInfo(this.cApp, undefined);\r\n        let { invoiceType, invoiceInfo } = this.orderData;\r\n        let origInvoice = {\r\n            invoiceType: invoiceType,\r\n            invoiceInfo: invoiceInfo,\r\n        }\r\n        let newInvoice = await cInvoiceInfo.call<any>(origInvoice);\r\n        this.orderData.invoiceType = newInvoice.invoiceType;\r\n        this.orderData.invoiceInfo = newInvoice.invoiceInfo;\r\n    }\r\n\r\n    openOrderDetail = async (orderId: number) => {\r\n\r\n        let order = await this.orderSheet.getSheet(orderId);\r\n        let { data } = order;\r\n        let { orderitems } = data;\r\n        let orderItemsGrouped = orderItemGroupByProduct(orderitems);\r\n        let loaderProduct = new LoaderProductChemical(this.cApp);\r\n        for (let i = 0; i < orderItemsGrouped.length; i++) {\r\n            let productId = orderItemsGrouped[i].product.id;\r\n            orderItemsGrouped[i].product = await loaderProduct.load(productId);\r\n        }\r\n        data.orderItems = orderItemsGrouped;\r\n        this.openVPage(VOrderDetail, order);\r\n    }\r\n\r\n    openMeInfo = async () => {\r\n        let { cMe } = this.cApp;\r\n        await cMe.openMeInfoFirstOrder();\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav } from 'tonva';\r\nimport { LMR, FA, SearchBox } from 'tonva';\r\nimport logo from '../images/logo.png';\r\nimport { CHome } from './CHome';\r\n\r\nexport class VSiteHeader extends View<CHome> {\r\n    render() {\r\n        let currentSalesRegion = <FA name=\"globe\" />\r\n        let login = <div>\r\n            登录\r\n        </div>\r\n        let left = <img className=\"m-1\" src={logo} alt=\"logo\" style={{height: \"3rem\", width: \"3rem\"}} />;\r\n        //let cart = this.controller.cApp.cCart.renderCartLabel();\r\n        let right = undefined;\r\n        /*\r\n        <div className=\"d-flex flex-row mr-1 align-items-center\">\r\n            {currentSalesRegion} &nbsp;\r\n            <button onClick={()=>nav.start()}>Try</button>\r\n        </div>;*/\r\n        return <LMR\r\n            className=\"mb-3 align-items-center bg-white\"\r\n            left={left} right={right}>\r\n            <div className=\"\">\r\n                {this.controller.renderSearchHeader('md')}\r\n            </div>\r\n        </LMR>\r\n        //<div className=\"h4 px-3 mb-0\">百灵威科技</div>\r\n    }\r\n}","import * as React from 'react';\r\nimport { View, nav } from 'tonva';\r\nimport { CHome } from './CHome';\r\nimport { SearchBox } from 'tonva';\r\n\r\nexport class VSearchHeader extends View<CHome> {\r\n\r\n    private onSearch = async (key: string, param: 'home' | 'insearch' | 'productdetail') => {\r\n        let { cProduct, topKey } = this.controller.cApp;\r\n        if (param !== 'home') {\r\n            nav.popTo(topKey);\r\n        }\r\n\r\n        cProduct.start(key);\r\n    }\r\n\r\n    render(param: 'home' | 'insearch' | 'productdetail') {\r\n        let size: any = param === 'home' ? \"md\" : 'sm';\r\n        return <SearchBox className=\"px-1 w-100\"\r\n            size={size}\r\n            onSearch={(key: string) => this.onSearch(key, param)}\r\n            placeholder=\"搜索品名、编号、CAS、MDL等\" />\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, View } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CHome } from './CHome';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VHome extends View<CHome> {\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderSection = (item: any, index: number) => {\r\n        return <section>\r\n            <h4>{item.title}<small className=\"text-muted\">{item.subtitle}</small></h4>\r\n            <p>{item.content}</p>\r\n        </section>\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return <Page header={false}>\r\n            <this.content />\r\n        </Page>;\r\n    })\r\n\r\n    private content = observer(() => {\r\n        let siteHeader = this.controller.renderSiteHeader();\r\n        return <>\r\n            {siteHeader}\r\n            {this.controller.renderCategoryRootList()}\r\n        </>\r\n    });\r\n}","import * as React from 'react';\r\nimport { Tuid } from 'tonva';\r\nimport { VSiteHeader } from './VSiteHeader';\r\nimport { CCartApp } from '../CCartApp';\r\nimport { PageItems, Controller } from 'tonva';\r\nimport { VSearchHeader } from './VSearchHeader';\r\nimport { VHome } from './VHome';\r\n\r\nclass HomeSections extends PageItems<any> {\r\n\r\n    private sectionTuid: Tuid;\r\n\r\n    constructor(sectionTuid: Tuid) {\r\n        super();\r\n        this.firstSize = this.pageSize = 13;\r\n        this.sectionTuid = sectionTuid;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.sectionTuid.search(\"\", pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        if (item === undefined) return 0;\r\n        return item.id;\r\n    }\r\n}\r\n\r\nexport class CHome extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    homeSections: HomeSections;\r\n    sectionTuid: Tuid;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    async internalStart(param: any) {\r\n\r\n        let { cProductCategory } = this.cApp;\r\n        await cProductCategory.start();\r\n        this.openVPage(VHome);\r\n    }\r\n\r\n    renderSiteHeader = () => {\r\n        return this.renderView(VSiteHeader);\r\n    }\r\n\r\n    renderSearchHeader = (size?: string) => {\r\n        return this.renderView(VSearchHeader, size);\r\n    }\r\n\r\n    renderCategoryRootList = () => {\r\n        let { cProductCategory } = this.cApp;\r\n        return cProductCategory.renderRootList();\r\n    }\r\n\r\n    tab = () => this.renderView(VHome);\r\n}","import * as React from 'react';\r\nimport { View, tv } from 'tonva';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { FA } from 'tonva';\r\nimport AnalyticalChemistry from '../images/AnalyticalChemistry.png';\r\nimport LabSupplies from '../images/LabSupplies.png';\r\nimport LifeScience from '../images/LifeScience.png';\r\nimport MaterialScience from '../images/MaterialScience.png';\r\nimport OrganicChemistry from '../images/OrganicChemistry.png';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst x = {\r\n    685: {\r\n        src: OrganicChemistry,\r\n        labelColor: 'text-info',\r\n    },\r\n    1092: {\r\n        src: AnalyticalChemistry,\r\n        labelColor: 'text-success',\r\n    },\r\n    1626: {\r\n        src: LifeScience,\r\n        labelColor: 'text-danger',\r\n    },\r\n    1906: {\r\n        src: MaterialScience,\r\n        labelColor: 'text-warning',\r\n    },\r\n    2211: {\r\n        src: LabSupplies,\r\n        labelColor: 'text-primary',\r\n    },\r\n}\r\n\r\nconst imgStyle: React.CSSProperties = {\r\n    height: '1.5rem', width: '1.5rem',\r\n    marginLeft: '0.1rem',\r\n    marginRight: '0.3rem'\r\n}\r\n\r\nexport const titleTitle: React.CSSProperties = {\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport const subStyle: React.CSSProperties = {\r\n    fontSize: '0.75rem',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport class VRootCategory extends View<CProductCategory> {\r\n\r\n    private categoryClick = async (categoryWapper: any, parent: any, labelColor: string) => {\r\n        await this.controller.openMainPage(categoryWapper, parent, labelColor);\r\n    }\r\n\r\n    private renderRootCategory = (item: any, parent: any) => {\r\n        let { name, children, productCategory } = item;\r\n        let { id: productCategoryID } = productCategory;\r\n        let { src, labelColor } = x[productCategoryID];\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, undefined, labelColor)}>\r\n                <img className=\"mr-5\" src={src} alt={name} style={{ height: \"2.5rem\", width: \"2.5rem\" }} />\r\n                <b>{name}</b>\r\n            </div>\r\n            <div className=\"\"\r\n                style={{ paddingRight: '1px' }}\r\n            >\r\n                <div className=\"row no-gutters\">\r\n                    {children.map(v => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, color: string) => {\r\n        let { name, children, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            onClick={() => this.categoryClick(item, parent, color)}>\r\n            <div className=\"py-3 px-2\"\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <div style={titleTitle}>\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={color} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(children, total)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    }\r\n\r\n    private content = observer(() => {\r\n        let { categories, categories2 } = this.controller;\r\n        return <>{categories.map(v => this.renderRootCategory(v, undefined))}</>;\r\n        // return <>{categories2.map(v => <div key={v.productCategory.id}>{tv(v, e => this.renderRoot(e))}</div>)}</>;\r\n    });\r\n\r\n    private renderRoot(root: any) {\r\n        let { productCategory } = root;\r\n        let { id } = productCategory;\r\n        console.log(id);\r\n        return <div key={id}>{id}</div>\r\n    }\r\n}\r\n\r\n\r\nexport function renderThirdCategory(items: any, total: number) {\r\n    return <div className=\"py-2 px-1 text-muted small\" style={subStyle}>\r\n        {items.length === 0 ? <>该类产品数量: {total > 1000 ? '>1000' : total}</> : items.map(v => v.name).join(' / ')}\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { VPage, Page } from 'tonva';\r\nimport { List, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { titleTitle, subStyle, renderThirdCategory } from './VRootCategory';\r\n\r\nexport class VCategory extends VPage<CProductCategory> {\r\n\r\n    async open(categoryWaper: any) {\r\n\r\n        this.openPage(this.page, categoryWaper);\r\n    }\r\n\r\n    private renderChild = (childWapper: any) => {\r\n\r\n        return <div className=\"py-2\"><FA name=\"hand-o-right mr-2\"></FA>{childWapper.name}</div>\r\n    }\r\n\r\n    private categoryClick = async (childWapper: any, parent: any, labelColor: string) => {\r\n        await this.controller.openMainPage(childWapper, parent, labelColor);\r\n    }\r\n\r\n    private breadCrumb = (item: any, parent: any) => {\r\n        return <nav arial-babel=\"breadcrumb\">\r\n            <ol className=\"breadcrumb\">\r\n                {tv(item, this.breadCrumbItem)}\r\n            </ol>\r\n        </nav>\r\n\r\n    }\r\n\r\n    private breadCrumbItem = (values: any, parent: any) => {\r\n        if (values === undefined || values.productCategory === undefined)\r\n            return <></>;\r\n        return <>\r\n            {tv(values.productCategory.parent, this.breadCrumbItem)}\r\n            <li className=\"breadcrumb-item\" onClick={() => this.categoryClick(values, undefined, \"\")}>{values.name}</li>\r\n        </>\r\n    }\r\n\r\n    private renderRootCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { productCategory, name, children } = item;\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n                <b>{name}</b>\r\n            </div>\r\n            <div className=\"\"\r\n                style={{ paddingRight: '1px' }}\r\n            >\r\n                <div className=\"row no-gutters\">\r\n                    {children.map(v => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { name, children, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n            <div className=\"pt-1 pb-1 px-2\"\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <div style={titleTitle}>\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={labelColor} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(children, total)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private page = (categoryWaper: any) => {\r\n\r\n        let { cHome } = this.controller.cApp;\r\n        let header = cHome.renderSearchHeader();\r\n        let cartLabel = this.controller.cApp.cCart.renderCartLabel();\r\n\r\n        let { categoryWaper: item, parent, labelColor } = categoryWaper;\r\n        return <Page header={header} right={cartLabel}>\r\n            {this.renderRootCategory(item, parent, labelColor)}\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { Query } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { VRootCategory } from './VRootCategory';\r\nimport { VCategory } from './VCategory';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { Controller } from 'tonva';\r\n\r\nexport class CProductCategory extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    // categories: any[];\r\n    @observable categories: any[] = [];\r\n    @observable categories2: any[] = [];\r\n    private getRootCategoryQuery: Query;\r\n    private getRootCategoriesQuery: Query;\r\n    private getChildrenCategoryQuery: Query;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n        let { cUqProduct } = this.cApp;\r\n        this.getRootCategoryQuery = cUqProduct.query('getRootCategory');\r\n        this.getRootCategoriesQuery = cUqProduct.query('getRootCategories');\r\n        this.getChildrenCategoryQuery = cUqProduct.query('getChildrenCategory');\r\n    }\r\n\r\n    async internalStart(param: any) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        let results = await this.getRootCategoryQuery.query({ salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n        this.categories = results.first;\r\n        this.categories.forEach(element => {\r\n            this.buildCategories(element, results.secend, results.third);\r\n        })\r\n        /*\r\n        let result2 = await this.getRootCategoriesQuery.query({ salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n        if (result2)\r\n            this.categories2 = result2.ret;\r\n        */\r\n    }\r\n\r\n    renderRootList = () => {\r\n        return this.renderView(VRootCategory);\r\n    };\r\n\r\n    async getCategoryChildren(parentCategoryId: number) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        return await this.getChildrenCategoryQuery.query({ parent: parentCategoryId, salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n    }\r\n\r\n    async buildCategories(categoryWapper: any, firstCategory: any, secendCategory: any) {\r\n        firstCategory.forEach(async element => {\r\n            element.children = secendCategory.filter(v => v.parent === element.productCategory.id);\r\n        });\r\n        categoryWapper.children = firstCategory.filter(v => v.parent === categoryWapper.productCategory.id);\r\n    }\r\n\r\n    async openMainPage(categoryWaper: any, parent: any, labelColor: string) {\r\n\r\n        let { productCategory, name } = categoryWaper;\r\n        let { id: productCategoryId } = productCategory;\r\n        let results = await this.getCategoryChildren(productCategoryId);\r\n        if (results.first.length !== 0) {\r\n            this.buildCategories(categoryWaper, results.first, results.secend);\r\n            this.openVPage(VCategory, { categoryWaper, parent, labelColor });\r\n        } else {\r\n            let { cProduct } = this.cApp;\r\n            await cProduct.searchByCategory({ productCategoryId, name });\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Image } from 'tonva';\r\nimport { CMember } from './CMember';\r\nimport { LMR, Muted, FA, Media } from 'tonva';\r\nimport pig from '../images/pig.png';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst stylePig: React.CSSProperties = {\r\n    width: '100%',\r\n    height: '20rem',\r\n    backgroundImage: `url(${pig})`,\r\n    backgroundSize: 'contain',\r\n    backgroundColor: 'rgba(255,255,255,0.1)',\r\n    opacity: 0.09,\r\n    position: 'absolute',\r\n}\r\n\r\nexport class VMember extends VPage<CMember> {\r\n    private recommendationCodeRef = React.createRef<HTMLInputElement>();\r\n\r\n    async open(param: any) {\r\n\r\n    }\r\n\r\n    render(member: any): JSX.Element {\r\n\r\n        return <this.content />;\r\n    }\r\n\r\n    private submitRecommendationCode() {\r\n        let code = this.recommendationCodeRef.current.value;\r\n        if (code) {\r\n            let { setReferrer: submit } = this.controller;\r\n            submit(code);\r\n        }\r\n    }\r\n\r\n    private content = observer(() => {\r\n        let { cApp, member } = this.controller;\r\n        if (member === undefined)\r\n            return <></>;\r\n        let { currentUser } = cApp;\r\n        let { recommendationCode, point } = member;\r\n        if (!point) point = 0;\r\n\r\n        let im = <Image className=\"mr-3 w-3c h-3c\" src={currentUser.icon} />;\r\n        let inviteCode = <div className=\"small\">邀请码: {recommendationCode}</div>;\r\n\r\n        let divPoints = <div className=\"my-3 text-center bg-white h-25\" style={{ position: 'relative' }}>\r\n            <div className=\"w-100 bg-white h-20c\" style={{ position: 'absolute' }} />\r\n            <div className=\"d-flex align-items-center justify-content-center\" style={stylePig} />\r\n            <div className=\"w-100 d-flex align-items-center justify-content-center h-20c\" style={{ position: 'absolute' }}>\r\n                <div className=\"muted mr-3 small\">积分: </div>\r\n                <div className=\"text-danger\" style={{ fontSize: '2rem' }}>{point}</div>\r\n            </div>\r\n        </div>\r\n\r\n        let pointTitle = <p className=\"h4\">我的积分</p>\r\n        let pointDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>\r\n        let pointThisWeek = <><p className=\"h5 mb-0\">0</p><Muted>本周</Muted></>\r\n        let pointAll = <><p className=\"h5 mb-0\">{point}</p><Muted>累计</Muted></>\r\n\r\n        let fansTitle = <p>我的粉丝</p>\r\n        let fansDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>;\r\n        let detail = <div className=\"shadow bg-white rounded p-3 mb-1\">\r\n            <LMR left={fansTitle} right={fansDetail}></LMR>\r\n            <LMR className=\"pb-2\">\r\n                <p className=\"h4 mb-0\">0</p>\r\n                <Muted>今日</Muted>\r\n            </LMR>\r\n            <LMR left={pointThisWeek} right={pointAll} />\r\n            <LMR>\r\n                <input type=\"text\" className=\"form-control\" ref={this.recommendationCodeRef} />\r\n                <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.submitRecommendationCode()}>输入邀请码</button>\r\n            </LMR>\r\n        </div>;\r\n\r\n        return <div>\r\n            <LMR className=\"bg-white p-3 mb-1 align-items-center\"\r\n                left={im} right={inviteCode}>\r\n                <b>{currentUser.name}</b>\r\n            </LMR>\r\n            {divPoints}\r\n            {/*detail*/}\r\n        </div>\r\n    })\r\n}\r\n/*\r\n<div className=\"shadow bg-white rounded p-3 mb-1\">\r\n<LMR left={pointTitle} right={pointDetail}></LMR>\r\n<LMR className=\"pb-2\">\r\n    <p className=\"h4 mb-0\">0</p>\r\n    <Muted>今日</Muted>\r\n</LMR>\r\n<LMR left={pointThisWeek} right={pointAll} />\r\n</div>\r\n*/","import * as React from 'react';\r\nimport Loadable from 'react-loadable';\r\nimport { Controller, Loading, nav } from 'tonva';\r\nimport { VMember } from './VMember';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { FA } from 'tonva';\r\nimport { jnkTop } from 'me/loginTop';\r\nimport { Action, Map, BoxId } from 'tonva';\r\n\r\nexport class CMember extends Controller {\r\n\r\n    cApp: CCartApp;\r\n    @observable member: any;\r\n    private referrer: BoxId;\r\n    private memberAction: Action;\r\n    private memberRecommenverMap: Map;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n        let { cUqMember } = cApp;\r\n        this.memberAction = cUqMember.action('MemberAction');\r\n        this.memberRecommenverMap = cUqMember.map('MemberRecommender');\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n\r\n        if (this.isLogined) {\r\n            let { id: currentUserId } = this.user;\r\n            let promises: PromiseLike<any>[] = [];\r\n            promises.push(this.memberAction.submit({}));\r\n            promises.push(this.memberRecommenverMap.table({ referrer: currentUserId }));\r\n            promises.push(this.memberRecommenverMap.table({ member: currentUserId }));\r\n            let result = await Promise.all(promises);\r\n            let { code, point } = result[0];\r\n            this.referrer = result[2];\r\n            this.member = { recommendationCode: code, point: point, fans: result[1], referrer: result[2] };\r\n        }\r\n    }\r\n\r\n    private loginCallback = async () => {\r\n        nav.pop();\r\n        await this.internalStart(undefined);\r\n    }\r\n\r\n    render = observer(() => {\r\n        if (this.isLogined) {\r\n            return this.member === undefined ? <Loading /> : this.renderView(VMember);\r\n        } else {\r\n            return <div\r\n                className=\"d-flex h-100 flex-column align-items-center justify-content-center\">\r\n                <div className=\"flex-fill\" />\r\n                <button className=\"btn btn-success w-20c\"\r\n                    onClick={() => nav.showLogin(this.loginCallback, true)}>\r\n                    <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                </button>\r\n                <div className=\"flex-fill\" />\r\n                <div className=\"flex-fill\" />\r\n            </div>;\r\n        }\r\n    })\r\n\r\n    tab = () => {\r\n        this.start();\r\n        return <this.render />;\r\n    }\r\n\r\n    setReferrer(code: string) {\r\n        if (code) {\r\n            // 写入map，方法是add，用这个方法可能会写入多次，多以在写入之前要检查有没有，有的话，就不能再调用这个方法了\r\n            // 这个逻辑我认为应该是在服务端，写入的时候要给双方积分，给多少积分的逻辑，也应该在后端，从邀请码到拥有此邀请码\r\n            // 的会员id之间的转换，逻辑也应该在后台，这个后端的逻辑写在ACTION中？\r\n            if (!this.referrer) {\r\n                let { id: currentUserId } = this.user;\r\n            }\r\n        }\r\n    }\r\n}","import { User, loadAppUqs } from 'tonva';\r\nimport { Map, BoxId, CUq, Tuid } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\n\r\nexport class WebUser {\r\n\r\n    id: number;\r\n    name: string;\r\n    nick?: string;\r\n    icon?: string;\r\n    guest: number;\r\n    token: string;\r\n\r\n    @observable firstName: string;\r\n    gender: string;\r\n    salutation: string;\r\n    @observable organizationName: string;\r\n    departmentName: string;\r\n\r\n    telephone: string;\r\n    @observable mobile: string;\r\n    email: string;\r\n    fax: string;\r\n    zipCode: string;\r\n    @computed get allowOrdering() {\r\n        return this.currentCustomer !== undefined ||\r\n            (this.mobile && this.firstName && this.organizationName);\r\n    }\r\n\r\n    private _user: User;\r\n\r\n    private webUserTuid: Tuid;\r\n    private webUserCustomerMap: Map;\r\n    private webUserContactMap: Map;\r\n    private webUserContactsMap: Map;\r\n    private webUserSettingMap: Map;\r\n\r\n    private webUserSettings: any;\r\n\r\n    private cUsqCustomer: CUq;\r\n\r\n    constructor(cUsqWebUser: CUq, cUsqCustomer: CUq) {\r\n        this.webUserTuid = cUsqWebUser.tuid(\"webUser\");\r\n        this.webUserCustomerMap = cUsqWebUser.map('webUserCustomer');\r\n        this.webUserContactMap = cUsqWebUser.map('webUserContact');\r\n        this.webUserContactsMap = cUsqWebUser.map('webUserContacts');\r\n        this.webUserSettingMap = cUsqWebUser.map('webUserSetting');\r\n        this.cUsqCustomer = cUsqCustomer;\r\n    }\r\n\r\n    setUser = async (user: User) => {\r\n        if (user !== undefined) {\r\n            this._user = user;\r\n            this.id = user.id;\r\n            this.name = user.name;\r\n            this.nick = user.nick;\r\n            this.icon = user.icon;\r\n            this.guest = user.guest;\r\n            this.token = user.token;\r\n\r\n            await this.loadWebUser();\r\n        }\r\n    }\r\n\r\n    private async loadWebUser() {\r\n        if (this._user !== undefined) {\r\n            let webUser = await this.webUserTuid.load(this.id);\r\n            if (webUser) {\r\n                let { firstName, gender, salutation, organizationName, departmentName } = webUser;\r\n                this.firstName = firstName;\r\n                this.gender = gender;\r\n                this.salutation = salutation;\r\n                this.organizationName = organizationName;\r\n                this.departmentName = departmentName;\r\n            }\r\n            let contact = await this.webUserContactMap.obj({ webUser: this.id });\r\n            if (contact) {\r\n                let { telephone, mobile, email, fax, zipCode } = contact;\r\n                this.telephone = telephone;\r\n                this.mobile = mobile;\r\n                this.email = email;\r\n                this.fax = fax;\r\n                this.zipCode = zipCode;\r\n            }\r\n            let value = await this.webUserCustomerMap.obj({ webUser: this.id });\r\n            if (value != undefined)\r\n                this.currentCustomer = new Customer(value.customer, this.cUsqCustomer);\r\n        }\r\n    }\r\n\r\n    get isLogined(): boolean {\r\n        return this._user !== undefined;\r\n    }\r\n    get hasCustomer(): boolean {\r\n        return this.currentCustomer !== undefined;\r\n    }\r\n    currentCustomer: Customer;\r\n\r\n    async getContacts(): Promise<any[]> {\r\n\r\n        if (this.currentCustomer !== undefined) {\r\n            return await this.currentCustomer.getContacts()\r\n        }\r\n        return await this.webUserContactsMap.table({ webUser: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.addContact(contactId);\r\n            return;\r\n        }\r\n        await this.webUserContactsMap.add({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.delContact(contactId);\r\n            return;\r\n        }\r\n        await this.webUserContactsMap.del({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async getSetting() {\r\n        this.webUserSettings = await this.webUserSettingMap.obj({ webUser: this.id });\r\n        return this.webUserSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultShippingContact(contactId);\r\n            return;\r\n        }\r\n        // await this.webUserSettingMap.add({ webUser: this.id, shippingContact: contactId });\r\n        this.webUserSettings.shippingContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoiceContact(contactId);\r\n            return;\r\n        }\r\n        await this.webUserSettingMap.add({ webUser: this.id, arr1: [{ invoiceContact: contactId }] });\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoice(invoiceTypeId, invoiceInfoId);\r\n            return;\r\n        }\r\n        // await this.webUserSettingMap.add({ webUser: this.id, arr1: [{ invoiceType: invoiceTypeId, invoiceInfo: invoiceInfoId }] });\r\n        this.webUserSettings.invoiceType = invoiceTypeId;\r\n        this.webUserSettings.invoiceInfo = invoiceInfoId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async saveDefaultSettings() {\r\n        await this.webUserSettingMap.add(this.webUserSettings);\r\n    }\r\n\r\n\r\n    async changeWebUser(webUser: any) {\r\n        await this.webUserTuid.save(this.id, webUser);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        webUserContact.webUser = this.id;\r\n        await this.webUserContactMap.add(webUserContact);\r\n        await this.loadWebUser();\r\n    }\r\n};\r\n\r\nexport class Customer {\r\n\r\n    private contactMap: Map;\r\n    id: number;\r\n\r\n    private customerSettingMap: Map;\r\n\r\n    private customerSettings: any;\r\n\r\n    constructor(customer: BoxId, cUsqCustomer: CUq) {\r\n        this.id = customer.id;\r\n        this.contactMap = cUsqCustomer.map('customerContacts');\r\n        this.customerSettingMap = cUsqCustomer.map('customerSetting');\r\n    };\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        return await this.contactMap.table({ customer: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        await this.contactMap.add({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        await this.contactMap.del({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async getSetting() {\r\n        this.customerSettings = await this.customerSettingMap.obj({ customer: this.id });\r\n        return this.customerSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        // await this.customerSettingMap.add({ customer: this.id, arr1: [{ defaultShippingContact: contactId }] });\r\n        this.customerSettings.shippingContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        // await this.customerSettingMap.add({ customer: this.id, arr1: [{ defaultInvoiceContact: contactId }] });\r\n        this.customerSettings.invoiceContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        this.customerSettings.invoiceType = invoiceTypeId;\r\n        this.customerSettings.invoiceInfo = invoiceInfoId;\r\n        // await this.customerSettingMap.add({ customer: this.id, arr1: [{ invoiceType: invoiceTypeId, invoiceInfo: invoiceInfoId }] });\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultSettings() {\r\n        await this.customerSettingMap.add(this.customerSettings);\r\n    }\r\n}","export const consts = {\r\n\r\n    uqOrder: '百灵威系统工程部/order',\r\n    uqProduct: \"百灵威系统工程部/product\",\r\n    uqCommon: '百灵威系统工程部/common',\r\n    uqWebUser: '百灵威系统工程部/webuser',\r\n    uqCustomer: '百灵威系统工程部/customer',\r\n    uqCustomerDiscount: '百灵威系统工程部/customerDiscount',\r\n    uqPromotion: '百灵威系统工程部/promotion',\r\n    uqWarehouse: \"百灵威系统工程部/warehouse\",\r\n    uqSalesTask: \"百灵威系统工程部/salestask\",\r\n    uqMember: '百灵威系统工程部/member',\r\n\r\n    appIcon: 'http://101.200.46.56/imgs/Bear-icon.png',\r\n}","import * as React from 'react';\r\nimport { Page, nav } from 'tonva';\r\nimport ReactMarkdown from 'react-markdown/with-html';\r\nimport logo from '../images/logo.png';\r\n\r\nconst content = `百灵威科技有限公司是一家致力于研发和生产化学及生命科学相关产品，集敏捷制造、全球营销和现代物流为一体的高科技企业。\r\n\r\n百灵威秉承“诚实守信、开拓创新、合作共赢、实现卓越”的价值观，致力于与化学、生物医药、精细化工、食品工业、现代农业、电子、日化、石化、纺织、生命科学、环境保护、疾病控制、新能源、新材料、航空航天等领域的客户建立互信、长久的合作关系，为实现“促进科技与工业发展，造福人类”的使命而不懈努力！\r\n\r\n<h2>企业使命</h2>\r\n\r\n促进科技与工业发展，造福人类\r\n\r\n<h2>企业愿景</h2>\r\n\r\nJ＆K Scientific想象一个所有人都能在安全和清洁的环境中过上健康，有益的生活的世界。我们致力于纪念未来，努力改善我们的孩子及其子女的世界。当我们与客户合作解决他们的生产需求时，这个愿景指导我们的行动。\r\n\r\n<h2>核心价值观</h2>\r\n\r\n<style>\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n.box {\r\n  float: left;\r\n  width: 25%;\r\n  padding: 1px;\r\n  text-align: center;\r\n}\r\n.clearfix::after {\r\n  content: \"\";\r\n  clear: both;\r\n  display: table;\r\n}\r\n</style>\r\n\r\n<div class=\"clearfix\">\r\n  <div class=\"box\" style=\"background-color:#bbb\">\r\n  <h3>诚实守信</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">诚实守信</p>\r\n  </div>\r\n  <div class=\"box\" style=\"background-color:#ccc\">\r\n      <h3>开拓创新</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">开拓创新</p>\r\n  </div>\r\n  <div class=\"box\" style=\"background-color:#ddd\">\r\n      <h3>合作共赢</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">合作共赢</p>\r\n  </div>\r\n  <div class=\"box\" style=\"background-color:#eee\">\r\n      <h3>实现卓越</h3>\r\n  <p style=\"color:grey;font-size: 1rem;\">实现卓越</p>\r\n  </div>\r\n</div>\r\n\r\n<h2>国际营销中心</h2>\r\n\r\n<style>\r\nimg {\r\n  float: left;\r\n}\r\n</style>\r\n\r\n<img src=\"http://47.92.87.6/wordpress/wp-content/uploads/2019/05/World-Wide-Distribution.png\" alt=\"World Wide Distribution\"\r\n    title=\"ww distribution\" class=\"img-fluid\"/>\r\n    百灵威在中国内地、香港，欧洲及北美等多个国家和地区设有物流中心，实行专业化、个性化的一站式服务，为全球超过200,000 名科技和工业领域的客户提供产品资源及配套技术服务。百灵威具有国际化学技术资源背景及强大的国际操控能力，可以帮助有特殊要求的客户从国外单独进口特种化学产品，为项目试验乃至工业化应用提供强大支持。百灵威具有强大的专业化学品定制、采购和出口能力，更具备众多国际性合作项目（如多国化学实验室联合开发战略性化合物）的运作能力，百灵威愿与中国的同行携 手，共创我国化学事业更加辉煌的未来！\r\n\r\n<h2>国际认证</h2>\r\n\r\n<h3>ISO 9001</h3>\r\n\r\n【配图】\r\n`\r\n\r\nexport class About extends React.Component {\r\n    render() {\r\n        let right = null;\r\n        return <Page header=\"关于百灵威\" right={right}>\r\n            <div className='bg-white p-3'>\r\n                <img className=\"h-3c position-absolute\" src={logo} />\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <span className=\"text-primary mr-3\">百灵威集团</span>\r\n                </div>\r\n                <ReactMarkdown className=\"mt-5\" source={content} escapeHtml={false} />\r\n            </div>\r\n        </Page>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { userApi, ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page, Edit, UiSchema, VPage, UiRadio, IdSchema, UiIdItem } from 'tonva';\r\nimport { CMe } from './CMe';\r\n\r\nexport class EditMeInfo extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            nick: { widget: 'text', label: '别名', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n        }\r\n    }\r\n    @observable private data: any;\r\n\r\n    @observable private webUserData: any;\r\n\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone\r\n            , mobile, email, fax, zipCode } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            zipCode: zipCode,\r\n        }\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        nav.user[name] = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"个人信息\">\r\n            <Edit schema={this.schema} uiSchema={this.uiSchema}\r\n                data={this.data}\r\n                onItemChanged={this.onItemChanged} />\r\n            <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                data={this.webUserData}\r\n                onItemChanged={this.onWebUserChanged} />\r\n            <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema}\r\n                data={this.webUserContactData}\r\n                onItemChanged={this.onWebUserContactChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport const webUserSchema: ItemSchema[] = [\r\n    { name: 'firstName', type: 'string', required: true } as StringSchema,\r\n    { name: 'gender', type: 'string' } as StringSchema,\r\n    { name: 'salutation', type: 'string' } as StringSchema,\r\n    { name: 'organizationName', type: 'string', required: true } as StringSchema,\r\n    { name: 'departmentName', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport const webUserUiSchema: UiSchema = {\r\n    items: {\r\n        firstName: { widget: 'text', label: '真实姓名', placeholder: '化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。为此，需要您重新提供非虚拟的、可核查的信息。' } as UiTextItem,\r\n        gender: { widget: 'radio', label: '性别', list: [{ value: '1', title: '男' }, { value: '0', title: '女' }], defaultValue: 1 } as UiRadio,\r\n        salutation: { widget: 'text', label: '称谓' } as UiTextItem,\r\n        organizationName: { widget: 'text', label: '单位名称' } as UiTextItem,\r\n        departmentName: { widget: 'text', label: '部门名称' } as UiTextItem,\r\n    }\r\n}\r\n\r\n// 个人联系方式信息\r\nexport const webUserContactSchema: ItemSchema[] = [\r\n    { name: 'telephone', type: 'string' } as StringSchema,\r\n    { name: 'mobile', type: 'string', required: true } as StringSchema,\r\n    { name: 'email', type: 'string' } as StringSchema,\r\n    { name: 'fax', type: 'string', required: false } as StringSchema,\r\n    { name: 'address', type: 'id', required: false } as IdSchema,\r\n    { name: 'zipCode', type: 'string', required: false } as StringSchema,\r\n];\r\nexport const webUserContactUiSchema: UiSchema = {\r\n    items: {\r\n        telephone: { widget: 'text', label: '固定电话' } as UiTextItem,\r\n        mobile: { widget: 'text', label: '移动电话' } as UiTextItem,\r\n        email: {\r\n            widget: 'text', label: 'Email',\r\n            rules: (value: any) => {\r\n                if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n                    return \"Email格式不正确。\";\r\n                else\r\n                    return undefined;\r\n            },\r\n            placeholder: 'Email'\r\n        } as UiTextItem,\r\n        fax: { widget: 'text', label: '传真' } as UiTextItem,\r\n        address: { widget: 'id', label: '地址' } as UiIdItem,\r\n        zipCode: { widget: 'text', label: '邮编' } as UiTextItem,\r\n    }\r\n}","import * as React from 'react';\r\nimport { nav, User, Page, Image, VPage } from 'tonva';\r\nimport { Prop, Media, IconText, FA, PropGrid, LMR } from 'tonva';\r\nimport { About } from './about';\r\nimport { observer } from 'mobx-react';\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\n\r\nexport class VMe extends VPage<CMe> {\r\n\r\n    async open(param?: any) {\r\n\r\n    }\r\n\r\n    private exit() {\r\n        nav.showLogout();\r\n    }\r\n\r\n    private about = () => nav.push(<About />);\r\n\r\n    private changePassword = async () => {\r\n        await nav.changePassword();\r\n        // nav.push(<ChangePasswordPage />);\r\n    }\r\n\r\n    private openContactList = async () => {\r\n        this.controller.openContactList();\r\n    }\r\n\r\n    private openInvoice = async () => {\r\n        this.controller.openInvoice();\r\n    }\r\n\r\n    private meInfo = observer(() => {\r\n        let { user } = nav;\r\n        if (user === undefined) return null;\r\n        let { id, name, nick, icon } = user;\r\n        return <LMR className=\"py-2 cursor-pointer w-100\"\r\n            left={<Image className=\"w-3c h-3c mr-3\" src={icon} />}\r\n            right={<FA className=\"align-self-end\" name=\"chevron-right\" />}\r\n            onClick={() => {\r\n                this.openVPage(EditMeInfo);\r\n            }}>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-muted\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </LMR>;\r\n    });\r\n\r\n    private orderStates = () => {\r\n\r\n        let { openMyOrders } = this.controller;\r\n        return <div className=\"d-flex justify-content-around w-100 my-3\">\r\n            <div className=\"d-flex flex-column align-items-center\" onClick={() => openMyOrders('pendingpayment')}>\r\n                <FA name=\"file-text-o\" className=\"text-info fa-2x\" />\r\n                <small>待付款</small>\r\n            </div>\r\n            <div className=\"d-flex flex-column align-items-center\" onClick={() => openMyOrders('all')}>\r\n                <FA name=\"file-text-o\" className=\"text-info fa-2x\" />\r\n                <small>所有订单</small>\r\n            </div>\r\n        </div>\r\n    };\r\n\r\n    render() {\r\n        const { user } = nav;\r\n        let aboutRows: Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于百灵威\" />,\r\n                onClick: this.about\r\n            },\r\n            '',\r\n        ];\r\n\r\n        let rows: Prop[];\r\n        if (user === undefined) {\r\n            rows = aboutRows;\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    component: <button className=\"btn btn-success w-100 my-2\" onClick={() => nav.showLogin(undefined, true)}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                    </button>\r\n                },\r\n            );\r\n        }\r\n        else {\r\n            let logOutRows: Prop[] = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    bk: '',\r\n                    component: <button className=\"btn btn-danger w-100\" onClick={this.exit}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 退出登录\r\n                </button>\r\n                },\r\n            ];\r\n\r\n            rows = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.meInfo />\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.orderStates />,\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"地址管理\" />,\r\n                    onClick: this.openContactList\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"发票管理\" />,\r\n                    onClick: this.openInvoice\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text=\"修改密码\" />,\r\n                    onClick: this.changePassword\r\n                },\r\n            ]\r\n            rows.push(...aboutRows, ...logOutRows);\r\n        }\r\n        return <PropGrid rows={rows} values={{}} />;\r\n    }\r\n}\r\n\r\n\r\nfunction userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page, Edit, UiSchema, VPage } from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport { webUserSchema, webUserUiSchema, webUserContactSchema, webUserContactUiSchema } from './EditMeInfo';\r\nimport { FA, LMR } from 'tonva';\r\n\r\nexport class EditMeInfoFirstOrder extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    @observable private webUserData: any;\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone, mobile, email } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email\r\n        }\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"首次下单补充个人信息\">\r\n            <div className=\"alert alert-primary small\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning mr-3 my-1 float-left\" size=\"3x\" />\r\n                化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。\r\n                为此，需要您重新提供非虚拟的、可核查的信息。这些信息包括下面所有带有 <span className=\"text-danger\">*</span> 的信息。\r\n            </div>\r\n            <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                data={this.webUserData}\r\n                onItemChanged={this.onWebUserChanged} />\r\n            <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema}\r\n                data={this.webUserContactData}\r\n                onItemChanged={this.onWebUserContactChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Controller } from 'tonva';\r\nimport { CCartApp } from 'CCartApp';\r\nimport { VMe } from './VMe';\r\nimport { CSelectShippingContact } from 'customer/CSelectContact';\r\nimport { EditMeInfoFirstOrder } from './EditMeInfoFirstOrder';\r\nimport { CInvoiceInfo } from 'customer/CInvoiceInfo';\r\n\r\nexport class CMe extends Controller {\r\n\r\n    cApp: CCartApp;\r\n\r\n    constructor(cApp: CCartApp, res: any) {\r\n        super(res);\r\n\r\n        this.cApp = cApp;\r\n    }\r\n\r\n    protected async internalStart() {\r\n\r\n    }\r\n\r\n    async changeWebUser(webUser: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUser(webUser);\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUserContact(webUserContact);\r\n    }\r\n\r\n    tab = () => <this.renderMe />\r\n\r\n    private renderMe = () => {\r\n        return this.renderView(VMe);\r\n    }\r\n\r\n    openMyOrders = async (state: string) => {\r\n        let { cOrder } = this.cApp;\r\n        await cOrder.openMyOrders(state);\r\n    }\r\n\r\n    openContactList = async () => {\r\n        let contactList = new CSelectShippingContact(this.cApp, undefined, false);\r\n        await contactList.start();\r\n    }\r\n\r\n    openInvoice = async () => {\r\n        let cInvoiceInfo = new CInvoiceInfo(this.cApp, undefined);\r\n        cInvoiceInfo.start();\r\n    }\r\n\r\n    openMeInfoFirstOrder = async () => {\r\n        await this.openVPage(EditMeInfoFirstOrder);\r\n    }\r\n}","import { observable, autorun, IReactionDisposer } from 'mobx';\r\nimport _ from 'lodash';\r\nimport { CartItem, CartPackRow } from './Cart';\r\n\r\nexport interface CartItemSimple {\r\n    product: number;\r\n    packs: CartPackRow[];\r\n    $isSelected?: boolean;\r\n    $isDeleted?: boolean;\r\n    createdate: number;\r\n}\r\n\r\nexport class CartViewModelSimple {\r\n\r\n    constructor() {\r\n        this.cartItems = this.data.list;\r\n        this.disposer = autorun(this.calcSum);\r\n    }\r\n\r\n    private disposer: IReactionDisposer;\r\n    cartItems: CartItemSimple[];\r\n    @observable data = {\r\n        list: observable<CartItemSimple>([]),\r\n    };\r\n    count = observable.box<number>(0);\r\n    amount = observable.box<number>(0);\r\n\r\n    dispose() {\r\n        this.disposer();\r\n    }\r\n\r\n    protected calcSum = () => {\r\n        let count = 0, amount = 0;\r\n        for (let cp of this.cartItems) {\r\n            let { $isSelected, $isDeleted, packs } = cp;\r\n            if ($isDeleted === true) continue;\r\n            for (let pi of packs) {\r\n                let { price, quantity } = pi;\r\n                count += quantity;\r\n                if (price === Number.NaN || quantity === Number.NaN) continue;\r\n                if ($isSelected === true) {\r\n                    amount += quantity * price;\r\n                }\r\n            }\r\n        }\r\n        this.count.set(count);\r\n        this.amount.set(amount);\r\n    }\r\n\r\n    getQuantity(productId: number, packId: number): number {\r\n        let cp = this.cartItems.find(v => v.$isDeleted !== true && v.product === productId);\r\n        if (cp === undefined) return 0;\r\n        let packItem = cp.packs.find(v => v.pack.id === packId);\r\n        if (packItem === undefined) return 0;\r\n        return packItem.quantity;\r\n    }\r\n}\r\n\r\nexport class CartViewModel {\r\n\r\n    constructor() {\r\n        this.cartItems = this.data.list;\r\n        this.disposer = autorun(this.calcSum);\r\n    }\r\n\r\n    private disposer: IReactionDisposer;\r\n\r\n    cartItems: CartItem[];\r\n    @observable data = {\r\n        list: observable<CartItem>([]),\r\n    };\r\n    count = observable.box<number>(0);\r\n    amount = observable.box<number>(0);\r\n\r\n    dispose() {\r\n        this.disposer();\r\n    }\r\n\r\n    protected calcSum = () => {\r\n        let count = 0, amount = 0;\r\n        for (let cp of this.cartItems) {\r\n            let { $isSelected, $isDeleted, packs } = cp;\r\n            if ($isDeleted === true) continue;\r\n            for (let pi of packs) {\r\n                let { price, quantity } = pi;\r\n                count += quantity;\r\n                if (price === Number.NaN || quantity === Number.NaN) continue;\r\n                if ($isSelected === true) {\r\n                    amount += quantity * price;\r\n                }\r\n            }\r\n        }\r\n        this.count.set(count);\r\n        this.amount.set(parseFloat(amount.toFixed(2)));\r\n    }\r\n\r\n    getQuantity(productId: number, packId: number): number {\r\n        let cp = this.cartItems.find(v => v.$isDeleted !== true && v.product.id === productId);\r\n        if (cp === undefined) return 0;\r\n        let packItem = cp.packs.find(v => v.pack.id === packId);\r\n        if (packItem === undefined) return 0;\r\n        return packItem.quantity;\r\n    }\r\n\r\n    isDeleted(productId: number): boolean {\r\n        let i = this.cartItems.findIndex(v => v.$isDeleted === true && v.product.id === productId);\r\n        return i !== -1;\r\n    }\r\n\r\n    getSelectedItem(): CartItem[] {\r\n        return this.cartItems.filter(v => {\r\n            let { $isSelected, $isDeleted } = v;\r\n            return $isSelected === true && $isDeleted !== true;\r\n        });\r\n    }\r\n\r\n    add(cartItem: CartItem) {\r\n        let { product, packs } = cartItem;\r\n        let { id: productId } = product;\r\n        let cartItemExists: CartItem = this.cartItems.find((element) => element.product.id === productId);\r\n        if (!cartItemExists) {\r\n            cartItem.$isSelected = true;\r\n            cartItem.$isDeleted = false;\r\n            this.cartItems.push(cartItem);\r\n            return;\r\n        }\r\n\r\n        let { $isDeleted, packs: packsExists } = cartItemExists;\r\n        if ($isDeleted === true) {\r\n            packs.splice(0);\r\n        }\r\n        cartItemExists.$isDeleted = false;\r\n        cartItemExists.$isSelected = true;\r\n\r\n        let { pack, price, currency, quantity, inventoryAllocation, futureDeliveryTimeDescription } = packs[0];\r\n        let piPack: CartPackRow = packsExists.find(v => v.pack.id === pack.id);\r\n        if (piPack === undefined) {\r\n            cartItemExists.packs.push(packs[0]);\r\n        }\r\n        else {\r\n            piPack.price = price;\r\n            piPack.quantity = quantity;\r\n            piPack.currency = currency;\r\n            piPack.futureDeliveryTimeDescription = futureDeliveryTimeDescription;\r\n            piPack.inventoryAllocation = inventoryAllocation;\r\n        }\r\n    }\r\n\r\n    removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        if (rows && rows.length > 0) {\r\n            rows.forEach(pe => {\r\n                let cartItemIndex = this.cartItems.findIndex(e => e.product.id === pe.productId);\r\n                if (cartItemIndex >= 0) {\r\n                    let cartItem = this.cartItems[cartItemIndex];\r\n                    let i = cartItem.packs.findIndex(e => e.pack.id === pe.packId)\r\n                    if (i >= 0) {\r\n                        cartItem.packs.splice(i, 1);\r\n                        if (cartItem.packs.length === 0) {\r\n                            this.cartItems.splice(cartItemIndex, 1);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n}","import { CCartApp } from 'CCartApp';\r\nimport { Query, TuidDiv, Action } from 'tonva';\r\nimport { CartViewModel, CartViewModelSimple } from './Cart2';\r\nimport { CartItem, CartPackRow } from './Cart';\r\nimport { LoaderProductChemical } from 'product/itemLoader';\r\nimport { groupByProduct } from 'tools/groupByProduct';\r\n\r\nexport class CartServiceFactory {\r\n\r\n    static getCartService(cApp: CCartApp) {\r\n        if (cApp.isLogined)\r\n            return new CartRemoteService(cApp);\r\n        return new CartLocalService(cApp);\r\n    }\r\n}\r\n\r\nexport abstract class CartService {\r\n\r\n    protected cApp: CCartApp;\r\n    private getInventoryAllocationQuery: Query;\r\n    private packTuid: TuidDiv;\r\n\r\n    constructor(cApp: CCartApp) {\r\n        this.cApp = cApp;\r\n        let { cUqWarehouse, cUqProduct } = this.cApp;\r\n        this.getInventoryAllocationQuery = cUqWarehouse.query(\"getInventoryAllocation\");\r\n        this.packTuid = cUqProduct.tuidDiv('productx', 'packx');\r\n    }\r\n\r\n    abstract get isLocal(): boolean;\r\n    abstract async load(): Promise<CartViewModel>;\r\n    abstract async loadSimple(): Promise<CartViewModelSimple>;\r\n\r\n    protected async generateCartItems(cartData: any): Promise<CartViewModel> {\r\n\r\n        let result = new CartViewModel();\r\n        if (cartData) {\r\n            for (let cd of cartData) {\r\n                let { product: productId, createdate, packs } = cd;\r\n                result.cartItems.push(await this.generateCartItem(productId, packs))\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    protected async generateSimpleCartItems(cartData: any): Promise<CartViewModelSimple> {\r\n\r\n        let result = new CartViewModelSimple();\r\n        if (cartData) {\r\n            for (let cd of cartData) {\r\n                let { product, createdate, packs } = cd;\r\n                result.cartItems.push({ product: product, packs: packs, $isSelected: true, $isDeleted: false, createdate: createdate });\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    protected async generateCartItem(productId: number, packs: any[]): Promise<CartItem> {\r\n\r\n        let cartItem: CartItem = {} as any;\r\n        let productService = new LoaderProductChemical(this.cApp);\r\n        cartItem.product = await productService.load(productId);\r\n        cartItem.createdate = Date.now();\r\n        cartItem.$isSelected = true;\r\n        cartItem.$isDeleted = false;\r\n\r\n        cartItem.packs = [];\r\n        if (packs !== undefined) {\r\n            for (let p of packs) {\r\n                let { pack: packId, price, quantity, currency } = p;\r\n                let packItem: CartPackRow = {\r\n                    pack: this.packTuid.boxId(packId),\r\n                    price: price,\r\n                    quantity: quantity,\r\n                    currency: currency,\r\n                };\r\n                packItem.inventoryAllocation =\r\n                    await this.getInventoryAllocationQuery.table({ product: productId, pack: packId, salesRegion: this.cApp.currentSalesRegion })\r\n                cartItem.packs.push(packItem);\r\n            }\r\n        }\r\n        return cartItem;\r\n    }\r\n\r\n    abstract async addToCart(cartViewModel: CartViewModel, productId: number, packId: number, quantity: number, price: number, currency: any);\r\n\r\n    abstract async removeFromCart(cartViewModel: CartViewModel, rows: [{ productId: number, packId: number }]);\r\n\r\n    abstract async clear(cartViewModel: CartViewModel);\r\n\r\n    abstract async merge(source: CartViewModel);\r\n}\r\n\r\nexport class CartRemoteService extends CartService {\r\n    private getCartQuery: Query;\r\n    private setCartAction: Action;\r\n    private removeFromCartAction: Action;\r\n    private mergeCartAction: Action;\r\n\r\n    get isLocal(): boolean { return false }\r\n\r\n    constructor(cApp: CCartApp) {\r\n        super(cApp);\r\n\r\n        let { cUqOrder } = this.cApp;\r\n        this.getCartQuery = cUqOrder.query('getcart')\r\n        this.setCartAction = cUqOrder.action('setcart');\r\n        this.removeFromCartAction = cUqOrder.action('removefromcart');\r\n        this.mergeCartAction = cUqOrder.action('mergeCartAction');\r\n    }\r\n\r\n    async load(): Promise<CartViewModel> {\r\n        let cartData = await this.getCartQuery.page(undefined, 0, 100);\r\n        let cartData2 = groupByProduct(cartData);\r\n        return await this.generateCartItems(cartData2);\r\n    }\r\n\r\n    async loadSimple(): Promise<CartViewModelSimple> {\r\n        let cartData = await this.getCartQuery.page(undefined, 0, 100);\r\n        let cartData2 = groupByProduct(cartData);\r\n        return await this.generateSimpleCartItems(cartData2);\r\n    }\r\n\r\n    /**\r\n     * 添加购物车\r\n     * @param pack 要添加到购物车中的包装\r\n     * @param quantity 要添加到购物车中包装的个数\r\n     */\r\n    async addToCart(cartViewModel: CartViewModel, productId: number, packId: number, quantity: number, price: number, currency: any) {\r\n        let param = {\r\n            product: productId,\r\n            pack: packId,\r\n            price: price,\r\n            currency: currency,\r\n            quantity: quantity\r\n        }\r\n\r\n        try {\r\n            await this.setCartAction.submit(param);\r\n            let cartItem: CartItem = await this.generateCartItem(productId\r\n                , [{ pack: packId, price: price, quantity: quantity, currency: currency && currency.id }]);\r\n            cartViewModel.add(cartItem);\r\n        } catch (error) {\r\n\r\n        }\r\n    }\r\n\r\n    async removeFromCart(cartViewModel: CartViewModel, rows: [{ productId: number, packId: number }]) {\r\n        if (rows && rows.length > 0) {\r\n            cartViewModel.removeFromCart(rows);\r\n            let param = rows.map(e => { return { product: e.productId, pack: e.packId } });\r\n            await this.removeFromCartAction.submit({ rows: param })\r\n        }\r\n    }\r\n\r\n    async clear(cartViewModel: CartViewModel) {\r\n        let param = cartViewModel.cartItems.map(v => {\r\n            let { product, packs } = v;\r\n            return {\r\n                product: product,\r\n                ...packs\r\n            }\r\n        })\r\n        await this.removeFromCartAction.submit({ rows: param });\r\n    }\r\n\r\n    async merge(source: CartViewModel) {\r\n        let param = source.cartItems.map(v => {\r\n            let { product, packs } = v;\r\n            return {\r\n                product: product,\r\n                ...packs\r\n            }\r\n        })\r\n        await this.mergeCartAction.submit({ rows: param });\r\n        return await this.load();\r\n    }\r\n}\r\n\r\nconst LOCALCARTNAME: string = \"cart\";\r\nexport class CartLocalService extends CartService {\r\n\r\n    constructor(cApp: CCartApp) {\r\n        super(cApp);\r\n    }\r\n\r\n    get isLocal(): boolean { return true }\r\n\r\n    async load(): Promise<CartViewModel> {\r\n        try {\r\n            let cartstring = localStorage.getItem(LOCALCARTNAME);\r\n            let cartData = JSON.parse(cartstring);\r\n            return await this.generateCartItems(cartData);\r\n        }\r\n        catch {\r\n            localStorage.removeItem(LOCALCARTNAME);\r\n        }\r\n    }\r\n\r\n    async loadSimple(): Promise<CartViewModelSimple> {\r\n        try {\r\n            let cartstring = localStorage.getItem(LOCALCARTNAME);\r\n            let cartData = JSON.parse(cartstring);\r\n            return await this.generateSimpleCartItems(cartData);\r\n        }\r\n        catch {\r\n            localStorage.removeItem(LOCALCARTNAME);\r\n        }\r\n    }\r\n\r\n    async addToCart(cartViewModel: CartViewModel, productId: number, packId: number, quantity: number, price: number, currency: any) {\r\n\r\n        let cartItem: CartItem = await this.generateCartItem(productId\r\n            , [{ pack: packId, price: price, quantity: quantity, currency: currency && currency.id }]);\r\n        cartViewModel.add(cartItem);\r\n\r\n        this.save(cartViewModel);\r\n    }\r\n\r\n    async removeFromCart(cartViewModel: CartViewModel, rows: [{ productId: number, packId: number }]) {\r\n        cartViewModel.removeFromCart(rows);\r\n        this.save(cartViewModel);\r\n    }\r\n\r\n    private save(cartViewModel: CartViewModel) {\r\n        let items = cartViewModel.cartItems.map(e => {\r\n            let { product, packs } = e;\r\n            return {\r\n                product: product.id,\r\n                packs: packs && packs.map(v => {\r\n                    let { pack, price, currency, quantity } = v;\r\n                    return {\r\n                        pack: pack.id,\r\n                        price: price,\r\n                        currency: currency && currency.id,\r\n                        quantity: quantity,\r\n                    }\r\n                }),\r\n            }\r\n        });\r\n\r\n        let text = JSON.stringify(items);\r\n        localStorage.setItem(LOCALCARTNAME, text);\r\n    }\r\n\r\n    clear(cartViewModel: CartViewModel) {\r\n        localStorage.removeItem(LOCALCARTNAME);\r\n    }\r\n\r\n    async merge(source: CartViewModel) {\r\n    }\r\n\r\n}\r\n","import * as React from 'react';\r\nimport { TuidUI, tv, UqUI } from 'tonva';\r\n\r\nexport const addressUI: TuidUI = {\r\n    content: (values: any) => {\r\n        let { country, province, city, county } = values;\r\n        return <>\r\n            {tv(country)}{tv(province, undefined, undefined, () => <></>)}{tv(city, undefined, undefined, () => <></>)}{tv(county, undefined, undefined, () => <></>)}\r\n        </>\r\n    }\r\n}\r\n\r\nexport const countryUI: TuidUI = {\r\n    content: (values: any) => {\r\n        return <> {values.chineseName} </>;\r\n    }\r\n}\r\n\r\nexport const currencyUI: TuidUI = {\r\n    content: (values: any) => {\r\n        return <> {values.name} </>;\r\n    }\r\n}\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: {\r\n        address: addressUI,\r\n        country: countryUI,\r\n        province: countryUI,\r\n        city: countryUI,\r\n        county: countryUI,\r\n        currency: currencyUI,\r\n    },\r\n}\r\n\r\nexport default uqUI;\r\n","import * as React from 'react';\r\nimport { TuidUI, tv } from 'tonva';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nexport const productUI: TuidUI = {\r\n    content: (values: any) => {\r\n        let product = values;\r\n        let { brand, description, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"row d-flex\">\r\n            <div className=\"col-12\">\r\n                <div className=\"row py-2\">\r\n                    <div className=\"col-12\"><strong>{description}</strong></div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                    </div>\r\n                    <div className=\"col-9\">\r\n                        <div className=\"row\">\r\n                            {item('CAS', CAS)}\r\n                            {item('纯度', purity)}\r\n                            {item('分子式', molecularFomula)}\r\n                            {item('分子量', molecularWeight)}\r\n                            {item('产品编号', origin)}\r\n                            {tv(brand, (values: any) => <>{item(\"品牌\", values.name)}</>)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    },\r\n    divs: {\r\n        packx: {\r\n            content: (values: any) => {\r\n                let { radiox, radioy, unit } = values;\r\n                if (radiox !== 1) return <>{radiox} * {radioy}{unit}</>;\r\n                return <>{radioy}{unit}</>;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction item(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 text-muted pr-0\">{caption}:</div>\r\n        <div className=\"col-8\">{value}</div>\r\n    </>;\r\n}","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\n\r\nexport const contactUI = {\r\n    content: (values: any) => {\r\n        let { name, mobile, organizationName, address, addressString } = values;\r\n        return <div className=\"flex-grow-1\">\r\n            <b>\r\n                {name}\r\n            </b>\r\n            &nbsp; {mobile} &nbsp; {organizationName}<br />\r\n            <small>{tv(address)} {addressString}</small>\r\n        </div>\r\n    }\r\n}","import { UqUI } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import { contactUI } from './contact';\r\nimport { addressUI, countryUI } from 'ui/common';\r\nimport { invoiceInfoUI, invoiceTypeUI } from './invoice';\r\n\r\nexport default {\r\n    contact: contactUI,\r\n    address: addressUI,\r\n    country: countryUI,\r\n    province: countryUI,\r\n    city: countryUI,\r\n    county: countryUI,\r\n    invoiceInfo: invoiceInfoUI,\r\n    invoiceType: invoiceTypeUI\r\n}","import * as React from 'react';\r\n\r\nexport const invoiceTypeUI = {\r\n    content: (values: any) => {\r\n        let { id, description } = values;\r\n        return <div className=\"flex-grow-1\">\r\n            {description}\r\n        </div>\r\n    }\r\n}\r\n\r\n\r\nexport const invoiceInfoUI = {\r\n    content: (values: any) => {\r\n        let { title, taxNo } = values;\r\n        return <div className=\"flex-grow-1\">\r\n            <b>\r\n                {title}\r\n            </b>\r\n            &nbsp; {taxNo}\r\n        </div>\r\n    }\r\n}\r\n","import { AppUI, CApp } from 'tonva';\r\nimport { VHome } from './main';\r\nimport { CCartApp } from '../CCartApp';\r\nimport commonUI from './common';\r\nimport orderUI from './order';\r\nimport productUI from './product';\r\nimport customerUI from './customer';\r\nimport warehouseUI from './warehouse';\r\nimport { jnkTop } from '../me/loginTop';\r\n\r\nconst ui: AppUI = {\r\n    appName: \"百灵威系统工程部/cart\",\r\n    CApp: CCartApp,\r\n    main: VHome,\r\n    uqs: {\r\n        '百灵威系统工程部/common': commonUI,\r\n        '百灵威系统工程部/order': orderUI,\r\n        '百灵威系统工程部/product': productUI,\r\n        '百灵威系统工程部/customer': customerUI,\r\n        '百灵威系统工程部/webUser': customerUI,\r\n        '百灵威系统工程部/warehouse': warehouseUI,\r\n    },\r\n    loginTop: jnkTop,\r\n}\r\n\r\nexport default ui;\r\n","//import * as React from 'react';\r\nimport { User, nav } from 'tonva';\r\nimport { CApp, CUq } from 'tonva';\r\nimport { CCart } from 'cart/CCart';\r\nimport { CProduct } from 'product';\r\nimport { COrder } from 'order/COrder';\r\nimport { CHome } from './home/CHome';\r\nimport { CProductCategory } from 'productCategory/CProductCategory';\r\n//import { CSelectContact } from 'customer/CSelectContact';\r\nimport { CMember } from 'member/CMember';\r\nimport { WebUser } from 'CurrentUser';\r\nimport { consts } from './home/consts';\r\nimport { CartViewModel } from 'cart/Cart2';\r\nimport { CMe } from 'me/CMe';\r\nimport { Cart } from 'cart/Cart';\r\nimport { CartService, CartServiceFactory } from 'cart/CartService';\r\n\r\nexport class CCartApp extends CApp {\r\n    cart: Cart;\r\n    cartService: CartService;\r\n    cartViewModel: CartViewModel;\r\n    topKey: any;\r\n\r\n    currentSalesRegion: any;\r\n    currentLanguage: any;\r\n    currentUser: WebUser;\r\n\r\n    cUqOrder: CUq;\r\n    cUqProduct: CUq;\r\n    cUqCommon: CUq;\r\n    cUqWebUser: CUq;\r\n    cUqCustomer: CUq;\r\n    cUqCustomerDiscount: CUq;\r\n    cUqPromotion: CUq;\r\n    cUqWarehouse: CUq;\r\n    cUqSalesTask: CUq;\r\n    cUqMember: CUq;\r\n\r\n    cHome: CHome;\r\n    cCart: CCart;\r\n    cProduct: CProduct;\r\n    cOrder: COrder;\r\n    //cSelectContact: CSelectContact;\r\n    cProductCategory: CProductCategory;\r\n    cMember: CMember;\r\n    cMe: CMe;\r\n\r\n    protected async internalStart() {\r\n        this.cUqOrder = this.getCUq(consts.uqOrder);\r\n        this.cUqProduct = this.getCUq(consts.uqProduct);\r\n        this.cUqCommon = this.getCUq(consts.uqCommon);\r\n        this.cUqWebUser = this.getCUq(consts.uqWebUser);\r\n        this.cUqCustomer = this.getCUq(consts.uqCustomer);\r\n        this.cUqCustomerDiscount = this.getCUq(consts.uqCustomerDiscount);\r\n        this.cUqPromotion = this.getCUq(consts.uqPromotion);\r\n        this.cUqWarehouse = this.getCUq(consts.uqWarehouse);\r\n        this.cUqSalesTask = this.getCUq(consts.uqSalesTask);\r\n        this.cUqMember = this.getCUq(consts.uqMember);\r\n\r\n        let salesRegionTuid = this.cUqCommon.tuid('salesregion');\r\n        this.currentSalesRegion = await salesRegionTuid.load(1);\r\n\r\n        let languageTuid = this.cUqCommon.tuid('language');\r\n        this.currentLanguage = await languageTuid.load(197);\r\n\r\n        this.currentUser = new WebUser(this.cUqWebUser, this.cUqCustomer);\r\n        if (this.isLogined) {\r\n            this.currentUser.setUser(this.user);\r\n        }\r\n\r\n        this.cartService = CartServiceFactory.getCartService(this);\r\n        this.cartViewModel = await this.cartService.load();\r\n\r\n        this.cProductCategory = new CProductCategory(this, undefined);\r\n        this.cCart = new CCart(this, undefined);\r\n        this.cHome = new CHome(this, undefined);\r\n        this.cProduct = new CProduct(this, undefined);\r\n        this.cOrder = new COrder(this, undefined);\r\n        //this.cSelectContact = new CSelectContact(this, undefined);\r\n        this.cMember = new CMember(this, undefined);\r\n        this.cMe = new CMe(this, undefined);\r\n\r\n        let promises: PromiseLike<void>[] = [];\r\n        promises.push(this.cProductCategory.start());\r\n        await Promise.all(promises);\r\n        this.showMain();\r\n        this.topKey = nav.topKey();\r\n    }\r\n\r\n    showMain(initTabName?: string) {\r\n        // eeee\r\n        this.openVPage(this.VAppMain, initTabName);\r\n    }\r\n\r\n    async loginCallBack(user: User) {\r\n        if (this.cartService.isLocal) {\r\n            let cartLocal = { ...this.cartViewModel } as CartViewModel;\r\n            // this.cartService.clear(this.cartViewModel);\r\n            this.cartService = CartServiceFactory.getCartService(this);\r\n            this.cartViewModel = await this.cartService.load();\r\n            // this.cartViewModel = await this.cartService.merge(cartLocal);\r\n        }\r\n    }\r\n\r\n    protected onDispose() {\r\n        this.cartViewModel.dispose();\r\n    }\r\n}\r\n","import { UqUI, Tuid } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import { countryUI, addressUI, currencyUI } from 'ui/common';\r\nimport { productUI } from 'ui/product/tuid/product';\r\nimport { contactUI } from 'ui/customer/tuid/contact';\r\n\r\nexport default {\r\n    productx: productUI,\r\n    address: addressUI,\r\n    country: countryUI,\r\n    province: countryUI,\r\n    city: countryUI,\r\n    county: countryUI,\r\n    contact: contactUI,\r\n    currency: currencyUI,\r\n}","import { UqUI, Tuid } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import { productCategoryUI } from './productCategory';\r\nimport { productUI } from './product';\r\n\r\nexport default {\r\n    productx: productUI,\r\n    productCategory: productCategoryUI,\r\n}\r\n","import * as React from 'react';\r\n\r\nexport const productCategoryUI = {\r\n\r\n    content: (values: any) => {\r\n        let { children } = values;\r\n        return <>\r\n            aaa\r\n        </>\r\n    }\r\n}","import { UqUI, Tuid } from 'tonva';\r\nimport tuid from './tuid';\r\n\r\nconst uqUI: UqUI = {\r\n    tuid: tuid,\r\n}\r\n\r\nexport default uqUI;\r\n","import * as React from 'react';\r\nimport { TuidUI } from 'tonva';\r\n\r\nconst warehouse: TuidUI = {\r\n    content: (values: any) => {\r\n        let { name } = values;\r\n        return <div>\r\n            {name}\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default {\r\n    warehouse: warehouse,\r\n}\r\n","import * as React from 'react';\r\nimport logo from '../images/logo.png';\r\n\r\nexport const jnkTop = <div className=\"d-flex align-items-center\">\r\n    <img className=\"h-3c position-absolute\" src={logo} />\r\n    <div className=\"h3 flex-fill text-center\">\r\n        <span className=\"text-primary mr-3\">百灵威</span>\r\n    </div>\r\n</div>;\r\n","\r\nimport * as React from 'react';\r\nimport './App.css';\r\nimport { NavView, nav, Page, Tabs } from 'tonva';\r\nimport { startApp } from 'tonva';\r\nimport ui from './ui';\r\n//import { faceTabs } from 'facetabs';\r\n\r\n//const tonvaApp = \"bruce/TestApp\";\r\n\r\nclass App extends React.Component {\r\n\r\n  private onLogined = async () => {\r\n    await startApp(ui);\r\n    /*\r\n    let page = <Page header={false}>\r\n      <Tabs tabs={faceTabs} />\r\n    </Page>\r\n    nav.push(page);\r\n    */\r\n    //let b = new B('b');\r\n    //await b.d();\r\n    //nav.push(<div>ddd</div>)\r\n  }\r\n  public render() {\r\n    return <NavView onLogined={this.onLogined} notLogined={this.onLogined} />\r\n  }\r\n}\r\n\r\nexport default App;\r\n\r\n/*\r\nclass B extends A {\r\n  constructor(b:string) {\r\n    super(b);\r\n  }\r\n  //get super() {return this.A}\r\n  async test():Promise<string> {return 'B'}\r\n  async superTest() {\r\n    console.log('superTest: ' + super.t())\r\n    return super.test()\r\n  }\r\n  t() {return 'tb'}\r\n  async d() {\r\n    console.log(super.test);\r\n    console.log(this.test);\r\n    console.log(super.t);\r\n    console.log(this.t);\r\n    console.log('A.test ' + await this.superTest());\r\n    console.log('B.test ' + await this.test());\r\n    console.log('A.t ' + super.t());\r\n    console.log('B.t ' + this.t());\r\n  }\r\n}\r\n*/","// tslint:disable:no-console\r\n// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the 'N+1' visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\nexport default function register() {\r\n  // if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n  if ('serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL!,\r\n      window.location.toString()\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string) {\r\n  navigator.serviceWorker\r\n    .register(swUrl, { scope: '.' })\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker) {\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the old content will have been purged and\r\n                // the fresh content will have been added to the cache.\r\n                // It's the perfect time to display a 'New content is\r\n                // available; please refresh.' message in your web app.\r\n                console.log('New content is available; please refresh.');\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // 'Content is cached for offline use.' message.\r\n                console.log('Content is cached for offline use.');\r\n              }\r\n            }\r\n          };\r\n        }\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type')!.indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root') as HTMLElement\n);\nregisterServiceWorker();\n","module.exports = \"data:image/png;base64,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\"","import * as React from 'react';\r\nimport { Render } from './render';\r\n\r\nexport interface MainSubs<M, S> {\r\n    main: M;\r\n    subs: S[];\r\n}\r\n\r\nexport abstract class ViewBase<T> {\r\n    model: T;\r\n    abstract render(): JSX.Element;\r\n}\r\n\r\nexport class ViewMainSubs<M, S> extends ViewBase<MainSubs<M, S>> {\r\n    protected main: Render<M>;\r\n    protected sub: Render<S>;\r\n    constructor(main: Render<M>, sub: Render<S>) {\r\n        super();\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    protected subsContainer(subViews: JSX.Element[]): JSX.Element {\r\n        return <div>{subViews}</div>\r\n    }\r\n\r\n    protected renderSubItems(): JSX.Element[] {\r\n        let { subs } = this.model;\r\n        if (!subs) return null;\r\n        let subViews: JSX.Element[] = subs.map((v, index) => {\r\n            return <this.sub key={index} {...v} />;\r\n        });\r\n        return subViews;\r\n    }\r\n\r\n    protected renderSubs = (): JSX.Element => {\r\n        return this.subsContainer(this.renderSubItems());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        let { main } = this.model;\r\n        return <>\r\n            <this.main {...main} />\r\n            <this.renderSubs />\r\n        </>;\r\n    }\r\n}\r\n\r\nexport class ViewListMainSubs<M, S> extends ViewBase<MainSubs<M, S>[]> {\r\n    private row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>;\r\n    private main: Render<M>;\r\n    private sub: Render<S>;\r\n    constructor(\r\n        row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>,\r\n        main: Render<M>,\r\n        sub: Render<S>) {\r\n        super();\r\n        this.row = row;\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    render(): JSX.Element {\r\n        return <>\r\n            {this.model.map((v, index) => {\r\n                let view = new this.row(this.main, this.sub);\r\n                view.model = v;\r\n                return <React.Fragment key={index}>{view.render()}</React.Fragment>;\r\n            })}\r\n        </>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { MainProduct, SubPack } from './model';\r\n\r\nexport type Render<T> = (model: T) => JSX.Element;\r\n\r\nexport function renderMainProduct(model: MainProduct): JSX.Element {\r\n    return <div>\r\n        {model.description}\r\n    </div>\r\n}\r\n\r\nexport function renderSubPack(model: SubPack): JSX.Element {\r\n    let { pack, vipPrice, price, quantity, amount } = model;\r\n    return <div>\r\n        {pack.unit}, {vipPrice}, {price}, {quantity}, {amount}\r\n    </div>\r\n}\r\n","export * from './mainSubs';\r\nexport * from './model';\r\nexport * from './render';\r\n","module.exports = __webpack_public_path__ + \"static/media/AnalyticalChemistry.f85ff3e0.png\";","module.exports = __webpack_public_path__ + \"static/media/LabSupplies.3f6ce00f.png\";","module.exports = __webpack_public_path__ + \"static/media/LifeScience.5c2e6ff5.png\";","module.exports = __webpack_public_path__ + \"static/media/MaterialScience.f2439aa0.png\";","module.exports = __webpack_public_path__ + \"static/media/OrganicChemistry.6d56971c.png\";","module.exports = __webpack_public_path__ + \"static/media/pig.772a31a6.png\";"],"sourceRoot":""}